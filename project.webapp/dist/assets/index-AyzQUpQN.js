(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))c(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const v of m.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&c(v)}).observe(document,{childList:!0,subtree:!0});function a(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function c(d){if(d.ep)return;d.ep=!0;const m=a(d);fetch(d.href,m)}})();function Gh(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Wl={exports:{}},Ds={},Gl={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yu;function Kh(){if(Yu)return _e;Yu=1;var l=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),L=Symbol.iterator;function _(A){return A===null||typeof A!="object"?null:(A=L&&A[L]||A["@@iterator"],typeof A=="function"?A:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,$={};function U(A,z,X){this.props=A,this.context=z,this.refs=$,this.updater=X||F}U.prototype.isReactComponent={},U.prototype.setState=function(A,z){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,z,"setState")},U.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function M(){}M.prototype=U.prototype;function oe(A,z,X){this.props=A,this.context=z,this.refs=$,this.updater=X||F}var ne=oe.prototype=new M;ne.constructor=oe,E(ne,U.prototype),ne.isPureReactComponent=!0;var me=Array.isArray,fe=Object.prototype.hasOwnProperty,W={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function C(A,z,X){var ue,ae={},te=null,he=null;if(z!=null)for(ue in z.ref!==void 0&&(he=z.ref),z.key!==void 0&&(te=""+z.key),z)fe.call(z,ue)&&!I.hasOwnProperty(ue)&&(ae[ue]=z[ue]);var Le=arguments.length-2;if(Le===1)ae.children=X;else if(1<Le){for(var Fe=Array(Le),Xe=0;Xe<Le;Xe++)Fe[Xe]=arguments[Xe+2];ae.children=Fe}if(A&&A.defaultProps)for(ue in Le=A.defaultProps,Le)ae[ue]===void 0&&(ae[ue]=Le[ue]);return{$$typeof:l,type:A,key:te,ref:he,props:ae,_owner:W.current}}function k(A,z){return{$$typeof:l,type:A.type,key:z,ref:A.ref,props:A.props,_owner:A._owner}}function R(A){return typeof A=="object"&&A!==null&&A.$$typeof===l}function B(A){var z={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(X){return z[X]})}var K=/\/+/g;function J(A,z){return typeof A=="object"&&A!==null&&A.key!=null?B(""+A.key):z.toString(36)}function le(A,z,X,ue,ae){var te=typeof A;(te==="undefined"||te==="boolean")&&(A=null);var he=!1;if(A===null)he=!0;else switch(te){case"string":case"number":he=!0;break;case"object":switch(A.$$typeof){case l:case o:he=!0}}if(he)return he=A,ae=ae(he),A=ue===""?"."+J(he,0):ue,me(ae)?(X="",A!=null&&(X=A.replace(K,"$&/")+"/"),le(ae,z,X,"",function(Xe){return Xe})):ae!=null&&(R(ae)&&(ae=k(ae,X+(!ae.key||he&&he.key===ae.key?"":(""+ae.key).replace(K,"$&/")+"/")+A)),z.push(ae)),1;if(he=0,ue=ue===""?".":ue+":",me(A))for(var Le=0;Le<A.length;Le++){te=A[Le];var Fe=ue+J(te,Le);he+=le(te,z,X,Fe,ae)}else if(Fe=_(A),typeof Fe=="function")for(A=Fe.call(A),Le=0;!(te=A.next()).done;)te=te.value,Fe=ue+J(te,Le++),he+=le(te,z,X,Fe,ae);else if(te==="object")throw z=String(A),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return he}function be(A,z,X){if(A==null)return A;var ue=[],ae=0;return le(A,ue,"","",function(te){return z.call(X,te,ae++)}),ue}function G(A){if(A._status===-1){var z=A._result;z=z(),z.then(function(X){(A._status===0||A._status===-1)&&(A._status=1,A._result=X)},function(X){(A._status===0||A._status===-1)&&(A._status=2,A._result=X)}),A._status===-1&&(A._status=0,A._result=z)}if(A._status===1)return A._result.default;throw A._result}var f={current:null},h={transition:null},g={ReactCurrentDispatcher:f,ReactCurrentBatchConfig:h,ReactCurrentOwner:W};function b(){throw Error("act(...) is not supported in production builds of React.")}return _e.Children={map:be,forEach:function(A,z,X){be(A,function(){z.apply(this,arguments)},X)},count:function(A){var z=0;return be(A,function(){z++}),z},toArray:function(A){return be(A,function(z){return z})||[]},only:function(A){if(!R(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},_e.Component=U,_e.Fragment=a,_e.Profiler=d,_e.PureComponent=oe,_e.StrictMode=c,_e.Suspense=y,_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g,_e.act=b,_e.cloneElement=function(A,z,X){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var ue=E({},A.props),ae=A.key,te=A.ref,he=A._owner;if(z!=null){if(z.ref!==void 0&&(te=z.ref,he=W.current),z.key!==void 0&&(ae=""+z.key),A.type&&A.type.defaultProps)var Le=A.type.defaultProps;for(Fe in z)fe.call(z,Fe)&&!I.hasOwnProperty(Fe)&&(ue[Fe]=z[Fe]===void 0&&Le!==void 0?Le[Fe]:z[Fe])}var Fe=arguments.length-2;if(Fe===1)ue.children=X;else if(1<Fe){Le=Array(Fe);for(var Xe=0;Xe<Fe;Xe++)Le[Xe]=arguments[Xe+2];ue.children=Le}return{$$typeof:l,type:A.type,key:ae,ref:te,props:ue,_owner:he}},_e.createContext=function(A){return A={$$typeof:v,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:m,_context:A},A.Consumer=A},_e.createElement=C,_e.createFactory=function(A){var z=C.bind(null,A);return z.type=A,z},_e.createRef=function(){return{current:null}},_e.forwardRef=function(A){return{$$typeof:S,render:A}},_e.isValidElement=R,_e.lazy=function(A){return{$$typeof:j,_payload:{_status:-1,_result:A},_init:G}},_e.memo=function(A,z){return{$$typeof:x,type:A,compare:z===void 0?null:z}},_e.startTransition=function(A){var z=h.transition;h.transition={};try{A()}finally{h.transition=z}},_e.unstable_act=b,_e.useCallback=function(A,z){return f.current.useCallback(A,z)},_e.useContext=function(A){return f.current.useContext(A)},_e.useDebugValue=function(){},_e.useDeferredValue=function(A){return f.current.useDeferredValue(A)},_e.useEffect=function(A,z){return f.current.useEffect(A,z)},_e.useId=function(){return f.current.useId()},_e.useImperativeHandle=function(A,z,X){return f.current.useImperativeHandle(A,z,X)},_e.useInsertionEffect=function(A,z){return f.current.useInsertionEffect(A,z)},_e.useLayoutEffect=function(A,z){return f.current.useLayoutEffect(A,z)},_e.useMemo=function(A,z){return f.current.useMemo(A,z)},_e.useReducer=function(A,z,X){return f.current.useReducer(A,z,X)},_e.useRef=function(A){return f.current.useRef(A)},_e.useState=function(A){return f.current.useState(A)},_e.useSyncExternalStore=function(A,z,X){return f.current.useSyncExternalStore(A,z,X)},_e.useTransition=function(){return f.current.useTransition()},_e.version="18.3.1",_e}var Zu;function li(){return Zu||(Zu=1,Gl.exports=Kh()),Gl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xu;function Jh(){if(Xu)return Ds;Xu=1;var l=li(),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,d=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function v(S,y,x){var j,L={},_=null,F=null;x!==void 0&&(_=""+x),y.key!==void 0&&(_=""+y.key),y.ref!==void 0&&(F=y.ref);for(j in y)c.call(y,j)&&!m.hasOwnProperty(j)&&(L[j]=y[j]);if(S&&S.defaultProps)for(j in y=S.defaultProps,y)L[j]===void 0&&(L[j]=y[j]);return{$$typeof:o,type:S,key:_,ref:F,props:L,_owner:d.current}}return Ds.Fragment=a,Ds.jsx=v,Ds.jsxs=v,Ds}var ed;function Yh(){return ed||(ed=1,Wl.exports=Jh()),Wl.exports}var n=Yh(),w=li();const Cd=Gh(w);var Ja={},Kl={exports:{}},Tt={},Jl={exports:{}},Yl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var td;function Zh(){return td||(td=1,function(l){function o(h,g){var b=h.length;h.push(g);e:for(;0<b;){var A=b-1>>>1,z=h[A];if(0<d(z,g))h[A]=g,h[b]=z,b=A;else break e}}function a(h){return h.length===0?null:h[0]}function c(h){if(h.length===0)return null;var g=h[0],b=h.pop();if(b!==g){h[0]=b;e:for(var A=0,z=h.length,X=z>>>1;A<X;){var ue=2*(A+1)-1,ae=h[ue],te=ue+1,he=h[te];if(0>d(ae,b))te<z&&0>d(he,ae)?(h[A]=he,h[te]=b,A=te):(h[A]=ae,h[ue]=b,A=ue);else if(te<z&&0>d(he,b))h[A]=he,h[te]=b,A=te;else break e}}return g}function d(h,g){var b=h.sortIndex-g.sortIndex;return b!==0?b:h.id-g.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;l.unstable_now=function(){return m.now()}}else{var v=Date,S=v.now();l.unstable_now=function(){return v.now()-S}}var y=[],x=[],j=1,L=null,_=3,F=!1,E=!1,$=!1,U=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ne(h){for(var g=a(x);g!==null;){if(g.callback===null)c(x);else if(g.startTime<=h)c(x),g.sortIndex=g.expirationTime,o(y,g);else break;g=a(x)}}function me(h){if($=!1,ne(h),!E)if(a(y)!==null)E=!0,G(fe);else{var g=a(x);g!==null&&f(me,g.startTime-h)}}function fe(h,g){E=!1,$&&($=!1,M(C),C=-1),F=!0;var b=_;try{for(ne(g),L=a(y);L!==null&&(!(L.expirationTime>g)||h&&!B());){var A=L.callback;if(typeof A=="function"){L.callback=null,_=L.priorityLevel;var z=A(L.expirationTime<=g);g=l.unstable_now(),typeof z=="function"?L.callback=z:L===a(y)&&c(y),ne(g)}else c(y);L=a(y)}if(L!==null)var X=!0;else{var ue=a(x);ue!==null&&f(me,ue.startTime-g),X=!1}return X}finally{L=null,_=b,F=!1}}var W=!1,I=null,C=-1,k=5,R=-1;function B(){return!(l.unstable_now()-R<k)}function K(){if(I!==null){var h=l.unstable_now();R=h;var g=!0;try{g=I(!0,h)}finally{g?J():(W=!1,I=null)}}else W=!1}var J;if(typeof oe=="function")J=function(){oe(K)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,be=le.port2;le.port1.onmessage=K,J=function(){be.postMessage(null)}}else J=function(){U(K,0)};function G(h){I=h,W||(W=!0,J())}function f(h,g){C=U(function(){h(l.unstable_now())},g)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(h){h.callback=null},l.unstable_continueExecution=function(){E||F||(E=!0,G(fe))},l.unstable_forceFrameRate=function(h){0>h||125<h?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<h?Math.floor(1e3/h):5},l.unstable_getCurrentPriorityLevel=function(){return _},l.unstable_getFirstCallbackNode=function(){return a(y)},l.unstable_next=function(h){switch(_){case 1:case 2:case 3:var g=3;break;default:g=_}var b=_;_=g;try{return h()}finally{_=b}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(h,g){switch(h){case 1:case 2:case 3:case 4:case 5:break;default:h=3}var b=_;_=h;try{return g()}finally{_=b}},l.unstable_scheduleCallback=function(h,g,b){var A=l.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?A+b:A):b=A,h){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=b+z,h={id:j++,callback:g,priorityLevel:h,startTime:b,expirationTime:z,sortIndex:-1},b>A?(h.sortIndex=b,o(x,h),a(y)===null&&h===a(x)&&($?(M(C),C=-1):$=!0,f(me,b-A))):(h.sortIndex=z,o(y,h),E||F||(E=!0,G(fe))),h},l.unstable_shouldYield=B,l.unstable_wrapCallback=function(h){var g=_;return function(){var b=_;_=g;try{return h.apply(this,arguments)}finally{_=b}}}}(Yl)),Yl}var nd;function Xh(){return nd||(nd=1,Jl.exports=Zh()),Jl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rd;function ef(){if(rd)return Tt;rd=1;var l=li(),o=Xh();function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=new Set,d={};function m(e,t){v(e,t),v(e+"Capture",t)}function v(e,t){for(d[e]=t,e=0;e<t.length;e++)c.add(t[e])}var S=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j={},L={};function _(e){return y.call(L,e)?!0:y.call(j,e)?!1:x.test(e)?L[e]=!0:(j[e]=!0,!1)}function F(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function E(e,t,r,s){if(t===null||typeof t>"u"||F(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $(e,t,r,s,i,u,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=p}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){U[e]=new $(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];U[t]=new $(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){U[e]=new $(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){U[e]=new $(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){U[e]=new $(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){U[e]=new $(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){U[e]=new $(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){U[e]=new $(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){U[e]=new $(e,5,!1,e.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function oe(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(M,oe);U[t]=new $(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(M,oe);U[t]=new $(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(M,oe);U[t]=new $(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){U[e]=new $(e,1,!1,e.toLowerCase(),null,!1,!1)}),U.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){U[e]=new $(e,1,!1,e.toLowerCase(),null,!0,!0)});function ne(e,t,r,s){var i=U.hasOwnProperty(t)?U[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(E(t,r,i,s)&&(r=null),s||i===null?_(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,s=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var me=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fe=Symbol.for("react.element"),W=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),B=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen"),h=Symbol.iterator;function g(e){return e===null||typeof e!="object"?null:(e=h&&e[h]||e["@@iterator"],typeof e=="function"?e:null)}var b=Object.assign,A;function z(e){if(A===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);A=t&&t[1]||""}return`
`+A+e}var X=!1;function ue(e,t){if(!e||X)return"";X=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(q){var s=q}Reflect.construct(e,[],t)}else{try{t.call()}catch(q){s=q}e.call(t.prototype)}else{try{throw Error()}catch(q){s=q}e()}}catch(q){if(q&&s&&typeof q.stack=="string"){for(var i=q.stack.split(`
`),u=s.stack.split(`
`),p=i.length-1,N=u.length-1;1<=p&&0<=N&&i[p]!==u[N];)N--;for(;1<=p&&0<=N;p--,N--)if(i[p]!==u[N]){if(p!==1||N!==1)do if(p--,N--,0>N||i[p]!==u[N]){var T=`
`+i[p].replace(" at new "," at ");return e.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",e.displayName)),T}while(1<=p&&0<=N);break}}}finally{X=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?z(e):""}function ae(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=ue(e.type,!1),e;case 11:return e=ue(e.type.render,!1),e;case 1:return e=ue(e.type,!0),e;default:return""}}function te(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case I:return"Fragment";case W:return"Portal";case k:return"Profiler";case C:return"StrictMode";case J:return"Suspense";case le:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case B:return(e.displayName||"Context")+".Consumer";case R:return(e._context.displayName||"Context")+".Provider";case K:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case be:return t=e.displayName||null,t!==null?t:te(e.type)||"Memo";case G:t=e._payload,e=e._init;try{return te(e(t))}catch{}}return null}function he(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Le(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Fe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xe(e){var t=Fe(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,u=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(p){s=""+p,u.call(this,p)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(p){s=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $e(e){e._valueTracker||(e._valueTracker=Xe(e))}function Sn(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Fe(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function dt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Kt(e,t){var r=t.checked;return b({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Jt(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Le(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ft(e,t){t=t.checked,t!=null&&ne(e,"checked",t,!1)}function Mt(e,t){ft(e,t);var r=Le(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Y(e,t.type,r):t.hasOwnProperty("defaultValue")&&Y(e,t.type,Le(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Fn(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Y(e,t,r){(t!=="number"||dt(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ce=Array.isArray;function De(e,t,r,s){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Le(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,s&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ie(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(a(91));return b({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ce(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(a(92));if(ce(r)){if(1<r.length)throw Error(a(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Le(r)}}function re(e,t){var r=Le(t.value),s=Le(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function ye(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function et(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function st(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?et(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ve,pt=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ve=Ve||document.createElement("div"),Ve.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Lt(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ot={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rr=["Webkit","ms","Moz","O"];Object.keys(Ot).forEach(function(e){rr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ot[t]=Ot[e]})});function Mn(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ot.hasOwnProperty(e)&&Ot[e]?(""+t).trim():t+"px"}function kt(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,i=Mn(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,i):e[r]=i}}var Pt=b({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $t(e,t){if(t){if(Pt[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(a(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(a(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(t.style!=null&&typeof t.style!="object")throw Error(a(62))}}function Ut(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mn=null;function D(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var V=null,Q=null,Se=null;function ke(e){if(e=ps(e)){if(typeof V!="function")throw Error(a(280));var t=e.stateNode;t&&(t=da(t),V(e.stateNode,e.type,t))}}function de(e){Q?Se?Se.push(e):Se=[e]:Q=e}function Pe(){if(Q){var e=Q,t=Se;if(Se=Q=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ee(e,t){return e(t)}function ze(){}var hn=!1;function uo(e,t,r){if(hn)return e(t,r);hn=!0;try{return Ee(e,t,r)}finally{hn=!1,(Q!==null||Se!==null)&&(ze(),Pe())}}function Yt(e,t){var r=e.stateNode;if(r===null)return null;var s=da(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(a(231,t,typeof r));return r}var Kr=!1;if(S)try{var sr={};Object.defineProperty(sr,"passive",{get:function(){Kr=!0}}),window.addEventListener("test",sr,sr),window.removeEventListener("test",sr,sr)}catch{Kr=!1}function em(e,t,r,s,i,u,p,N,T){var q=Array.prototype.slice.call(arguments,3);try{t.apply(r,q)}catch(ee){this.onError(ee)}}var Jr=!1,Bs=null,qs=!1,mo=null,tm={onError:function(e){Jr=!0,Bs=e}};function nm(e,t,r,s,i,u,p,N,T){Jr=!1,Bs=null,em.apply(tm,arguments)}function rm(e,t,r,s,i,u,p,N,T){if(nm.apply(this,arguments),Jr){if(Jr){var q=Bs;Jr=!1,Bs=null}else throw Error(a(198));qs||(qs=!0,mo=q)}}function ar(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function wi(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function bi(e){if(ar(e)!==e)throw Error(a(188))}function sm(e){var t=e.alternate;if(!t){if(t=ar(e),t===null)throw Error(a(188));return t!==e?null:e}for(var r=e,s=t;;){var i=r.return;if(i===null)break;var u=i.alternate;if(u===null){if(s=i.return,s!==null){r=s;continue}break}if(i.child===u.child){for(u=i.child;u;){if(u===r)return bi(i),e;if(u===s)return bi(i),t;u=u.sibling}throw Error(a(188))}if(r.return!==s.return)r=i,s=u;else{for(var p=!1,N=i.child;N;){if(N===r){p=!0,r=i,s=u;break}if(N===s){p=!0,s=i,r=u;break}N=N.sibling}if(!p){for(N=u.child;N;){if(N===r){p=!0,r=u,s=i;break}if(N===s){p=!0,s=u,r=i;break}N=N.sibling}if(!p)throw Error(a(189))}}if(r.alternate!==s)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?e:t}function Si(e){return e=sm(e),e!==null?ki(e):null}function ki(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ki(e);if(t!==null)return t;e=e.sibling}return null}var ji=o.unstable_scheduleCallback,Ni=o.unstable_cancelCallback,am=o.unstable_shouldYield,om=o.unstable_requestPaint,tt=o.unstable_now,lm=o.unstable_getCurrentPriorityLevel,ho=o.unstable_ImmediatePriority,Ci=o.unstable_UserBlockingPriority,Vs=o.unstable_NormalPriority,im=o.unstable_LowPriority,Ai=o.unstable_IdlePriority,Qs=null,fn=null;function cm(e){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Qs,e,void 0,(e.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:mm,um=Math.log,dm=Math.LN2;function mm(e){return e>>>=0,e===0?32:31-(um(e)/dm|0)|0}var Ws=64,Gs=4194304;function Yr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ks(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,i=e.suspendedLanes,u=e.pingedLanes,p=r&268435455;if(p!==0){var N=p&~i;N!==0?s=Yr(N):(u&=p,u!==0&&(s=Yr(u)))}else p=r&~i,p!==0?s=Yr(p):u!==0&&(s=Yr(u));if(s===0)return 0;if(t!==0&&t!==s&&(t&i)===0&&(i=s&-s,u=t&-t,i>=u||i===16&&(u&4194240)!==0))return t;if((s&4)!==0&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Zt(t),i=1<<r,s|=e[r],t&=~i;return s}function hm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fm(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,u=e.pendingLanes;0<u;){var p=31-Zt(u),N=1<<p,T=i[p];T===-1?((N&r)===0||(N&s)!==0)&&(i[p]=hm(N,t)):T<=t&&(e.expiredLanes|=N),u&=~N}}function fo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ei(){var e=Ws;return Ws<<=1,(Ws&4194240)===0&&(Ws=64),e}function po(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Zr(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zt(t),e[t]=r}function pm(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Zt(r),u=1<<i;t[i]=0,s[i]=-1,e[i]=-1,r&=~u}}function go(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Zt(r),i=1<<s;i&t|e[s]&t&&(e[s]|=t),r&=~i}}var Ue=0;function Ti(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Di,yo,Li,Pi,Ii,xo=!1,Js=[],On=null,$n=null,Un=null,Xr=new Map,es=new Map,zn=[],gm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ri(e,t){switch(e){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":Xr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":es.delete(t.pointerId)}}function ts(e,t,r,s,i,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:u,targetContainers:[i]},t!==null&&(t=ps(t),t!==null&&yo(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function ym(e,t,r,s,i){switch(t){case"focusin":return On=ts(On,e,t,r,s,i),!0;case"dragenter":return $n=ts($n,e,t,r,s,i),!0;case"mouseover":return Un=ts(Un,e,t,r,s,i),!0;case"pointerover":var u=i.pointerId;return Xr.set(u,ts(Xr.get(u)||null,e,t,r,s,i)),!0;case"gotpointercapture":return u=i.pointerId,es.set(u,ts(es.get(u)||null,e,t,r,s,i)),!0}return!1}function _i(e){var t=or(e.target);if(t!==null){var r=ar(t);if(r!==null){if(t=r.tag,t===13){if(t=wi(r),t!==null){e.blockedOn=t,Ii(e.priority,function(){Li(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ys(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=wo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);mn=s,r.target.dispatchEvent(s),mn=null}else return t=ps(r),t!==null&&yo(t),e.blockedOn=r,!1;t.shift()}return!0}function Fi(e,t,r){Ys(e)&&r.delete(t)}function xm(){xo=!1,On!==null&&Ys(On)&&(On=null),$n!==null&&Ys($n)&&($n=null),Un!==null&&Ys(Un)&&(Un=null),Xr.forEach(Fi),es.forEach(Fi)}function ns(e,t){e.blockedOn===t&&(e.blockedOn=null,xo||(xo=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,xm)))}function rs(e){function t(i){return ns(i,e)}if(0<Js.length){ns(Js[0],e);for(var r=1;r<Js.length;r++){var s=Js[r];s.blockedOn===e&&(s.blockedOn=null)}}for(On!==null&&ns(On,e),$n!==null&&ns($n,e),Un!==null&&ns(Un,e),Xr.forEach(t),es.forEach(t),r=0;r<zn.length;r++)s=zn[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<zn.length&&(r=zn[0],r.blockedOn===null);)_i(r),r.blockedOn===null&&zn.shift()}var vr=me.ReactCurrentBatchConfig,Zs=!0;function vm(e,t,r,s){var i=Ue,u=vr.transition;vr.transition=null;try{Ue=1,vo(e,t,r,s)}finally{Ue=i,vr.transition=u}}function wm(e,t,r,s){var i=Ue,u=vr.transition;vr.transition=null;try{Ue=4,vo(e,t,r,s)}finally{Ue=i,vr.transition=u}}function vo(e,t,r,s){if(Zs){var i=wo(e,t,r,s);if(i===null)Mo(e,t,s,Xs,r),Ri(e,s);else if(ym(i,e,t,r,s))s.stopPropagation();else if(Ri(e,s),t&4&&-1<gm.indexOf(e)){for(;i!==null;){var u=ps(i);if(u!==null&&Di(u),u=wo(e,t,r,s),u===null&&Mo(e,t,s,Xs,r),u===i)break;i=u}i!==null&&s.stopPropagation()}else Mo(e,t,s,null,r)}}var Xs=null;function wo(e,t,r,s){if(Xs=null,e=D(s),e=or(e),e!==null)if(t=ar(e),t===null)e=null;else if(r=t.tag,r===13){if(e=wi(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xs=e,null}function Mi(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lm()){case ho:return 1;case Ci:return 4;case Vs:case im:return 16;case Ai:return 536870912;default:return 16}default:return 16}}var Hn=null,bo=null,ea=null;function Oi(){if(ea)return ea;var e,t=bo,r=t.length,s,i="value"in Hn?Hn.value:Hn.textContent,u=i.length;for(e=0;e<r&&t[e]===i[e];e++);var p=r-e;for(s=1;s<=p&&t[r-s]===i[u-s];s++);return ea=i.slice(e,1<s?1-s:void 0)}function ta(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function na(){return!0}function $i(){return!1}function It(e){function t(r,s,i,u,p){this._reactName=r,this._targetInst=i,this.type=s,this.nativeEvent=u,this.target=p,this.currentTarget=null;for(var N in e)e.hasOwnProperty(N)&&(r=e[N],this[N]=r?r(u):u[N]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?na:$i,this.isPropagationStopped=$i,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=na)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=na)},persist:function(){},isPersistent:na}),t}var wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},So=It(wr),ss=b({},wr,{view:0,detail:0}),bm=It(ss),ko,jo,as,ra=b({},ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Co,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==as&&(as&&e.type==="mousemove"?(ko=e.screenX-as.screenX,jo=e.screenY-as.screenY):jo=ko=0,as=e),ko)},movementY:function(e){return"movementY"in e?e.movementY:jo}}),Ui=It(ra),Sm=b({},ra,{dataTransfer:0}),km=It(Sm),jm=b({},ss,{relatedTarget:0}),No=It(jm),Nm=b({},wr,{animationName:0,elapsedTime:0,pseudoElement:0}),Cm=It(Nm),Am=b({},wr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Em=It(Am),Tm=b({},wr,{data:0}),zi=It(Tm),Dm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Im(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Pm[e])?!!t[e]:!1}function Co(){return Im}var Rm=b({},ss,{key:function(e){if(e.key){var t=Dm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ta(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Co,charCode:function(e){return e.type==="keypress"?ta(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ta(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_m=It(Rm),Fm=b({},ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hi=It(Fm),Mm=b({},ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Co}),Om=It(Mm),$m=b({},wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Um=It($m),zm=b({},ra,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Hm=It(zm),Bm=[9,13,27,32],Ao=S&&"CompositionEvent"in window,os=null;S&&"documentMode"in document&&(os=document.documentMode);var qm=S&&"TextEvent"in window&&!os,Bi=S&&(!Ao||os&&8<os&&11>=os),qi=" ",Vi=!1;function Qi(e,t){switch(e){case"keyup":return Bm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wi(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var br=!1;function Vm(e,t){switch(e){case"compositionend":return Wi(t);case"keypress":return t.which!==32?null:(Vi=!0,qi);case"textInput":return e=t.data,e===qi&&Vi?null:e;default:return null}}function Qm(e,t){if(br)return e==="compositionend"||!Ao&&Qi(e,t)?(e=Oi(),ea=bo=Hn=null,br=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bi&&t.locale!=="ko"?null:t.data;default:return null}}var Wm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Wm[e.type]:t==="textarea"}function Ki(e,t,r,s){de(s),t=ia(t,"onChange"),0<t.length&&(r=new So("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var ls=null,is=null;function Gm(e){hc(e,0)}function sa(e){var t=Cr(e);if(Sn(t))return e}function Km(e,t){if(e==="change")return t}var Ji=!1;if(S){var Eo;if(S){var To="oninput"in document;if(!To){var Yi=document.createElement("div");Yi.setAttribute("oninput","return;"),To=typeof Yi.oninput=="function"}Eo=To}else Eo=!1;Ji=Eo&&(!document.documentMode||9<document.documentMode)}function Zi(){ls&&(ls.detachEvent("onpropertychange",Xi),is=ls=null)}function Xi(e){if(e.propertyName==="value"&&sa(is)){var t=[];Ki(t,is,e,D(e)),uo(Gm,t)}}function Jm(e,t,r){e==="focusin"?(Zi(),ls=t,is=r,ls.attachEvent("onpropertychange",Xi)):e==="focusout"&&Zi()}function Ym(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sa(is)}function Zm(e,t){if(e==="click")return sa(t)}function Xm(e,t){if(e==="input"||e==="change")return sa(t)}function eh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xt=typeof Object.is=="function"?Object.is:eh;function cs(e,t){if(Xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var i=r[s];if(!y.call(t,i)||!Xt(e[i],t[i]))return!1}return!0}function ec(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tc(e,t){var r=ec(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ec(r)}}function nc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rc(){for(var e=window,t=dt();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=dt(e.document)}return t}function Do(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function th(e){var t=rc(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&nc(r.ownerDocument.documentElement,r)){if(s!==null&&Do(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,u=Math.min(s.start,i);s=s.end===void 0?u:Math.min(s.end,i),!e.extend&&u>s&&(i=s,s=u,u=i),i=tc(r,u);var p=tc(r,s);i&&p&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),u>s?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var nh=S&&"documentMode"in document&&11>=document.documentMode,Sr=null,Lo=null,us=null,Po=!1;function sc(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Po||Sr==null||Sr!==dt(s)||(s=Sr,"selectionStart"in s&&Do(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),us&&cs(us,s)||(us=s,s=ia(Lo,"onSelect"),0<s.length&&(t=new So("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Sr)))}function aa(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var kr={animationend:aa("Animation","AnimationEnd"),animationiteration:aa("Animation","AnimationIteration"),animationstart:aa("Animation","AnimationStart"),transitionend:aa("Transition","TransitionEnd")},Io={},ac={};S&&(ac=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);function oa(e){if(Io[e])return Io[e];if(!kr[e])return e;var t=kr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ac)return Io[e]=t[r];return e}var oc=oa("animationend"),lc=oa("animationiteration"),ic=oa("animationstart"),cc=oa("transitionend"),uc=new Map,dc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bn(e,t){uc.set(e,t),m(t,[e])}for(var Ro=0;Ro<dc.length;Ro++){var _o=dc[Ro],rh=_o.toLowerCase(),sh=_o[0].toUpperCase()+_o.slice(1);Bn(rh,"on"+sh)}Bn(oc,"onAnimationEnd"),Bn(lc,"onAnimationIteration"),Bn(ic,"onAnimationStart"),Bn("dblclick","onDoubleClick"),Bn("focusin","onFocus"),Bn("focusout","onBlur"),Bn(cc,"onTransitionEnd"),v("onMouseEnter",["mouseout","mouseover"]),v("onMouseLeave",["mouseout","mouseover"]),v("onPointerEnter",["pointerout","pointerover"]),v("onPointerLeave",["pointerout","pointerover"]),m("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),m("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),m("onBeforeInput",["compositionend","keypress","textInput","paste"]),m("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ah=new Set("cancel close invalid load scroll toggle".split(" ").concat(ds));function mc(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,rm(s,t,void 0,e),e.currentTarget=null}function hc(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],i=s.event;s=s.listeners;e:{var u=void 0;if(t)for(var p=s.length-1;0<=p;p--){var N=s[p],T=N.instance,q=N.currentTarget;if(N=N.listener,T!==u&&i.isPropagationStopped())break e;mc(i,N,q),u=T}else for(p=0;p<s.length;p++){if(N=s[p],T=N.instance,q=N.currentTarget,N=N.listener,T!==u&&i.isPropagationStopped())break e;mc(i,N,q),u=T}}}if(qs)throw e=mo,qs=!1,mo=null,e}function Be(e,t){var r=t[Bo];r===void 0&&(r=t[Bo]=new Set);var s=e+"__bubble";r.has(s)||(fc(t,e,2,!1),r.add(s))}function Fo(e,t,r){var s=0;t&&(s|=4),fc(r,e,s,t)}var la="_reactListening"+Math.random().toString(36).slice(2);function ms(e){if(!e[la]){e[la]=!0,c.forEach(function(r){r!=="selectionchange"&&(ah.has(r)||Fo(r,!1,e),Fo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[la]||(t[la]=!0,Fo("selectionchange",!1,t))}}function fc(e,t,r,s){switch(Mi(t)){case 1:var i=vm;break;case 4:i=wm;break;default:i=vo}r=i.bind(null,t,r,e),i=void 0,!Kr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Mo(e,t,r,s,i){var u=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var p=s.tag;if(p===3||p===4){var N=s.stateNode.containerInfo;if(N===i||N.nodeType===8&&N.parentNode===i)break;if(p===4)for(p=s.return;p!==null;){var T=p.tag;if((T===3||T===4)&&(T=p.stateNode.containerInfo,T===i||T.nodeType===8&&T.parentNode===i))return;p=p.return}for(;N!==null;){if(p=or(N),p===null)return;if(T=p.tag,T===5||T===6){s=u=p;continue e}N=N.parentNode}}s=s.return}uo(function(){var q=u,ee=D(r),se=[];e:{var Z=uc.get(e);if(Z!==void 0){var pe=So,xe=e;switch(e){case"keypress":if(ta(r)===0)break e;case"keydown":case"keyup":pe=_m;break;case"focusin":xe="focus",pe=No;break;case"focusout":xe="blur",pe=No;break;case"beforeblur":case"afterblur":pe=No;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=Ui;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=km;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=Om;break;case oc:case lc:case ic:pe=Cm;break;case cc:pe=Um;break;case"scroll":pe=bm;break;case"wheel":pe=Hm;break;case"copy":case"cut":case"paste":pe=Em;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=Hi}var ve=(t&4)!==0,nt=!ve&&e==="scroll",O=ve?Z!==null?Z+"Capture":null:Z;ve=[];for(var P=q,H;P!==null;){H=P;var ie=H.stateNode;if(H.tag===5&&ie!==null&&(H=ie,O!==null&&(ie=Yt(P,O),ie!=null&&ve.push(hs(P,ie,H)))),nt)break;P=P.return}0<ve.length&&(Z=new pe(Z,xe,null,r,ee),se.push({event:Z,listeners:ve}))}}if((t&7)===0){e:{if(Z=e==="mouseover"||e==="pointerover",pe=e==="mouseout"||e==="pointerout",Z&&r!==mn&&(xe=r.relatedTarget||r.fromElement)&&(or(xe)||xe[kn]))break e;if((pe||Z)&&(Z=ee.window===ee?ee:(Z=ee.ownerDocument)?Z.defaultView||Z.parentWindow:window,pe?(xe=r.relatedTarget||r.toElement,pe=q,xe=xe?or(xe):null,xe!==null&&(nt=ar(xe),xe!==nt||xe.tag!==5&&xe.tag!==6)&&(xe=null)):(pe=null,xe=q),pe!==xe)){if(ve=Ui,ie="onMouseLeave",O="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(ve=Hi,ie="onPointerLeave",O="onPointerEnter",P="pointer"),nt=pe==null?Z:Cr(pe),H=xe==null?Z:Cr(xe),Z=new ve(ie,P+"leave",pe,r,ee),Z.target=nt,Z.relatedTarget=H,ie=null,or(ee)===q&&(ve=new ve(O,P+"enter",xe,r,ee),ve.target=H,ve.relatedTarget=nt,ie=ve),nt=ie,pe&&xe)t:{for(ve=pe,O=xe,P=0,H=ve;H;H=jr(H))P++;for(H=0,ie=O;ie;ie=jr(ie))H++;for(;0<P-H;)ve=jr(ve),P--;for(;0<H-P;)O=jr(O),H--;for(;P--;){if(ve===O||O!==null&&ve===O.alternate)break t;ve=jr(ve),O=jr(O)}ve=null}else ve=null;pe!==null&&pc(se,Z,pe,ve,!1),xe!==null&&nt!==null&&pc(se,nt,xe,ve,!0)}}e:{if(Z=q?Cr(q):window,pe=Z.nodeName&&Z.nodeName.toLowerCase(),pe==="select"||pe==="input"&&Z.type==="file")var we=Km;else if(Gi(Z))if(Ji)we=Xm;else{we=Ym;var je=Jm}else(pe=Z.nodeName)&&pe.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(we=Zm);if(we&&(we=we(e,q))){Ki(se,we,r,ee);break e}je&&je(e,Z,q),e==="focusout"&&(je=Z._wrapperState)&&je.controlled&&Z.type==="number"&&Y(Z,"number",Z.value)}switch(je=q?Cr(q):window,e){case"focusin":(Gi(je)||je.contentEditable==="true")&&(Sr=je,Lo=q,us=null);break;case"focusout":us=Lo=Sr=null;break;case"mousedown":Po=!0;break;case"contextmenu":case"mouseup":case"dragend":Po=!1,sc(se,r,ee);break;case"selectionchange":if(nh)break;case"keydown":case"keyup":sc(se,r,ee)}var Ne;if(Ao)e:{switch(e){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else br?Qi(e,r)&&(Ae="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Ae="onCompositionStart");Ae&&(Bi&&r.locale!=="ko"&&(br||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&br&&(Ne=Oi()):(Hn=ee,bo="value"in Hn?Hn.value:Hn.textContent,br=!0)),je=ia(q,Ae),0<je.length&&(Ae=new zi(Ae,e,null,r,ee),se.push({event:Ae,listeners:je}),Ne?Ae.data=Ne:(Ne=Wi(r),Ne!==null&&(Ae.data=Ne)))),(Ne=qm?Vm(e,r):Qm(e,r))&&(q=ia(q,"onBeforeInput"),0<q.length&&(ee=new zi("onBeforeInput","beforeinput",null,r,ee),se.push({event:ee,listeners:q}),ee.data=Ne))}hc(se,t)})}function hs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ia(e,t){for(var r=t+"Capture",s=[];e!==null;){var i=e,u=i.stateNode;i.tag===5&&u!==null&&(i=u,u=Yt(e,r),u!=null&&s.unshift(hs(e,u,i)),u=Yt(e,t),u!=null&&s.push(hs(e,u,i))),e=e.return}return s}function jr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pc(e,t,r,s,i){for(var u=t._reactName,p=[];r!==null&&r!==s;){var N=r,T=N.alternate,q=N.stateNode;if(T!==null&&T===s)break;N.tag===5&&q!==null&&(N=q,i?(T=Yt(r,u),T!=null&&p.unshift(hs(r,T,N))):i||(T=Yt(r,u),T!=null&&p.push(hs(r,T,N)))),r=r.return}p.length!==0&&e.push({event:t,listeners:p})}var oh=/\r\n?/g,lh=/\u0000|\uFFFD/g;function gc(e){return(typeof e=="string"?e:""+e).replace(oh,`
`).replace(lh,"")}function ca(e,t,r){if(t=gc(t),gc(e)!==t&&r)throw Error(a(425))}function ua(){}var Oo=null,$o=null;function Uo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var zo=typeof setTimeout=="function"?setTimeout:void 0,ih=typeof clearTimeout=="function"?clearTimeout:void 0,yc=typeof Promise=="function"?Promise:void 0,ch=typeof queueMicrotask=="function"?queueMicrotask:typeof yc<"u"?function(e){return yc.resolve(null).then(e).catch(uh)}:zo;function uh(e){setTimeout(function(){throw e})}function Ho(e,t){var r=t,s=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(s===0){e.removeChild(i),rs(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=i}while(r);rs(t)}function qn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Nr=Math.random().toString(36).slice(2),pn="__reactFiber$"+Nr,fs="__reactProps$"+Nr,kn="__reactContainer$"+Nr,Bo="__reactEvents$"+Nr,dh="__reactListeners$"+Nr,mh="__reactHandles$"+Nr;function or(e){var t=e[pn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[kn]||r[pn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=xc(e);e!==null;){if(r=e[pn])return r;e=xc(e)}return t}e=r,r=e.parentNode}return null}function ps(e){return e=e[pn]||e[kn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Cr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(a(33))}function da(e){return e[fs]||null}var qo=[],Ar=-1;function Vn(e){return{current:e}}function qe(e){0>Ar||(e.current=qo[Ar],qo[Ar]=null,Ar--)}function He(e,t){Ar++,qo[Ar]=e.current,e.current=t}var Qn={},gt=Vn(Qn),jt=Vn(!1),lr=Qn;function Er(e,t){var r=e.type.contextTypes;if(!r)return Qn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},u;for(u in r)i[u]=t[u];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Nt(e){return e=e.childContextTypes,e!=null}function ma(){qe(jt),qe(gt)}function vc(e,t,r){if(gt.current!==Qn)throw Error(a(168));He(gt,t),He(jt,r)}function wc(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(a(108,he(e)||"Unknown",i));return b({},r,s)}function ha(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qn,lr=gt.current,He(gt,e),He(jt,jt.current),!0}function bc(e,t,r){var s=e.stateNode;if(!s)throw Error(a(169));r?(e=wc(e,t,lr),s.__reactInternalMemoizedMergedChildContext=e,qe(jt),qe(gt),He(gt,e)):qe(jt),He(jt,r)}var jn=null,fa=!1,Vo=!1;function Sc(e){jn===null?jn=[e]:jn.push(e)}function hh(e){fa=!0,Sc(e)}function Wn(){if(!Vo&&jn!==null){Vo=!0;var e=0,t=Ue;try{var r=jn;for(Ue=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}jn=null,fa=!1}catch(i){throw jn!==null&&(jn=jn.slice(e+1)),ji(ho,Wn),i}finally{Ue=t,Vo=!1}}return null}var Tr=[],Dr=0,pa=null,ga=0,zt=[],Ht=0,ir=null,Nn=1,Cn="";function cr(e,t){Tr[Dr++]=ga,Tr[Dr++]=pa,pa=e,ga=t}function kc(e,t,r){zt[Ht++]=Nn,zt[Ht++]=Cn,zt[Ht++]=ir,ir=e;var s=Nn;e=Cn;var i=32-Zt(s)-1;s&=~(1<<i),r+=1;var u=32-Zt(t)+i;if(30<u){var p=i-i%5;u=(s&(1<<p)-1).toString(32),s>>=p,i-=p,Nn=1<<32-Zt(t)+i|r<<i|s,Cn=u+e}else Nn=1<<u|r<<i|s,Cn=e}function Qo(e){e.return!==null&&(cr(e,1),kc(e,1,0))}function Wo(e){for(;e===pa;)pa=Tr[--Dr],Tr[Dr]=null,ga=Tr[--Dr],Tr[Dr]=null;for(;e===ir;)ir=zt[--Ht],zt[Ht]=null,Cn=zt[--Ht],zt[Ht]=null,Nn=zt[--Ht],zt[Ht]=null}var Rt=null,_t=null,Qe=!1,en=null;function jc(e,t){var r=Qt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Nc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Rt=e,_t=qn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Rt=e,_t=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ir!==null?{id:Nn,overflow:Cn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Qt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Rt=e,_t=null,!0):!1;default:return!1}}function Go(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ko(e){if(Qe){var t=_t;if(t){var r=t;if(!Nc(e,t)){if(Go(e))throw Error(a(418));t=qn(r.nextSibling);var s=Rt;t&&Nc(e,t)?jc(s,r):(e.flags=e.flags&-4097|2,Qe=!1,Rt=e)}}else{if(Go(e))throw Error(a(418));e.flags=e.flags&-4097|2,Qe=!1,Rt=e}}}function Cc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rt=e}function ya(e){if(e!==Rt)return!1;if(!Qe)return Cc(e),Qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Uo(e.type,e.memoizedProps)),t&&(t=_t)){if(Go(e))throw Ac(),Error(a(418));for(;t;)jc(e,t),t=qn(t.nextSibling)}if(Cc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){_t=qn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}_t=null}}else _t=Rt?qn(e.stateNode.nextSibling):null;return!0}function Ac(){for(var e=_t;e;)e=qn(e.nextSibling)}function Lr(){_t=Rt=null,Qe=!1}function Jo(e){en===null?en=[e]:en.push(e)}var fh=me.ReactCurrentBatchConfig;function gs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(a(309));var s=r.stateNode}if(!s)throw Error(a(147,e));var i=s,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(p){var N=i.refs;p===null?delete N[u]:N[u]=p},t._stringRef=u,t)}if(typeof e!="string")throw Error(a(284));if(!r._owner)throw Error(a(290,e))}return e}function xa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ec(e){var t=e._init;return t(e._payload)}function Tc(e){function t(O,P){if(e){var H=O.deletions;H===null?(O.deletions=[P],O.flags|=16):H.push(P)}}function r(O,P){if(!e)return null;for(;P!==null;)t(O,P),P=P.sibling;return null}function s(O,P){for(O=new Map;P!==null;)P.key!==null?O.set(P.key,P):O.set(P.index,P),P=P.sibling;return O}function i(O,P){return O=tr(O,P),O.index=0,O.sibling=null,O}function u(O,P,H){return O.index=H,e?(H=O.alternate,H!==null?(H=H.index,H<P?(O.flags|=2,P):H):(O.flags|=2,P)):(O.flags|=1048576,P)}function p(O){return e&&O.alternate===null&&(O.flags|=2),O}function N(O,P,H,ie){return P===null||P.tag!==6?(P=zl(H,O.mode,ie),P.return=O,P):(P=i(P,H),P.return=O,P)}function T(O,P,H,ie){var we=H.type;return we===I?ee(O,P,H.props.children,ie,H.key):P!==null&&(P.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===G&&Ec(we)===P.type)?(ie=i(P,H.props),ie.ref=gs(O,P,H),ie.return=O,ie):(ie=Ha(H.type,H.key,H.props,null,O.mode,ie),ie.ref=gs(O,P,H),ie.return=O,ie)}function q(O,P,H,ie){return P===null||P.tag!==4||P.stateNode.containerInfo!==H.containerInfo||P.stateNode.implementation!==H.implementation?(P=Hl(H,O.mode,ie),P.return=O,P):(P=i(P,H.children||[]),P.return=O,P)}function ee(O,P,H,ie,we){return P===null||P.tag!==7?(P=yr(H,O.mode,ie,we),P.return=O,P):(P=i(P,H),P.return=O,P)}function se(O,P,H){if(typeof P=="string"&&P!==""||typeof P=="number")return P=zl(""+P,O.mode,H),P.return=O,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case fe:return H=Ha(P.type,P.key,P.props,null,O.mode,H),H.ref=gs(O,null,P),H.return=O,H;case W:return P=Hl(P,O.mode,H),P.return=O,P;case G:var ie=P._init;return se(O,ie(P._payload),H)}if(ce(P)||g(P))return P=yr(P,O.mode,H,null),P.return=O,P;xa(O,P)}return null}function Z(O,P,H,ie){var we=P!==null?P.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return we!==null?null:N(O,P,""+H,ie);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case fe:return H.key===we?T(O,P,H,ie):null;case W:return H.key===we?q(O,P,H,ie):null;case G:return we=H._init,Z(O,P,we(H._payload),ie)}if(ce(H)||g(H))return we!==null?null:ee(O,P,H,ie,null);xa(O,H)}return null}function pe(O,P,H,ie,we){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return O=O.get(H)||null,N(P,O,""+ie,we);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case fe:return O=O.get(ie.key===null?H:ie.key)||null,T(P,O,ie,we);case W:return O=O.get(ie.key===null?H:ie.key)||null,q(P,O,ie,we);case G:var je=ie._init;return pe(O,P,H,je(ie._payload),we)}if(ce(ie)||g(ie))return O=O.get(H)||null,ee(P,O,ie,we,null);xa(P,ie)}return null}function xe(O,P,H,ie){for(var we=null,je=null,Ne=P,Ae=P=0,ut=null;Ne!==null&&Ae<H.length;Ae++){Ne.index>Ae?(ut=Ne,Ne=null):ut=Ne.sibling;var Oe=Z(O,Ne,H[Ae],ie);if(Oe===null){Ne===null&&(Ne=ut);break}e&&Ne&&Oe.alternate===null&&t(O,Ne),P=u(Oe,P,Ae),je===null?we=Oe:je.sibling=Oe,je=Oe,Ne=ut}if(Ae===H.length)return r(O,Ne),Qe&&cr(O,Ae),we;if(Ne===null){for(;Ae<H.length;Ae++)Ne=se(O,H[Ae],ie),Ne!==null&&(P=u(Ne,P,Ae),je===null?we=Ne:je.sibling=Ne,je=Ne);return Qe&&cr(O,Ae),we}for(Ne=s(O,Ne);Ae<H.length;Ae++)ut=pe(Ne,O,Ae,H[Ae],ie),ut!==null&&(e&&ut.alternate!==null&&Ne.delete(ut.key===null?Ae:ut.key),P=u(ut,P,Ae),je===null?we=ut:je.sibling=ut,je=ut);return e&&Ne.forEach(function(nr){return t(O,nr)}),Qe&&cr(O,Ae),we}function ve(O,P,H,ie){var we=g(H);if(typeof we!="function")throw Error(a(150));if(H=we.call(H),H==null)throw Error(a(151));for(var je=we=null,Ne=P,Ae=P=0,ut=null,Oe=H.next();Ne!==null&&!Oe.done;Ae++,Oe=H.next()){Ne.index>Ae?(ut=Ne,Ne=null):ut=Ne.sibling;var nr=Z(O,Ne,Oe.value,ie);if(nr===null){Ne===null&&(Ne=ut);break}e&&Ne&&nr.alternate===null&&t(O,Ne),P=u(nr,P,Ae),je===null?we=nr:je.sibling=nr,je=nr,Ne=ut}if(Oe.done)return r(O,Ne),Qe&&cr(O,Ae),we;if(Ne===null){for(;!Oe.done;Ae++,Oe=H.next())Oe=se(O,Oe.value,ie),Oe!==null&&(P=u(Oe,P,Ae),je===null?we=Oe:je.sibling=Oe,je=Oe);return Qe&&cr(O,Ae),we}for(Ne=s(O,Ne);!Oe.done;Ae++,Oe=H.next())Oe=pe(Ne,O,Ae,Oe.value,ie),Oe!==null&&(e&&Oe.alternate!==null&&Ne.delete(Oe.key===null?Ae:Oe.key),P=u(Oe,P,Ae),je===null?we=Oe:je.sibling=Oe,je=Oe);return e&&Ne.forEach(function(Wh){return t(O,Wh)}),Qe&&cr(O,Ae),we}function nt(O,P,H,ie){if(typeof H=="object"&&H!==null&&H.type===I&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case fe:e:{for(var we=H.key,je=P;je!==null;){if(je.key===we){if(we=H.type,we===I){if(je.tag===7){r(O,je.sibling),P=i(je,H.props.children),P.return=O,O=P;break e}}else if(je.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===G&&Ec(we)===je.type){r(O,je.sibling),P=i(je,H.props),P.ref=gs(O,je,H),P.return=O,O=P;break e}r(O,je);break}else t(O,je);je=je.sibling}H.type===I?(P=yr(H.props.children,O.mode,ie,H.key),P.return=O,O=P):(ie=Ha(H.type,H.key,H.props,null,O.mode,ie),ie.ref=gs(O,P,H),ie.return=O,O=ie)}return p(O);case W:e:{for(je=H.key;P!==null;){if(P.key===je)if(P.tag===4&&P.stateNode.containerInfo===H.containerInfo&&P.stateNode.implementation===H.implementation){r(O,P.sibling),P=i(P,H.children||[]),P.return=O,O=P;break e}else{r(O,P);break}else t(O,P);P=P.sibling}P=Hl(H,O.mode,ie),P.return=O,O=P}return p(O);case G:return je=H._init,nt(O,P,je(H._payload),ie)}if(ce(H))return xe(O,P,H,ie);if(g(H))return ve(O,P,H,ie);xa(O,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,P!==null&&P.tag===6?(r(O,P.sibling),P=i(P,H),P.return=O,O=P):(r(O,P),P=zl(H,O.mode,ie),P.return=O,O=P),p(O)):r(O,P)}return nt}var Pr=Tc(!0),Dc=Tc(!1),va=Vn(null),wa=null,Ir=null,Yo=null;function Zo(){Yo=Ir=wa=null}function Xo(e){var t=va.current;qe(va),e._currentValue=t}function el(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Rr(e,t){wa=e,Yo=Ir=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Ct=!0),e.firstContext=null)}function Bt(e){var t=e._currentValue;if(Yo!==e)if(e={context:e,memoizedValue:t,next:null},Ir===null){if(wa===null)throw Error(a(308));Ir=e,wa.dependencies={lanes:0,firstContext:e}}else Ir=Ir.next=e;return t}var ur=null;function tl(e){ur===null?ur=[e]:ur.push(e)}function Lc(e,t,r,s){var i=t.interleaved;return i===null?(r.next=r,tl(t)):(r.next=i.next,i.next=r),t.interleaved=r,An(e,s)}function An(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Gn=!1;function nl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function En(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kn(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Me&2)!==0){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,An(e,r)}return i=s.interleaved,i===null?(t.next=t,tl(s)):(t.next=i.next,i.next=t),s.interleaved=t,An(e,r)}function ba(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,go(e,r)}}function Ic(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var i=null,u=null;if(r=r.firstBaseUpdate,r!==null){do{var p={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};u===null?i=u=p:u=u.next=p,r=r.next}while(r!==null);u===null?i=u=t:u=u.next=t}else i=u=t;r={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:u,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Sa(e,t,r,s){var i=e.updateQueue;Gn=!1;var u=i.firstBaseUpdate,p=i.lastBaseUpdate,N=i.shared.pending;if(N!==null){i.shared.pending=null;var T=N,q=T.next;T.next=null,p===null?u=q:p.next=q,p=T;var ee=e.alternate;ee!==null&&(ee=ee.updateQueue,N=ee.lastBaseUpdate,N!==p&&(N===null?ee.firstBaseUpdate=q:N.next=q,ee.lastBaseUpdate=T))}if(u!==null){var se=i.baseState;p=0,ee=q=T=null,N=u;do{var Z=N.lane,pe=N.eventTime;if((s&Z)===Z){ee!==null&&(ee=ee.next={eventTime:pe,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var xe=e,ve=N;switch(Z=t,pe=r,ve.tag){case 1:if(xe=ve.payload,typeof xe=="function"){se=xe.call(pe,se,Z);break e}se=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=ve.payload,Z=typeof xe=="function"?xe.call(pe,se,Z):xe,Z==null)break e;se=b({},se,Z);break e;case 2:Gn=!0}}N.callback!==null&&N.lane!==0&&(e.flags|=64,Z=i.effects,Z===null?i.effects=[N]:Z.push(N))}else pe={eventTime:pe,lane:Z,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ee===null?(q=ee=pe,T=se):ee=ee.next=pe,p|=Z;if(N=N.next,N===null){if(N=i.shared.pending,N===null)break;Z=N,N=Z.next,Z.next=null,i.lastBaseUpdate=Z,i.shared.pending=null}}while(!0);if(ee===null&&(T=se),i.baseState=T,i.firstBaseUpdate=q,i.lastBaseUpdate=ee,t=i.shared.interleaved,t!==null){i=t;do p|=i.lane,i=i.next;while(i!==t)}else u===null&&(i.shared.lanes=0);hr|=p,e.lanes=p,e.memoizedState=se}}function Rc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],i=s.callback;if(i!==null){if(s.callback=null,s=r,typeof i!="function")throw Error(a(191,i));i.call(s)}}}var ys={},gn=Vn(ys),xs=Vn(ys),vs=Vn(ys);function dr(e){if(e===ys)throw Error(a(174));return e}function rl(e,t){switch(He(vs,t),He(xs,e),He(gn,ys),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:st(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=st(t,e)}qe(gn),He(gn,t)}function _r(){qe(gn),qe(xs),qe(vs)}function _c(e){dr(vs.current);var t=dr(gn.current),r=st(t,e.type);t!==r&&(He(xs,e),He(gn,r))}function sl(e){xs.current===e&&(qe(gn),qe(xs))}var Ge=Vn(0);function ka(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var al=[];function ol(){for(var e=0;e<al.length;e++)al[e]._workInProgressVersionPrimary=null;al.length=0}var ja=me.ReactCurrentDispatcher,ll=me.ReactCurrentBatchConfig,mr=0,Ke=null,at=null,it=null,Na=!1,ws=!1,bs=0,ph=0;function yt(){throw Error(a(321))}function il(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Xt(e[r],t[r]))return!1;return!0}function cl(e,t,r,s,i,u){if(mr=u,Ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ja.current=e===null||e.memoizedState===null?vh:wh,e=r(s,i),ws){u=0;do{if(ws=!1,bs=0,25<=u)throw Error(a(301));u+=1,it=at=null,t.updateQueue=null,ja.current=bh,e=r(s,i)}while(ws)}if(ja.current=Ea,t=at!==null&&at.next!==null,mr=0,it=at=Ke=null,Na=!1,t)throw Error(a(300));return e}function ul(){var e=bs!==0;return bs=0,e}function yn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Ke.memoizedState=it=e:it=it.next=e,it}function qt(){if(at===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=at.next;var t=it===null?Ke.memoizedState:it.next;if(t!==null)it=t,at=e;else{if(e===null)throw Error(a(310));at=e,e={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},it===null?Ke.memoizedState=it=e:it=it.next=e}return it}function Ss(e,t){return typeof t=="function"?t(e):t}function dl(e){var t=qt(),r=t.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=e;var s=at,i=s.baseQueue,u=r.pending;if(u!==null){if(i!==null){var p=i.next;i.next=u.next,u.next=p}s.baseQueue=i=u,r.pending=null}if(i!==null){u=i.next,s=s.baseState;var N=p=null,T=null,q=u;do{var ee=q.lane;if((mr&ee)===ee)T!==null&&(T=T.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),s=q.hasEagerState?q.eagerState:e(s,q.action);else{var se={lane:ee,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};T===null?(N=T=se,p=s):T=T.next=se,Ke.lanes|=ee,hr|=ee}q=q.next}while(q!==null&&q!==u);T===null?p=s:T.next=N,Xt(s,t.memoizedState)||(Ct=!0),t.memoizedState=s,t.baseState=p,t.baseQueue=T,r.lastRenderedState=s}if(e=r.interleaved,e!==null){i=e;do u=i.lane,Ke.lanes|=u,hr|=u,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ml(e){var t=qt(),r=t.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=e;var s=r.dispatch,i=r.pending,u=t.memoizedState;if(i!==null){r.pending=null;var p=i=i.next;do u=e(u,p.action),p=p.next;while(p!==i);Xt(u,t.memoizedState)||(Ct=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),r.lastRenderedState=u}return[u,s]}function Fc(){}function Mc(e,t){var r=Ke,s=qt(),i=t(),u=!Xt(s.memoizedState,i);if(u&&(s.memoizedState=i,Ct=!0),s=s.queue,hl(Uc.bind(null,r,s,e),[e]),s.getSnapshot!==t||u||it!==null&&it.memoizedState.tag&1){if(r.flags|=2048,ks(9,$c.bind(null,r,s,i,t),void 0,null),ct===null)throw Error(a(349));(mr&30)!==0||Oc(r,t,i)}return i}function Oc(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function $c(e,t,r,s){t.value=r,t.getSnapshot=s,zc(t)&&Hc(e)}function Uc(e,t,r){return r(function(){zc(t)&&Hc(e)})}function zc(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Xt(e,r)}catch{return!0}}function Hc(e){var t=An(e,1);t!==null&&sn(t,e,1,-1)}function Bc(e){var t=yn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:e},t.queue=e,e=e.dispatch=xh.bind(null,Ke,e),[t.memoizedState,e]}function ks(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function qc(){return qt().memoizedState}function Ca(e,t,r,s){var i=yn();Ke.flags|=e,i.memoizedState=ks(1|t,r,void 0,s===void 0?null:s)}function Aa(e,t,r,s){var i=qt();s=s===void 0?null:s;var u=void 0;if(at!==null){var p=at.memoizedState;if(u=p.destroy,s!==null&&il(s,p.deps)){i.memoizedState=ks(t,r,u,s);return}}Ke.flags|=e,i.memoizedState=ks(1|t,r,u,s)}function Vc(e,t){return Ca(8390656,8,e,t)}function hl(e,t){return Aa(2048,8,e,t)}function Qc(e,t){return Aa(4,2,e,t)}function Wc(e,t){return Aa(4,4,e,t)}function Gc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Kc(e,t,r){return r=r!=null?r.concat([e]):null,Aa(4,4,Gc.bind(null,t,e),r)}function fl(){}function Jc(e,t){var r=qt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&il(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Yc(e,t){var r=qt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&il(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Zc(e,t,r){return(mr&21)===0?(e.baseState&&(e.baseState=!1,Ct=!0),e.memoizedState=r):(Xt(r,t)||(r=Ei(),Ke.lanes|=r,hr|=r,e.baseState=!0),t)}function gh(e,t){var r=Ue;Ue=r!==0&&4>r?r:4,e(!0);var s=ll.transition;ll.transition={};try{e(!1),t()}finally{Ue=r,ll.transition=s}}function Xc(){return qt().memoizedState}function yh(e,t,r){var s=Xn(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},eu(e))tu(t,r);else if(r=Lc(e,t,r,s),r!==null){var i=bt();sn(r,e,s,i),nu(r,t,s)}}function xh(e,t,r){var s=Xn(e),i={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(eu(e))tu(t,i);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var p=t.lastRenderedState,N=u(p,r);if(i.hasEagerState=!0,i.eagerState=N,Xt(N,p)){var T=t.interleaved;T===null?(i.next=i,tl(t)):(i.next=T.next,T.next=i),t.interleaved=i;return}}catch{}finally{}r=Lc(e,t,i,s),r!==null&&(i=bt(),sn(r,e,s,i),nu(r,t,s))}}function eu(e){var t=e.alternate;return e===Ke||t!==null&&t===Ke}function tu(e,t){ws=Na=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function nu(e,t,r){if((r&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,go(e,r)}}var Ea={readContext:Bt,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},vh={readContext:Bt,useCallback:function(e,t){return yn().memoizedState=[e,t===void 0?null:t],e},useContext:Bt,useEffect:Vc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ca(4194308,4,Gc.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ca(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ca(4,2,e,t)},useMemo:function(e,t){var r=yn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=yn();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=yh.bind(null,Ke,e),[s.memoizedState,e]},useRef:function(e){var t=yn();return e={current:e},t.memoizedState=e},useState:Bc,useDebugValue:fl,useDeferredValue:function(e){return yn().memoizedState=e},useTransition:function(){var e=Bc(!1),t=e[0];return e=gh.bind(null,e[1]),yn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Ke,i=yn();if(Qe){if(r===void 0)throw Error(a(407));r=r()}else{if(r=t(),ct===null)throw Error(a(349));(mr&30)!==0||Oc(s,t,r)}i.memoizedState=r;var u={value:r,getSnapshot:t};return i.queue=u,Vc(Uc.bind(null,s,u,e),[e]),s.flags|=2048,ks(9,$c.bind(null,s,u,r,t),void 0,null),r},useId:function(){var e=yn(),t=ct.identifierPrefix;if(Qe){var r=Cn,s=Nn;r=(s&~(1<<32-Zt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=bs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ph++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},wh={readContext:Bt,useCallback:Jc,useContext:Bt,useEffect:hl,useImperativeHandle:Kc,useInsertionEffect:Qc,useLayoutEffect:Wc,useMemo:Yc,useReducer:dl,useRef:qc,useState:function(){return dl(Ss)},useDebugValue:fl,useDeferredValue:function(e){var t=qt();return Zc(t,at.memoizedState,e)},useTransition:function(){var e=dl(Ss)[0],t=qt().memoizedState;return[e,t]},useMutableSource:Fc,useSyncExternalStore:Mc,useId:Xc,unstable_isNewReconciler:!1},bh={readContext:Bt,useCallback:Jc,useContext:Bt,useEffect:hl,useImperativeHandle:Kc,useInsertionEffect:Qc,useLayoutEffect:Wc,useMemo:Yc,useReducer:ml,useRef:qc,useState:function(){return ml(Ss)},useDebugValue:fl,useDeferredValue:function(e){var t=qt();return at===null?t.memoizedState=e:Zc(t,at.memoizedState,e)},useTransition:function(){var e=ml(Ss)[0],t=qt().memoizedState;return[e,t]},useMutableSource:Fc,useSyncExternalStore:Mc,useId:Xc,unstable_isNewReconciler:!1};function tn(e,t){if(e&&e.defaultProps){t=b({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function pl(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:b({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ta={isMounted:function(e){return(e=e._reactInternals)?ar(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=bt(),i=Xn(e),u=En(s,i);u.payload=t,r!=null&&(u.callback=r),t=Kn(e,u,i),t!==null&&(sn(t,e,i,s),ba(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=bt(),i=Xn(e),u=En(s,i);u.tag=1,u.payload=t,r!=null&&(u.callback=r),t=Kn(e,u,i),t!==null&&(sn(t,e,i,s),ba(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=bt(),s=Xn(e),i=En(r,s);i.tag=2,t!=null&&(i.callback=t),t=Kn(e,i,s),t!==null&&(sn(t,e,s,r),ba(t,e,s))}};function ru(e,t,r,s,i,u,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,u,p):t.prototype&&t.prototype.isPureReactComponent?!cs(r,s)||!cs(i,u):!0}function su(e,t,r){var s=!1,i=Qn,u=t.contextType;return typeof u=="object"&&u!==null?u=Bt(u):(i=Nt(t)?lr:gt.current,s=t.contextTypes,u=(s=s!=null)?Er(e,i):Qn),t=new t(r,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ta,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=u),t}function au(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Ta.enqueueReplaceState(t,t.state,null)}function gl(e,t,r,s){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},nl(e);var u=t.contextType;typeof u=="object"&&u!==null?i.context=Bt(u):(u=Nt(t)?lr:gt.current,i.context=Er(e,u)),i.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(pl(e,t,u,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ta.enqueueReplaceState(i,i.state,null),Sa(e,r,i,s),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Fr(e,t){try{var r="",s=t;do r+=ae(s),s=s.return;while(s);var i=r}catch(u){i=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:i,digest:null}}function yl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function xl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Sh=typeof WeakMap=="function"?WeakMap:Map;function ou(e,t,r){r=En(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Fa||(Fa=!0,Il=s),xl(e,t)},r}function lu(e,t,r){r=En(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;r.payload=function(){return s(i)},r.callback=function(){xl(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(r.callback=function(){xl(e,t),typeof s!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),r}function iu(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Sh;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(r)||(i.add(r),e=Fh.bind(null,e,t,r),t.then(e,e))}function cu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function uu(e,t,r,s,i){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=En(-1,1),t.tag=2,Kn(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var kh=me.ReactCurrentOwner,Ct=!1;function wt(e,t,r,s){t.child=e===null?Dc(t,null,r,s):Pr(t,e.child,r,s)}function du(e,t,r,s,i){r=r.render;var u=t.ref;return Rr(t,i),s=cl(e,t,r,s,u,i),r=ul(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Tn(e,t,i)):(Qe&&r&&Qo(t),t.flags|=1,wt(e,t,s,i),t.child)}function mu(e,t,r,s,i){if(e===null){var u=r.type;return typeof u=="function"&&!Ul(u)&&u.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=u,hu(e,t,u,s,i)):(e=Ha(r.type,null,s,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,(e.lanes&i)===0){var p=u.memoizedProps;if(r=r.compare,r=r!==null?r:cs,r(p,s)&&e.ref===t.ref)return Tn(e,t,i)}return t.flags|=1,e=tr(u,s),e.ref=t.ref,e.return=t,t.child=e}function hu(e,t,r,s,i){if(e!==null){var u=e.memoizedProps;if(cs(u,s)&&e.ref===t.ref)if(Ct=!1,t.pendingProps=s=u,(e.lanes&i)!==0)(e.flags&131072)!==0&&(Ct=!0);else return t.lanes=e.lanes,Tn(e,t,i)}return vl(e,t,r,s,i)}function fu(e,t,r){var s=t.pendingProps,i=s.children,u=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Or,Ft),Ft|=r;else{if((r&1073741824)===0)return e=u!==null?u.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,He(Or,Ft),Ft|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=u!==null?u.baseLanes:r,He(Or,Ft),Ft|=s}else u!==null?(s=u.baseLanes|r,t.memoizedState=null):s=r,He(Or,Ft),Ft|=s;return wt(e,t,i,r),t.child}function pu(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function vl(e,t,r,s,i){var u=Nt(r)?lr:gt.current;return u=Er(t,u),Rr(t,i),r=cl(e,t,r,s,u,i),s=ul(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Tn(e,t,i)):(Qe&&s&&Qo(t),t.flags|=1,wt(e,t,r,i),t.child)}function gu(e,t,r,s,i){if(Nt(r)){var u=!0;ha(t)}else u=!1;if(Rr(t,i),t.stateNode===null)La(e,t),su(t,r,s),gl(t,r,s,i),s=!0;else if(e===null){var p=t.stateNode,N=t.memoizedProps;p.props=N;var T=p.context,q=r.contextType;typeof q=="object"&&q!==null?q=Bt(q):(q=Nt(r)?lr:gt.current,q=Er(t,q));var ee=r.getDerivedStateFromProps,se=typeof ee=="function"||typeof p.getSnapshotBeforeUpdate=="function";se||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(N!==s||T!==q)&&au(t,p,s,q),Gn=!1;var Z=t.memoizedState;p.state=Z,Sa(t,s,p,i),T=t.memoizedState,N!==s||Z!==T||jt.current||Gn?(typeof ee=="function"&&(pl(t,r,ee,s),T=t.memoizedState),(N=Gn||ru(t,r,N,s,Z,T,q))?(se||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=T),p.props=s,p.state=T,p.context=q,s=N):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{p=t.stateNode,Pc(e,t),N=t.memoizedProps,q=t.type===t.elementType?N:tn(t.type,N),p.props=q,se=t.pendingProps,Z=p.context,T=r.contextType,typeof T=="object"&&T!==null?T=Bt(T):(T=Nt(r)?lr:gt.current,T=Er(t,T));var pe=r.getDerivedStateFromProps;(ee=typeof pe=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(N!==se||Z!==T)&&au(t,p,s,T),Gn=!1,Z=t.memoizedState,p.state=Z,Sa(t,s,p,i);var xe=t.memoizedState;N!==se||Z!==xe||jt.current||Gn?(typeof pe=="function"&&(pl(t,r,pe,s),xe=t.memoizedState),(q=Gn||ru(t,r,q,s,Z,xe,T)||!1)?(ee||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(s,xe,T),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(s,xe,T)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||N===e.memoizedProps&&Z===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||N===e.memoizedProps&&Z===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=xe),p.props=s,p.state=xe,p.context=T,s=q):(typeof p.componentDidUpdate!="function"||N===e.memoizedProps&&Z===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||N===e.memoizedProps&&Z===e.memoizedState||(t.flags|=1024),s=!1)}return wl(e,t,r,s,u,i)}function wl(e,t,r,s,i,u){pu(e,t);var p=(t.flags&128)!==0;if(!s&&!p)return i&&bc(t,r,!1),Tn(e,t,u);s=t.stateNode,kh.current=t;var N=p&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&p?(t.child=Pr(t,e.child,null,u),t.child=Pr(t,null,N,u)):wt(e,t,N,u),t.memoizedState=s.state,i&&bc(t,r,!0),t.child}function yu(e){var t=e.stateNode;t.pendingContext?vc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&vc(e,t.context,!1),rl(e,t.containerInfo)}function xu(e,t,r,s,i){return Lr(),Jo(i),t.flags|=256,wt(e,t,r,s),t.child}var bl={dehydrated:null,treeContext:null,retryLane:0};function Sl(e){return{baseLanes:e,cachePool:null,transitions:null}}function vu(e,t,r){var s=t.pendingProps,i=Ge.current,u=!1,p=(t.flags&128)!==0,N;if((N=p)||(N=e!==null&&e.memoizedState===null?!1:(i&2)!==0),N?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),He(Ge,i&1),e===null)return Ko(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(p=s.children,e=s.fallback,u?(s=t.mode,u=t.child,p={mode:"hidden",children:p},(s&1)===0&&u!==null?(u.childLanes=0,u.pendingProps=p):u=Ba(p,s,0,null),e=yr(e,s,r,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Sl(r),t.memoizedState=bl,e):kl(t,p));if(i=e.memoizedState,i!==null&&(N=i.dehydrated,N!==null))return jh(e,t,p,s,N,i,r);if(u){u=s.fallback,p=t.mode,i=e.child,N=i.sibling;var T={mode:"hidden",children:s.children};return(p&1)===0&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=T,t.deletions=null):(s=tr(i,T),s.subtreeFlags=i.subtreeFlags&14680064),N!==null?u=tr(N,u):(u=yr(u,p,r,null),u.flags|=2),u.return=t,s.return=t,s.sibling=u,t.child=s,s=u,u=t.child,p=e.child.memoizedState,p=p===null?Sl(r):{baseLanes:p.baseLanes|r,cachePool:null,transitions:p.transitions},u.memoizedState=p,u.childLanes=e.childLanes&~r,t.memoizedState=bl,s}return u=e.child,e=u.sibling,s=tr(u,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function kl(e,t){return t=Ba({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Da(e,t,r,s){return s!==null&&Jo(s),Pr(t,e.child,null,r),e=kl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jh(e,t,r,s,i,u,p){if(r)return t.flags&256?(t.flags&=-257,s=yl(Error(a(422))),Da(e,t,p,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=s.fallback,i=t.mode,s=Ba({mode:"visible",children:s.children},i,0,null),u=yr(u,i,p,null),u.flags|=2,s.return=t,u.return=t,s.sibling=u,t.child=s,(t.mode&1)!==0&&Pr(t,e.child,null,p),t.child.memoizedState=Sl(p),t.memoizedState=bl,u);if((t.mode&1)===0)return Da(e,t,p,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var N=s.dgst;return s=N,u=Error(a(419)),s=yl(u,s,void 0),Da(e,t,p,s)}if(N=(p&e.childLanes)!==0,Ct||N){if(s=ct,s!==null){switch(p&-p){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(s.suspendedLanes|p))!==0?0:i,i!==0&&i!==u.retryLane&&(u.retryLane=i,An(e,i),sn(s,e,i,-1))}return $l(),s=yl(Error(a(421))),Da(e,t,p,s)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Mh.bind(null,e),i._reactRetry=t,null):(e=u.treeContext,_t=qn(i.nextSibling),Rt=t,Qe=!0,en=null,e!==null&&(zt[Ht++]=Nn,zt[Ht++]=Cn,zt[Ht++]=ir,Nn=e.id,Cn=e.overflow,ir=t),t=kl(t,s.children),t.flags|=4096,t)}function wu(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),el(e.return,t,r)}function jl(e,t,r,s,i){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:i}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=s,u.tail=r,u.tailMode=i)}function bu(e,t,r){var s=t.pendingProps,i=s.revealOrder,u=s.tail;if(wt(e,t,s.children,r),s=Ge.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wu(e,r,t);else if(e.tag===19)wu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(He(Ge,s),(t.mode&1)===0)t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&ka(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),jl(t,!1,i,r,u);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ka(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}jl(t,!0,r,null,u);break;case"together":jl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function La(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Tn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),hr|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,r=tr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=tr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Nh(e,t,r){switch(t.tag){case 3:yu(t),Lr();break;case 5:_c(t);break;case 1:Nt(t.type)&&ha(t);break;case 4:rl(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;He(va,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(He(Ge,Ge.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?vu(e,t,r):(He(Ge,Ge.current&1),e=Tn(e,t,r),e!==null?e.sibling:null);He(Ge,Ge.current&1);break;case 19:if(s=(r&t.childLanes)!==0,(e.flags&128)!==0){if(s)return bu(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),He(Ge,Ge.current),s)break;return null;case 22:case 23:return t.lanes=0,fu(e,t,r)}return Tn(e,t,r)}var Su,Nl,ku,ju;Su=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Nl=function(){},ku=function(e,t,r,s){var i=e.memoizedProps;if(i!==s){e=t.stateNode,dr(gn.current);var u=null;switch(r){case"input":i=Kt(e,i),s=Kt(e,s),u=[];break;case"select":i=b({},i,{value:void 0}),s=b({},s,{value:void 0}),u=[];break;case"textarea":i=Ie(e,i),s=Ie(e,s),u=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=ua)}$t(r,s);var p;r=null;for(q in i)if(!s.hasOwnProperty(q)&&i.hasOwnProperty(q)&&i[q]!=null)if(q==="style"){var N=i[q];for(p in N)N.hasOwnProperty(p)&&(r||(r={}),r[p]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(d.hasOwnProperty(q)?u||(u=[]):(u=u||[]).push(q,null));for(q in s){var T=s[q];if(N=i?.[q],s.hasOwnProperty(q)&&T!==N&&(T!=null||N!=null))if(q==="style")if(N){for(p in N)!N.hasOwnProperty(p)||T&&T.hasOwnProperty(p)||(r||(r={}),r[p]="");for(p in T)T.hasOwnProperty(p)&&N[p]!==T[p]&&(r||(r={}),r[p]=T[p])}else r||(u||(u=[]),u.push(q,r)),r=T;else q==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,N=N?N.__html:void 0,T!=null&&N!==T&&(u=u||[]).push(q,T)):q==="children"?typeof T!="string"&&typeof T!="number"||(u=u||[]).push(q,""+T):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(d.hasOwnProperty(q)?(T!=null&&q==="onScroll"&&Be("scroll",e),u||N===T||(u=[])):(u=u||[]).push(q,T))}r&&(u=u||[]).push("style",r);var q=u;(t.updateQueue=q)&&(t.flags|=4)}},ju=function(e,t,r,s){r!==s&&(t.flags|=4)};function js(e,t){if(!Qe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function xt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Ch(e,t,r){var s=t.pendingProps;switch(Wo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(t),null;case 1:return Nt(t.type)&&ma(),xt(t),null;case 3:return s=t.stateNode,_r(),qe(jt),qe(gt),ol(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ya(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,en!==null&&(Fl(en),en=null))),Nl(e,t),xt(t),null;case 5:sl(t);var i=dr(vs.current);if(r=t.type,e!==null&&t.stateNode!=null)ku(e,t,r,s,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(a(166));return xt(t),null}if(e=dr(gn.current),ya(t)){s=t.stateNode,r=t.type;var u=t.memoizedProps;switch(s[pn]=t,s[fs]=u,e=(t.mode&1)!==0,r){case"dialog":Be("cancel",s),Be("close",s);break;case"iframe":case"object":case"embed":Be("load",s);break;case"video":case"audio":for(i=0;i<ds.length;i++)Be(ds[i],s);break;case"source":Be("error",s);break;case"img":case"image":case"link":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"input":Jt(s,u),Be("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!u.multiple},Be("invalid",s);break;case"textarea":Ce(s,u),Be("invalid",s)}$t(r,u),i=null;for(var p in u)if(u.hasOwnProperty(p)){var N=u[p];p==="children"?typeof N=="string"?s.textContent!==N&&(u.suppressHydrationWarning!==!0&&ca(s.textContent,N,e),i=["children",N]):typeof N=="number"&&s.textContent!==""+N&&(u.suppressHydrationWarning!==!0&&ca(s.textContent,N,e),i=["children",""+N]):d.hasOwnProperty(p)&&N!=null&&p==="onScroll"&&Be("scroll",s)}switch(r){case"input":$e(s),Fn(s,u,!0);break;case"textarea":$e(s),ye(s);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(s.onclick=ua)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{p=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=et(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=p.createElement(r,{is:s.is}):(e=p.createElement(r),r==="select"&&(p=e,s.multiple?p.multiple=!0:s.size&&(p.size=s.size))):e=p.createElementNS(e,r),e[pn]=t,e[fs]=s,Su(e,t,!1,!1),t.stateNode=e;e:{switch(p=Ut(r,s),r){case"dialog":Be("cancel",e),Be("close",e),i=s;break;case"iframe":case"object":case"embed":Be("load",e),i=s;break;case"video":case"audio":for(i=0;i<ds.length;i++)Be(ds[i],e);i=s;break;case"source":Be("error",e),i=s;break;case"img":case"image":case"link":Be("error",e),Be("load",e),i=s;break;case"details":Be("toggle",e),i=s;break;case"input":Jt(e,s),i=Kt(e,s),Be("invalid",e);break;case"option":i=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},i=b({},s,{value:void 0}),Be("invalid",e);break;case"textarea":Ce(e,s),i=Ie(e,s),Be("invalid",e);break;default:i=s}$t(r,i),N=i;for(u in N)if(N.hasOwnProperty(u)){var T=N[u];u==="style"?kt(e,T):u==="dangerouslySetInnerHTML"?(T=T?T.__html:void 0,T!=null&&pt(e,T)):u==="children"?typeof T=="string"?(r!=="textarea"||T!=="")&&Lt(e,T):typeof T=="number"&&Lt(e,""+T):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(d.hasOwnProperty(u)?T!=null&&u==="onScroll"&&Be("scroll",e):T!=null&&ne(e,u,T,p))}switch(r){case"input":$e(e),Fn(e,s,!1);break;case"textarea":$e(e),ye(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Le(s.value));break;case"select":e.multiple=!!s.multiple,u=s.value,u!=null?De(e,!!s.multiple,u,!1):s.defaultValue!=null&&De(e,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=ua)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xt(t),null;case 6:if(e&&t.stateNode!=null)ju(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(a(166));if(r=dr(vs.current),dr(gn.current),ya(t)){if(s=t.stateNode,r=t.memoizedProps,s[pn]=t,(u=s.nodeValue!==r)&&(e=Rt,e!==null))switch(e.tag){case 3:ca(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ca(s.nodeValue,r,(e.mode&1)!==0)}u&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[pn]=t,t.stateNode=s}return xt(t),null;case 13:if(qe(Ge),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Qe&&_t!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Ac(),Lr(),t.flags|=98560,u=!1;else if(u=ya(t),s!==null&&s.dehydrated!==null){if(e===null){if(!u)throw Error(a(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(a(317));u[pn]=t}else Lr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;xt(t),u=!1}else en!==null&&(Fl(en),en=null),u=!0;if(!u)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ge.current&1)!==0?ot===0&&(ot=3):$l())),t.updateQueue!==null&&(t.flags|=4),xt(t),null);case 4:return _r(),Nl(e,t),e===null&&ms(t.stateNode.containerInfo),xt(t),null;case 10:return Xo(t.type._context),xt(t),null;case 17:return Nt(t.type)&&ma(),xt(t),null;case 19:if(qe(Ge),u=t.memoizedState,u===null)return xt(t),null;if(s=(t.flags&128)!==0,p=u.rendering,p===null)if(s)js(u,!1);else{if(ot!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(p=ka(e),p!==null){for(t.flags|=128,js(u,!1),s=p.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)u=r,e=s,u.flags&=14680066,p=u.alternate,p===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=p.childLanes,u.lanes=p.lanes,u.child=p.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=p.memoizedProps,u.memoizedState=p.memoizedState,u.updateQueue=p.updateQueue,u.type=p.type,e=p.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return He(Ge,Ge.current&1|2),t.child}e=e.sibling}u.tail!==null&&tt()>$r&&(t.flags|=128,s=!0,js(u,!1),t.lanes=4194304)}else{if(!s)if(e=ka(p),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),js(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!Qe)return xt(t),null}else 2*tt()-u.renderingStartTime>$r&&r!==1073741824&&(t.flags|=128,s=!0,js(u,!1),t.lanes=4194304);u.isBackwards?(p.sibling=t.child,t.child=p):(r=u.last,r!==null?r.sibling=p:t.child=p,u.last=p)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=tt(),t.sibling=null,r=Ge.current,He(Ge,s?r&1|2:r&1),t):(xt(t),null);case 22:case 23:return Ol(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&(t.mode&1)!==0?(Ft&1073741824)!==0&&(xt(t),t.subtreeFlags&6&&(t.flags|=8192)):xt(t),null;case 24:return null;case 25:return null}throw Error(a(156,t.tag))}function Ah(e,t){switch(Wo(t),t.tag){case 1:return Nt(t.type)&&ma(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _r(),qe(jt),qe(gt),ol(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return sl(t),null;case 13:if(qe(Ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));Lr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qe(Ge),null;case 4:return _r(),null;case 10:return Xo(t.type._context),null;case 22:case 23:return Ol(),null;case 24:return null;default:return null}}var Pa=!1,vt=!1,Eh=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Mr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Ye(e,t,s)}else r.current=null}function Cl(e,t,r){try{r()}catch(s){Ye(e,t,s)}}var Nu=!1;function Th(e,t){if(Oo=Zs,e=rc(),Do(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var i=s.anchorOffset,u=s.focusNode;s=s.focusOffset;try{r.nodeType,u.nodeType}catch{r=null;break e}var p=0,N=-1,T=-1,q=0,ee=0,se=e,Z=null;t:for(;;){for(var pe;se!==r||i!==0&&se.nodeType!==3||(N=p+i),se!==u||s!==0&&se.nodeType!==3||(T=p+s),se.nodeType===3&&(p+=se.nodeValue.length),(pe=se.firstChild)!==null;)Z=se,se=pe;for(;;){if(se===e)break t;if(Z===r&&++q===i&&(N=p),Z===u&&++ee===s&&(T=p),(pe=se.nextSibling)!==null)break;se=Z,Z=se.parentNode}se=pe}r=N===-1||T===-1?null:{start:N,end:T}}else r=null}r=r||{start:0,end:0}}else r=null;for($o={focusedElem:e,selectionRange:r},Zs=!1,ge=t;ge!==null;)if(t=ge,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ge=e;else for(;ge!==null;){t=ge;try{var xe=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(xe!==null){var ve=xe.memoizedProps,nt=xe.memoizedState,O=t.stateNode,P=O.getSnapshotBeforeUpdate(t.elementType===t.type?ve:tn(t.type,ve),nt);O.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var H=t.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(ie){Ye(t,t.return,ie)}if(e=t.sibling,e!==null){e.return=t.return,ge=e;break}ge=t.return}return xe=Nu,Nu=!1,xe}function Ns(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var u=i.destroy;i.destroy=void 0,u!==void 0&&Cl(t,r,u)}i=i.next}while(i!==s)}}function Ia(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Al(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Cu(e){var t=e.alternate;t!==null&&(e.alternate=null,Cu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[pn],delete t[fs],delete t[Bo],delete t[dh],delete t[mh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Au(e){return e.tag===5||e.tag===3||e.tag===4}function Eu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Au(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function El(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ua));else if(s!==4&&(e=e.child,e!==null))for(El(e,t,r),e=e.sibling;e!==null;)El(e,t,r),e=e.sibling}function Tl(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Tl(e,t,r),e=e.sibling;e!==null;)Tl(e,t,r),e=e.sibling}var mt=null,nn=!1;function Jn(e,t,r){for(r=r.child;r!==null;)Tu(e,t,r),r=r.sibling}function Tu(e,t,r){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Qs,r)}catch{}switch(r.tag){case 5:vt||Mr(r,t);case 6:var s=mt,i=nn;mt=null,Jn(e,t,r),mt=s,nn=i,mt!==null&&(nn?(e=mt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):mt.removeChild(r.stateNode));break;case 18:mt!==null&&(nn?(e=mt,r=r.stateNode,e.nodeType===8?Ho(e.parentNode,r):e.nodeType===1&&Ho(e,r),rs(e)):Ho(mt,r.stateNode));break;case 4:s=mt,i=nn,mt=r.stateNode.containerInfo,nn=!0,Jn(e,t,r),mt=s,nn=i;break;case 0:case 11:case 14:case 15:if(!vt&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var u=i,p=u.destroy;u=u.tag,p!==void 0&&((u&2)!==0||(u&4)!==0)&&Cl(r,t,p),i=i.next}while(i!==s)}Jn(e,t,r);break;case 1:if(!vt&&(Mr(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(N){Ye(r,t,N)}Jn(e,t,r);break;case 21:Jn(e,t,r);break;case 22:r.mode&1?(vt=(s=vt)||r.memoizedState!==null,Jn(e,t,r),vt=s):Jn(e,t,r);break;default:Jn(e,t,r)}}function Du(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Eh),t.forEach(function(s){var i=Oh.bind(null,e,s);r.has(s)||(r.add(s),s.then(i,i))})}}function rn(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var i=r[s];try{var u=e,p=t,N=p;e:for(;N!==null;){switch(N.tag){case 5:mt=N.stateNode,nn=!1;break e;case 3:mt=N.stateNode.containerInfo,nn=!0;break e;case 4:mt=N.stateNode.containerInfo,nn=!0;break e}N=N.return}if(mt===null)throw Error(a(160));Tu(u,p,i),mt=null,nn=!1;var T=i.alternate;T!==null&&(T.return=null),i.return=null}catch(q){Ye(i,t,q)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Lu(t,e),t=t.sibling}function Lu(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(rn(t,e),xn(e),s&4){try{Ns(3,e,e.return),Ia(3,e)}catch(ve){Ye(e,e.return,ve)}try{Ns(5,e,e.return)}catch(ve){Ye(e,e.return,ve)}}break;case 1:rn(t,e),xn(e),s&512&&r!==null&&Mr(r,r.return);break;case 5:if(rn(t,e),xn(e),s&512&&r!==null&&Mr(r,r.return),e.flags&32){var i=e.stateNode;try{Lt(i,"")}catch(ve){Ye(e,e.return,ve)}}if(s&4&&(i=e.stateNode,i!=null)){var u=e.memoizedProps,p=r!==null?r.memoizedProps:u,N=e.type,T=e.updateQueue;if(e.updateQueue=null,T!==null)try{N==="input"&&u.type==="radio"&&u.name!=null&&ft(i,u),Ut(N,p);var q=Ut(N,u);for(p=0;p<T.length;p+=2){var ee=T[p],se=T[p+1];ee==="style"?kt(i,se):ee==="dangerouslySetInnerHTML"?pt(i,se):ee==="children"?Lt(i,se):ne(i,ee,se,q)}switch(N){case"input":Mt(i,u);break;case"textarea":re(i,u);break;case"select":var Z=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!u.multiple;var pe=u.value;pe!=null?De(i,!!u.multiple,pe,!1):Z!==!!u.multiple&&(u.defaultValue!=null?De(i,!!u.multiple,u.defaultValue,!0):De(i,!!u.multiple,u.multiple?[]:"",!1))}i[fs]=u}catch(ve){Ye(e,e.return,ve)}}break;case 6:if(rn(t,e),xn(e),s&4){if(e.stateNode===null)throw Error(a(162));i=e.stateNode,u=e.memoizedProps;try{i.nodeValue=u}catch(ve){Ye(e,e.return,ve)}}break;case 3:if(rn(t,e),xn(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{rs(t.containerInfo)}catch(ve){Ye(e,e.return,ve)}break;case 4:rn(t,e),xn(e);break;case 13:rn(t,e),xn(e),i=e.child,i.flags&8192&&(u=i.memoizedState!==null,i.stateNode.isHidden=u,!u||i.alternate!==null&&i.alternate.memoizedState!==null||(Pl=tt())),s&4&&Du(e);break;case 22:if(ee=r!==null&&r.memoizedState!==null,e.mode&1?(vt=(q=vt)||ee,rn(t,e),vt=q):rn(t,e),xn(e),s&8192){if(q=e.memoizedState!==null,(e.stateNode.isHidden=q)&&!ee&&(e.mode&1)!==0)for(ge=e,ee=e.child;ee!==null;){for(se=ge=ee;ge!==null;){switch(Z=ge,pe=Z.child,Z.tag){case 0:case 11:case 14:case 15:Ns(4,Z,Z.return);break;case 1:Mr(Z,Z.return);var xe=Z.stateNode;if(typeof xe.componentWillUnmount=="function"){s=Z,r=Z.return;try{t=s,xe.props=t.memoizedProps,xe.state=t.memoizedState,xe.componentWillUnmount()}catch(ve){Ye(s,r,ve)}}break;case 5:Mr(Z,Z.return);break;case 22:if(Z.memoizedState!==null){Ru(se);continue}}pe!==null?(pe.return=Z,ge=pe):Ru(se)}ee=ee.sibling}e:for(ee=null,se=e;;){if(se.tag===5){if(ee===null){ee=se;try{i=se.stateNode,q?(u=i.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(N=se.stateNode,T=se.memoizedProps.style,p=T!=null&&T.hasOwnProperty("display")?T.display:null,N.style.display=Mn("display",p))}catch(ve){Ye(e,e.return,ve)}}}else if(se.tag===6){if(ee===null)try{se.stateNode.nodeValue=q?"":se.memoizedProps}catch(ve){Ye(e,e.return,ve)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===e)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===e)break e;for(;se.sibling===null;){if(se.return===null||se.return===e)break e;ee===se&&(ee=null),se=se.return}ee===se&&(ee=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:rn(t,e),xn(e),s&4&&Du(e);break;case 21:break;default:rn(t,e),xn(e)}}function xn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Au(r)){var s=r;break e}r=r.return}throw Error(a(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(Lt(i,""),s.flags&=-33);var u=Eu(e);Tl(e,u,i);break;case 3:case 4:var p=s.stateNode.containerInfo,N=Eu(e);El(e,N,p);break;default:throw Error(a(161))}}catch(T){Ye(e,e.return,T)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Dh(e,t,r){ge=e,Pu(e)}function Pu(e,t,r){for(var s=(e.mode&1)!==0;ge!==null;){var i=ge,u=i.child;if(i.tag===22&&s){var p=i.memoizedState!==null||Pa;if(!p){var N=i.alternate,T=N!==null&&N.memoizedState!==null||vt;N=Pa;var q=vt;if(Pa=p,(vt=T)&&!q)for(ge=i;ge!==null;)p=ge,T=p.child,p.tag===22&&p.memoizedState!==null?_u(i):T!==null?(T.return=p,ge=T):_u(i);for(;u!==null;)ge=u,Pu(u),u=u.sibling;ge=i,Pa=N,vt=q}Iu(e)}else(i.subtreeFlags&8772)!==0&&u!==null?(u.return=i,ge=u):Iu(e)}}function Iu(e){for(;ge!==null;){var t=ge;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:vt||Ia(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!vt)if(r===null)s.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:tn(t.type,r.memoizedProps);s.componentDidUpdate(i,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&Rc(t,u,s);break;case 3:var p=t.updateQueue;if(p!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Rc(t,p,r)}break;case 5:var N=t.stateNode;if(r===null&&t.flags&4){r=N;var T=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":T.autoFocus&&r.focus();break;case"img":T.src&&(r.src=T.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var q=t.alternate;if(q!==null){var ee=q.memoizedState;if(ee!==null){var se=ee.dehydrated;se!==null&&rs(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}vt||t.flags&512&&Al(t)}catch(Z){Ye(t,t.return,Z)}}if(t===e){ge=null;break}if(r=t.sibling,r!==null){r.return=t.return,ge=r;break}ge=t.return}}function Ru(e){for(;ge!==null;){var t=ge;if(t===e){ge=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ge=r;break}ge=t.return}}function _u(e){for(;ge!==null;){var t=ge;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ia(4,t)}catch(T){Ye(t,r,T)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(T){Ye(t,i,T)}}var u=t.return;try{Al(t)}catch(T){Ye(t,u,T)}break;case 5:var p=t.return;try{Al(t)}catch(T){Ye(t,p,T)}}}catch(T){Ye(t,t.return,T)}if(t===e){ge=null;break}var N=t.sibling;if(N!==null){N.return=t.return,ge=N;break}ge=t.return}}var Lh=Math.ceil,Ra=me.ReactCurrentDispatcher,Dl=me.ReactCurrentOwner,Vt=me.ReactCurrentBatchConfig,Me=0,ct=null,rt=null,ht=0,Ft=0,Or=Vn(0),ot=0,Cs=null,hr=0,_a=0,Ll=0,As=null,At=null,Pl=0,$r=1/0,Dn=null,Fa=!1,Il=null,Yn=null,Ma=!1,Zn=null,Oa=0,Es=0,Rl=null,$a=-1,Ua=0;function bt(){return(Me&6)!==0?tt():$a!==-1?$a:$a=tt()}function Xn(e){return(e.mode&1)===0?1:(Me&2)!==0&&ht!==0?ht&-ht:fh.transition!==null?(Ua===0&&(Ua=Ei()),Ua):(e=Ue,e!==0||(e=window.event,e=e===void 0?16:Mi(e.type)),e)}function sn(e,t,r,s){if(50<Es)throw Es=0,Rl=null,Error(a(185));Zr(e,r,s),((Me&2)===0||e!==ct)&&(e===ct&&((Me&2)===0&&(_a|=r),ot===4&&er(e,ht)),Et(e,s),r===1&&Me===0&&(t.mode&1)===0&&($r=tt()+500,fa&&Wn()))}function Et(e,t){var r=e.callbackNode;fm(e,t);var s=Ks(e,e===ct?ht:0);if(s===0)r!==null&&Ni(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&Ni(r),t===1)e.tag===0?hh(Mu.bind(null,e)):Sc(Mu.bind(null,e)),ch(function(){(Me&6)===0&&Wn()}),r=null;else{switch(Ti(s)){case 1:r=ho;break;case 4:r=Ci;break;case 16:r=Vs;break;case 536870912:r=Ai;break;default:r=Vs}r=Vu(r,Fu.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Fu(e,t){if($a=-1,Ua=0,(Me&6)!==0)throw Error(a(327));var r=e.callbackNode;if(Ur()&&e.callbackNode!==r)return null;var s=Ks(e,e===ct?ht:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=za(e,s);else{t=s;var i=Me;Me|=2;var u=$u();(ct!==e||ht!==t)&&(Dn=null,$r=tt()+500,pr(e,t));do try{Rh();break}catch(N){Ou(e,N)}while(!0);Zo(),Ra.current=u,Me=i,rt!==null?t=0:(ct=null,ht=0,t=ot)}if(t!==0){if(t===2&&(i=fo(e),i!==0&&(s=i,t=_l(e,i))),t===1)throw r=Cs,pr(e,0),er(e,s),Et(e,tt()),r;if(t===6)er(e,s);else{if(i=e.current.alternate,(s&30)===0&&!Ph(i)&&(t=za(e,s),t===2&&(u=fo(e),u!==0&&(s=u,t=_l(e,u))),t===1))throw r=Cs,pr(e,0),er(e,s),Et(e,tt()),r;switch(e.finishedWork=i,e.finishedLanes=s,t){case 0:case 1:throw Error(a(345));case 2:gr(e,At,Dn);break;case 3:if(er(e,s),(s&130023424)===s&&(t=Pl+500-tt(),10<t)){if(Ks(e,0)!==0)break;if(i=e.suspendedLanes,(i&s)!==s){bt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=zo(gr.bind(null,e,At,Dn),t);break}gr(e,At,Dn);break;case 4:if(er(e,s),(s&4194240)===s)break;for(t=e.eventTimes,i=-1;0<s;){var p=31-Zt(s);u=1<<p,p=t[p],p>i&&(i=p),s&=~u}if(s=i,s=tt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Lh(s/1960))-s,10<s){e.timeoutHandle=zo(gr.bind(null,e,At,Dn),s);break}gr(e,At,Dn);break;case 5:gr(e,At,Dn);break;default:throw Error(a(329))}}}return Et(e,tt()),e.callbackNode===r?Fu.bind(null,e):null}function _l(e,t){var r=As;return e.current.memoizedState.isDehydrated&&(pr(e,t).flags|=256),e=za(e,t),e!==2&&(t=At,At=r,t!==null&&Fl(t)),e}function Fl(e){At===null?At=e:At.push.apply(At,e)}function Ph(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var i=r[s],u=i.getSnapshot;i=i.value;try{if(!Xt(u(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function er(e,t){for(t&=~Ll,t&=~_a,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Zt(t),s=1<<r;e[r]=-1,t&=~s}}function Mu(e){if((Me&6)!==0)throw Error(a(327));Ur();var t=Ks(e,0);if((t&1)===0)return Et(e,tt()),null;var r=za(e,t);if(e.tag!==0&&r===2){var s=fo(e);s!==0&&(t=s,r=_l(e,s))}if(r===1)throw r=Cs,pr(e,0),er(e,t),Et(e,tt()),r;if(r===6)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gr(e,At,Dn),Et(e,tt()),null}function Ml(e,t){var r=Me;Me|=1;try{return e(t)}finally{Me=r,Me===0&&($r=tt()+500,fa&&Wn())}}function fr(e){Zn!==null&&Zn.tag===0&&(Me&6)===0&&Ur();var t=Me;Me|=1;var r=Vt.transition,s=Ue;try{if(Vt.transition=null,Ue=1,e)return e()}finally{Ue=s,Vt.transition=r,Me=t,(Me&6)===0&&Wn()}}function Ol(){Ft=Or.current,qe(Or)}function pr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,ih(r)),rt!==null)for(r=rt.return;r!==null;){var s=r;switch(Wo(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ma();break;case 3:_r(),qe(jt),qe(gt),ol();break;case 5:sl(s);break;case 4:_r();break;case 13:qe(Ge);break;case 19:qe(Ge);break;case 10:Xo(s.type._context);break;case 22:case 23:Ol()}r=r.return}if(ct=e,rt=e=tr(e.current,null),ht=Ft=t,ot=0,Cs=null,Ll=_a=hr=0,At=As=null,ur!==null){for(t=0;t<ur.length;t++)if(r=ur[t],s=r.interleaved,s!==null){r.interleaved=null;var i=s.next,u=r.pending;if(u!==null){var p=u.next;u.next=i,s.next=p}r.pending=s}ur=null}return e}function Ou(e,t){do{var r=rt;try{if(Zo(),ja.current=Ea,Na){for(var s=Ke.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Na=!1}if(mr=0,it=at=Ke=null,ws=!1,bs=0,Dl.current=null,r===null||r.return===null){ot=1,Cs=t,rt=null;break}e:{var u=e,p=r.return,N=r,T=t;if(t=ht,N.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var q=T,ee=N,se=ee.tag;if((ee.mode&1)===0&&(se===0||se===11||se===15)){var Z=ee.alternate;Z?(ee.updateQueue=Z.updateQueue,ee.memoizedState=Z.memoizedState,ee.lanes=Z.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var pe=cu(p);if(pe!==null){pe.flags&=-257,uu(pe,p,N,u,t),pe.mode&1&&iu(u,q,t),t=pe,T=q;var xe=t.updateQueue;if(xe===null){var ve=new Set;ve.add(T),t.updateQueue=ve}else xe.add(T);break e}else{if((t&1)===0){iu(u,q,t),$l();break e}T=Error(a(426))}}else if(Qe&&N.mode&1){var nt=cu(p);if(nt!==null){(nt.flags&65536)===0&&(nt.flags|=256),uu(nt,p,N,u,t),Jo(Fr(T,N));break e}}u=T=Fr(T,N),ot!==4&&(ot=2),As===null?As=[u]:As.push(u),u=p;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var O=ou(u,T,t);Ic(u,O);break e;case 1:N=T;var P=u.type,H=u.stateNode;if((u.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Yn===null||!Yn.has(H)))){u.flags|=65536,t&=-t,u.lanes|=t;var ie=lu(u,N,t);Ic(u,ie);break e}}u=u.return}while(u!==null)}zu(r)}catch(we){t=we,rt===r&&r!==null&&(rt=r=r.return);continue}break}while(!0)}function $u(){var e=Ra.current;return Ra.current=Ea,e===null?Ea:e}function $l(){(ot===0||ot===3||ot===2)&&(ot=4),ct===null||(hr&268435455)===0&&(_a&268435455)===0||er(ct,ht)}function za(e,t){var r=Me;Me|=2;var s=$u();(ct!==e||ht!==t)&&(Dn=null,pr(e,t));do try{Ih();break}catch(i){Ou(e,i)}while(!0);if(Zo(),Me=r,Ra.current=s,rt!==null)throw Error(a(261));return ct=null,ht=0,ot}function Ih(){for(;rt!==null;)Uu(rt)}function Rh(){for(;rt!==null&&!am();)Uu(rt)}function Uu(e){var t=qu(e.alternate,e,Ft);e.memoizedProps=e.pendingProps,t===null?zu(e):rt=t,Dl.current=null}function zu(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=Ch(r,t,Ft),r!==null){rt=r;return}}else{if(r=Ah(r,t),r!==null){r.flags&=32767,rt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ot=6,rt=null;return}}if(t=t.sibling,t!==null){rt=t;return}rt=t=e}while(t!==null);ot===0&&(ot=5)}function gr(e,t,r){var s=Ue,i=Vt.transition;try{Vt.transition=null,Ue=1,_h(e,t,r,s)}finally{Vt.transition=i,Ue=s}return null}function _h(e,t,r,s){do Ur();while(Zn!==null);if((Me&6)!==0)throw Error(a(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var u=r.lanes|r.childLanes;if(pm(e,u),e===ct&&(rt=ct=null,ht=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||Ma||(Ma=!0,Vu(Vs,function(){return Ur(),null})),u=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||u){u=Vt.transition,Vt.transition=null;var p=Ue;Ue=1;var N=Me;Me|=4,Dl.current=null,Th(e,r),Lu(r,e),th($o),Zs=!!Oo,$o=Oo=null,e.current=r,Dh(r),om(),Me=N,Ue=p,Vt.transition=u}else e.current=r;if(Ma&&(Ma=!1,Zn=e,Oa=i),u=e.pendingLanes,u===0&&(Yn=null),cm(r.stateNode),Et(e,tt()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],s(i.value,{componentStack:i.stack,digest:i.digest});if(Fa)throw Fa=!1,e=Il,Il=null,e;return(Oa&1)!==0&&e.tag!==0&&Ur(),u=e.pendingLanes,(u&1)!==0?e===Rl?Es++:(Es=0,Rl=e):Es=0,Wn(),null}function Ur(){if(Zn!==null){var e=Ti(Oa),t=Vt.transition,r=Ue;try{if(Vt.transition=null,Ue=16>e?16:e,Zn===null)var s=!1;else{if(e=Zn,Zn=null,Oa=0,(Me&6)!==0)throw Error(a(331));var i=Me;for(Me|=4,ge=e.current;ge!==null;){var u=ge,p=u.child;if((ge.flags&16)!==0){var N=u.deletions;if(N!==null){for(var T=0;T<N.length;T++){var q=N[T];for(ge=q;ge!==null;){var ee=ge;switch(ee.tag){case 0:case 11:case 15:Ns(8,ee,u)}var se=ee.child;if(se!==null)se.return=ee,ge=se;else for(;ge!==null;){ee=ge;var Z=ee.sibling,pe=ee.return;if(Cu(ee),ee===q){ge=null;break}if(Z!==null){Z.return=pe,ge=Z;break}ge=pe}}}var xe=u.alternate;if(xe!==null){var ve=xe.child;if(ve!==null){xe.child=null;do{var nt=ve.sibling;ve.sibling=null,ve=nt}while(ve!==null)}}ge=u}}if((u.subtreeFlags&2064)!==0&&p!==null)p.return=u,ge=p;else e:for(;ge!==null;){if(u=ge,(u.flags&2048)!==0)switch(u.tag){case 0:case 11:case 15:Ns(9,u,u.return)}var O=u.sibling;if(O!==null){O.return=u.return,ge=O;break e}ge=u.return}}var P=e.current;for(ge=P;ge!==null;){p=ge;var H=p.child;if((p.subtreeFlags&2064)!==0&&H!==null)H.return=p,ge=H;else e:for(p=P;ge!==null;){if(N=ge,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:Ia(9,N)}}catch(we){Ye(N,N.return,we)}if(N===p){ge=null;break e}var ie=N.sibling;if(ie!==null){ie.return=N.return,ge=ie;break e}ge=N.return}}if(Me=i,Wn(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Qs,e)}catch{}s=!0}return s}finally{Ue=r,Vt.transition=t}}return!1}function Hu(e,t,r){t=Fr(r,t),t=ou(e,t,1),e=Kn(e,t,1),t=bt(),e!==null&&(Zr(e,1,t),Et(e,t))}function Ye(e,t,r){if(e.tag===3)Hu(e,e,r);else for(;t!==null;){if(t.tag===3){Hu(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Yn===null||!Yn.has(s))){e=Fr(r,e),e=lu(t,e,1),t=Kn(t,e,1),e=bt(),t!==null&&(Zr(t,1,e),Et(t,e));break}}t=t.return}}function Fh(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=bt(),e.pingedLanes|=e.suspendedLanes&r,ct===e&&(ht&r)===r&&(ot===4||ot===3&&(ht&130023424)===ht&&500>tt()-Pl?pr(e,0):Ll|=r),Et(e,t)}function Bu(e,t){t===0&&((e.mode&1)===0?t=1:(t=Gs,Gs<<=1,(Gs&130023424)===0&&(Gs=4194304)));var r=bt();e=An(e,t),e!==null&&(Zr(e,t,r),Et(e,r))}function Mh(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Bu(e,r)}function Oh(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(a(314))}s!==null&&s.delete(t),Bu(e,r)}var qu;qu=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||jt.current)Ct=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Ct=!1,Nh(e,t,r);Ct=(e.flags&131072)!==0}else Ct=!1,Qe&&(t.flags&1048576)!==0&&kc(t,ga,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;La(e,t),e=t.pendingProps;var i=Er(t,gt.current);Rr(t,r),i=cl(null,t,s,e,i,r);var u=ul();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nt(s)?(u=!0,ha(t)):u=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,nl(t),i.updater=Ta,t.stateNode=i,i._reactInternals=t,gl(t,s,e,r),t=wl(null,t,s,!0,u,r)):(t.tag=0,Qe&&u&&Qo(t),wt(null,t,i,r),t=t.child),t;case 16:s=t.elementType;e:{switch(La(e,t),e=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=Uh(s),e=tn(s,e),i){case 0:t=vl(null,t,s,e,r);break e;case 1:t=gu(null,t,s,e,r);break e;case 11:t=du(null,t,s,e,r);break e;case 14:t=mu(null,t,s,tn(s.type,e),r);break e}throw Error(a(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:tn(s,i),vl(e,t,s,i,r);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:tn(s,i),gu(e,t,s,i,r);case 3:e:{if(yu(t),e===null)throw Error(a(387));s=t.pendingProps,u=t.memoizedState,i=u.element,Pc(e,t),Sa(t,s,null,r);var p=t.memoizedState;if(s=p.element,u.isDehydrated)if(u={element:s,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){i=Fr(Error(a(423)),t),t=xu(e,t,s,r,i);break e}else if(s!==i){i=Fr(Error(a(424)),t),t=xu(e,t,s,r,i);break e}else for(_t=qn(t.stateNode.containerInfo.firstChild),Rt=t,Qe=!0,en=null,r=Dc(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Lr(),s===i){t=Tn(e,t,r);break e}wt(e,t,s,r)}t=t.child}return t;case 5:return _c(t),e===null&&Ko(t),s=t.type,i=t.pendingProps,u=e!==null?e.memoizedProps:null,p=i.children,Uo(s,i)?p=null:u!==null&&Uo(s,u)&&(t.flags|=32),pu(e,t),wt(e,t,p,r),t.child;case 6:return e===null&&Ko(t),null;case 13:return vu(e,t,r);case 4:return rl(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Pr(t,null,s,r):wt(e,t,s,r),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:tn(s,i),du(e,t,s,i,r);case 7:return wt(e,t,t.pendingProps,r),t.child;case 8:return wt(e,t,t.pendingProps.children,r),t.child;case 12:return wt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,i=t.pendingProps,u=t.memoizedProps,p=i.value,He(va,s._currentValue),s._currentValue=p,u!==null)if(Xt(u.value,p)){if(u.children===i.children&&!jt.current){t=Tn(e,t,r);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var N=u.dependencies;if(N!==null){p=u.child;for(var T=N.firstContext;T!==null;){if(T.context===s){if(u.tag===1){T=En(-1,r&-r),T.tag=2;var q=u.updateQueue;if(q!==null){q=q.shared;var ee=q.pending;ee===null?T.next=T:(T.next=ee.next,ee.next=T),q.pending=T}}u.lanes|=r,T=u.alternate,T!==null&&(T.lanes|=r),el(u.return,r,t),N.lanes|=r;break}T=T.next}}else if(u.tag===10)p=u.type===t.type?null:u.child;else if(u.tag===18){if(p=u.return,p===null)throw Error(a(341));p.lanes|=r,N=p.alternate,N!==null&&(N.lanes|=r),el(p,r,t),p=u.sibling}else p=u.child;if(p!==null)p.return=u;else for(p=u;p!==null;){if(p===t){p=null;break}if(u=p.sibling,u!==null){u.return=p.return,p=u;break}p=p.return}u=p}wt(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,Rr(t,r),i=Bt(i),s=s(i),t.flags|=1,wt(e,t,s,r),t.child;case 14:return s=t.type,i=tn(s,t.pendingProps),i=tn(s.type,i),mu(e,t,s,i,r);case 15:return hu(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:tn(s,i),La(e,t),t.tag=1,Nt(s)?(e=!0,ha(t)):e=!1,Rr(t,r),su(t,s,i),gl(t,s,i,r),wl(null,t,s,!0,e,r);case 19:return bu(e,t,r);case 22:return fu(e,t,r)}throw Error(a(156,t.tag))};function Vu(e,t){return ji(e,t)}function $h(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(e,t,r,s){return new $h(e,t,r,s)}function Ul(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Uh(e){if(typeof e=="function")return Ul(e)?1:0;if(e!=null){if(e=e.$$typeof,e===K)return 11;if(e===be)return 14}return 2}function tr(e,t){var r=e.alternate;return r===null?(r=Qt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ha(e,t,r,s,i,u){var p=2;if(s=e,typeof e=="function")Ul(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case I:return yr(r.children,i,u,t);case C:p=8,i|=8;break;case k:return e=Qt(12,r,t,i|2),e.elementType=k,e.lanes=u,e;case J:return e=Qt(13,r,t,i),e.elementType=J,e.lanes=u,e;case le:return e=Qt(19,r,t,i),e.elementType=le,e.lanes=u,e;case f:return Ba(r,i,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case R:p=10;break e;case B:p=9;break e;case K:p=11;break e;case be:p=14;break e;case G:p=16,s=null;break e}throw Error(a(130,e==null?e:typeof e,""))}return t=Qt(p,r,t,i),t.elementType=e,t.type=s,t.lanes=u,t}function yr(e,t,r,s){return e=Qt(7,e,s,t),e.lanes=r,e}function Ba(e,t,r,s){return e=Qt(22,e,s,t),e.elementType=f,e.lanes=r,e.stateNode={isHidden:!1},e}function zl(e,t,r){return e=Qt(6,e,null,t),e.lanes=r,e}function Hl(e,t,r){return t=Qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zh(e,t,r,s,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=po(0),this.expirationTimes=po(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=po(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bl(e,t,r,s,i,u,p,N,T){return e=new zh(e,t,r,N,T),t===1?(t=1,u===!0&&(t|=8)):t=0,u=Qt(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},nl(u),e}function Hh(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Qu(e){if(!e)return Qn;e=e._reactInternals;e:{if(ar(e)!==e||e.tag!==1)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(a(171))}if(e.tag===1){var r=e.type;if(Nt(r))return wc(e,r,t)}return t}function Wu(e,t,r,s,i,u,p,N,T){return e=Bl(r,s,!0,e,i,u,p,N,T),e.context=Qu(null),r=e.current,s=bt(),i=Xn(r),u=En(s,i),u.callback=t??null,Kn(r,u,i),e.current.lanes=i,Zr(e,i,s),Et(e,s),e}function qa(e,t,r,s){var i=t.current,u=bt(),p=Xn(i);return r=Qu(r),t.context===null?t.context=r:t.pendingContext=r,t=En(u,p),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Kn(i,t,p),e!==null&&(sn(e,i,p,u),ba(e,i,p)),p}function Va(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ql(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}function Bh(){return null}var Ku=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vl(e){this._internalRoot=e}Qa.prototype.render=Vl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(a(409));qa(e,t,null,null)},Qa.prototype.unmount=Vl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fr(function(){qa(null,e,null,null)}),t[kn]=null}};function Qa(e){this._internalRoot=e}Qa.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pi();e={blockedOn:null,target:e,priority:t};for(var r=0;r<zn.length&&t!==0&&t<zn[r].priority;r++);zn.splice(r,0,e),r===0&&_i(e)}};function Ql(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ju(){}function qh(e,t,r,s,i){if(i){if(typeof s=="function"){var u=s;s=function(){var q=Va(p);u.call(q)}}var p=Wu(t,s,e,0,null,!1,!1,"",Ju);return e._reactRootContainer=p,e[kn]=p.current,ms(e.nodeType===8?e.parentNode:e),fr(),p}for(;i=e.lastChild;)e.removeChild(i);if(typeof s=="function"){var N=s;s=function(){var q=Va(T);N.call(q)}}var T=Bl(e,0,!1,null,null,!1,!1,"",Ju);return e._reactRootContainer=T,e[kn]=T.current,ms(e.nodeType===8?e.parentNode:e),fr(function(){qa(t,T,r,s)}),T}function Ga(e,t,r,s,i){var u=r._reactRootContainer;if(u){var p=u;if(typeof i=="function"){var N=i;i=function(){var T=Va(p);N.call(T)}}qa(t,p,e,i)}else p=qh(r,t,e,i,s);return Va(p)}Di=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Yr(t.pendingLanes);r!==0&&(go(t,r|1),Et(t,tt()),(Me&6)===0&&($r=tt()+500,Wn()))}break;case 13:fr(function(){var s=An(e,1);if(s!==null){var i=bt();sn(s,e,1,i)}}),ql(e,1)}},yo=function(e){if(e.tag===13){var t=An(e,134217728);if(t!==null){var r=bt();sn(t,e,134217728,r)}ql(e,134217728)}},Li=function(e){if(e.tag===13){var t=Xn(e),r=An(e,t);if(r!==null){var s=bt();sn(r,e,t,s)}ql(e,t)}},Pi=function(){return Ue},Ii=function(e,t){var r=Ue;try{return Ue=e,t()}finally{Ue=r}},V=function(e,t,r){switch(t){case"input":if(Mt(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var i=da(s);if(!i)throw Error(a(90));Sn(s),Mt(s,i)}}}break;case"textarea":re(e,r);break;case"select":t=r.value,t!=null&&De(e,!!r.multiple,t,!1)}},Ee=Ml,ze=fr;var Vh={usingClientEntryPoint:!1,Events:[ps,Cr,da,de,Pe,Ml]},Ts={findFiberByHostInstance:or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qh={bundleType:Ts.bundleType,version:Ts.version,rendererPackageName:Ts.rendererPackageName,rendererConfig:Ts.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:me.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Si(e),e===null?null:e.stateNode},findFiberByHostInstance:Ts.findFiberByHostInstance||Bh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ka.isDisabled&&Ka.supportsFiber)try{Qs=Ka.inject(Qh),fn=Ka}catch{}}return Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vh,Tt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ql(t))throw Error(a(200));return Hh(e,t,null,r)},Tt.createRoot=function(e,t){if(!Ql(e))throw Error(a(299));var r=!1,s="",i=Ku;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Bl(e,1,!1,null,null,r,!1,s,i),e[kn]=t.current,ms(e.nodeType===8?e.parentNode:e),new Vl(t)},Tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=Si(t),e=e===null?null:e.stateNode,e},Tt.flushSync=function(e){return fr(e)},Tt.hydrate=function(e,t,r){if(!Wa(t))throw Error(a(200));return Ga(null,e,t,!0,r)},Tt.hydrateRoot=function(e,t,r){if(!Ql(e))throw Error(a(405));var s=r!=null&&r.hydratedSources||null,i=!1,u="",p=Ku;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(p=r.onRecoverableError)),t=Wu(t,null,e,1,r??null,i,!1,u,p),e[kn]=t.current,ms(e),s)for(e=0;e<s.length;e++)r=s[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Qa(t)},Tt.render=function(e,t,r){if(!Wa(t))throw Error(a(200));return Ga(null,e,t,!1,r)},Tt.unmountComponentAtNode=function(e){if(!Wa(e))throw Error(a(40));return e._reactRootContainer?(fr(function(){Ga(null,null,e,!1,function(){e._reactRootContainer=null,e[kn]=null})}),!0):!1},Tt.unstable_batchedUpdates=Ml,Tt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Wa(r))throw Error(a(200));if(e==null||e._reactInternals===void 0)throw Error(a(38));return Ga(e,t,r,!1,s)},Tt.version="18.3.1-next-f1338f8080-20240426",Tt}var sd;function tf(){if(sd)return Kl.exports;sd=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(o){console.error(o)}}return l(),Kl.exports=ef(),Kl.exports}var ad;function nf(){if(ad)return Ja;ad=1;var l=tf();return Ja.createRoot=l.createRoot,Ja.hydrateRoot=l.hydrateRoot,Ja}var rf=nf();const sf="modulepreload",af=function(l){return"/"+l},od={},Ln=function(o,a,c){let d=Promise.resolve();if(a&&a.length>0){let x=function(j){return Promise.all(j.map(L=>Promise.resolve(L).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};var v=x;document.getElementsByTagName("link");const S=document.querySelector("meta[property=csp-nonce]"),y=S?.nonce||S?.getAttribute("nonce");d=x(a.map(j=>{if(j=af(j),j in od)return;od[j]=!0;const L=j.endsWith(".css"),_=L?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${j}"]${_}`))return;const F=document.createElement("link");if(F.rel=L?"stylesheet":sf,L||(F.as="script"),F.crossOrigin="",F.href=j,y&&F.setAttribute("nonce",y),document.head.appendChild(F),L)return new Promise((E,$)=>{F.addEventListener("load",E),F.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${j}`)))})}))}function m(S){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=S,window.dispatchEvent(y),!y.defaultPrevented)throw S}return d.then(S=>{for(const y of S||[])y.status==="rejected"&&m(y.reason);return o().catch(m)})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var of={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Re=(l,o)=>{const a=w.forwardRef(({color:c="currentColor",size:d=24,strokeWidth:m=2,absoluteStrokeWidth:v,className:S="",children:y,...x},j)=>w.createElement("svg",{ref:j,...of,width:d,height:d,stroke:c,strokeWidth:v?Number(m)*24/Number(d):m,className:["lucide",`lucide-${lf(l)}`,S].join(" "),...x},[...o.map(([L,_])=>w.createElement(L,_)),...Array.isArray(y)?y:[y]]));return a.displayName=`${l}`,a};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=Re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=Re("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=Re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=Re("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=Re("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=Re("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=Re("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=Re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=Re("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=Re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=Re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=Re("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=Re("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=Re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Re("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=Re("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=Re("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=Re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=Re("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=Re("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=Re("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=Re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=Re("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=Re("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=Re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=Re("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=Re("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=Re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=Re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=Re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=Re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=Re("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=Re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=Re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=Re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=Re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=Re("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=Re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=Re("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),an="http://localhost:5000/api";class wf{config={clientId:"8d042e34-5a5f-40f5-a019-ee56de49b64e",tenantId:"c16b04b5-b78c-4cce-b3f8-93686f221d09",redirectUri:"http://localhost:5173/auth/callback",scopes:["openid","profile","email","User.Read"]};constructor(){this.config.clientId||console.error("[AuthService] Azure Client ID is not configured"),this.config.tenantId||console.error("[AuthService] Azure Tenant ID is not configured"),console.log("[AuthService] Configuration loaded:",{clientId:this.config.clientId?"Configured":"Missing",tenantId:this.config.tenantId?"Configured":"Missing",redirectUri:this.config.redirectUri})}async initializeMSAL(){try{if(typeof window<"u"&&!window.msalInstance){console.log("[AuthService] Initializing MSAL with config:",{clientId:this.config.clientId,tenantId:this.config.tenantId,redirectUri:this.config.redirectUri}),console.log("[AuthService] Importing @azure/msal-browser...");const{PublicClientApplication:o}=await Ln(async()=>{const{PublicClientApplication:a}=await import("./index-CIVusHlu.js");return{PublicClientApplication:a}},[]);console.log("[AuthService] MSAL imported successfully"),console.log("[AuthService] Creating MSAL instance..."),window.msalInstance=new o({auth:{clientId:this.config.clientId,authority:`https://login.microsoftonline.com/${this.config.tenantId}`,redirectUri:this.config.redirectUri},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}}),console.log("[AuthService] MSAL instance created"),console.log("[AuthService] Initializing MSAL instance..."),await window.msalInstance.initialize(),console.log("[AuthService] MSAL instance initialized successfully")}else console.log("[AuthService] MSAL instance already exists");return window.msalInstance}catch(o){throw console.error("[AuthService] Error initializing MSAL:",o),new Error(`Failed to initialize Microsoft Authentication: ${o instanceof Error?o.message:"Unknown error"}`)}}async testMSALConfiguration(){try{console.log("[AuthService] Testing MSAL configuration...");const o=await this.initializeMSAL();return console.log("[AuthService] MSAL configuration test successful"),!0}catch(o){return console.error("[AuthService] MSAL configuration test failed:",o),!1}}async clearActiveInteractions(o){try{console.log("[AuthService] Clearing active interactions..."),await o.clearCache(),o.browserStorage&&await o.browserStorage.clear();const a=[];for(let c=0;c<localStorage.length;c++){const d=localStorage.key(c);d&&d.includes("msal")&&a.push(d)}a.forEach(c=>localStorage.removeItem(c)),console.log("[AuthService] Active interactions cleared")}catch(a){console.warn("[AuthService] Warning clearing interactions:",a)}}resetMSALInstance(){try{console.log("[AuthService] Resetting MSAL instance..."),window.msalInstance&&delete window.msalInstance,console.log("[AuthService] MSAL instance reset")}catch(o){console.warn("[AuthService] Warning resetting MSAL instance:",o)}}async login(){try{if(console.log("[AuthService] Starting Microsoft login..."),console.log("[AuthService] Config:",this.config),!this.config.clientId||this.config.clientId==="your_azure_client_id_here")throw new Error("Azure Client ID not configured. Please set VITE_REACT_APP_AZURE_CLIENT_ID in your environment variables.");if(!this.config.tenantId||this.config.tenantId==="your_azure_tenant_id_here")throw new Error("Azure Tenant ID not configured. Please set VITE_REACT_APP_AZURE_TENANT_ID in your environment variables.");const o=await this.initializeMSAL();console.log("[AuthService] MSAL instance ready, starting login popup..."),await this.clearActiveInteractions(o);const a={scopes:this.config.scopes,prompt:"select_account"};console.log("[AuthService] Login request config:",a),console.log("[AuthService] About to call loginPopup...");let c;try{if(console.log("[AuthService] About to call MSAL loginPopup..."),c=await o.loginPopup(a),console.log("[AuthService] MSAL login successful, got access token"),console.log("[AuthService] MSAL response:",{hasAccessToken:!!c.accessToken,hasAccount:!!c.account,accountName:c.account?.name,accountUsername:c.account?.username}),!c.accessToken)throw console.error("[AuthService] MSAL login succeeded but no access token received"),new Error("MSAL login succeeded but no access token received");console.log("[AuthService] MSAL access token confirmed:",{tokenLength:c.accessToken.length,tokenPreview:c.accessToken.substring(0,20)+"..."}),console.log("[AuthService] MSAL login completed successfully, proceeding to backend exchange..."),console.log("[AuthService] Checking configuration before backend call:",{hasClientId:!!this.config.clientId,hasTenantId:!!this.config.tenantId,clientId:this.config.clientId,tenantId:this.config.tenantId})}catch(m){if(console.error("[AuthService] Popup error:",m),m.errorCode==="interaction_in_progress"){console.log("[AuthService] Interaction in progress, clearing cache and retrying..."),await this.clearActiveInteractions(o),await new Promise(v=>setTimeout(v,1e3));try{c=await o.loginPopup(a),console.log("[AuthService] MSAL login successful on retry, got access token")}catch(v){throw console.error("[AuthService] Retry failed:",v),v.errorCode==="interaction_in_progress"?(console.log("[AuthService] Persistent interaction issue, resetting MSAL instance..."),this.resetMSALInstance(),new Error("Authentication session is stuck. Please refresh the page and try again.")):v}}else throw m}console.log("[AuthService] Exchanging token with backend..."),console.log("[AuthService] MSAL access token received:",{hasToken:!!c.accessToken,tokenLength:c.accessToken?.length,tokenPreview:c.accessToken?.substring(0,20)+"..."}),console.log("[AuthService] About to start backend token exchange process...");let d;try{console.log("[AuthService] About to call exchangeTokenForBackendToken..."),console.log("[AuthService] Backend URL will be:",`${an}/auth/login`),console.log("[AuthService] Making backend request..."),d=await this.exchangeTokenForBackendToken(c.accessToken),console.log("[AuthService] Backend token exchange successful")}catch(m){throw console.error("[AuthService] Backend token exchange failed:",m),console.error("[AuthService] Backend error details:",{message:m.message,stack:m.stack}),m}if(console.log("[AuthService] Backend response received:",{type:typeof d,keys:Object.keys(d),hasAccessToken:!!d.accessToken,hasRefreshToken:!!d.refreshToken,hasExpiresAt:!!d.expiresAt}),console.log("[AuthService] About to store tokens:",{accessToken:!!d.accessToken,refreshToken:!!d.refreshToken,expiresAt:d.expiresAt,accessTokenLength:d.accessToken?.length,refreshTokenLength:d.refreshToken?.length}),!d.accessToken||!d.refreshToken||!d.expiresAt){if(console.error("[AuthService] Missing required token fields:",{accessToken:!!d.accessToken,refreshToken:!!d.refreshToken,expiresAt:!!d.expiresAt}),!d.accessToken)throw new Error("Backend response missing access token");const m=new Date;m.setDate(m.getDate()+7);const v="fallback-refresh-"+Date.now();console.log("[AuthService] Using fallback values:",{expiresAt:m.toISOString(),refreshToken:v}),d.refreshToken=d.refreshToken||v,d.expiresAt=d.expiresAt||m.toISOString()}return this.setTokens(d.accessToken,d.refreshToken,d.expiresAt),console.log("[AuthService] Tokens stored successfully"),d}catch(o){throw console.error("[AuthService] Microsoft login error:",o),o instanceof Error?new Error(`Microsoft authentication failed: ${o.message}`):new Error("Failed to authenticate with Microsoft Entra ID")}}async googleLogin(){try{const o="1003899655255-ib2ru0fiq7apqbgt4ifk48rmka88kqf0.apps.googleusercontent.com";return await this.loadGoogleIdentityServices(),new Promise((a,c)=>{let d=!1;const m=setTimeout(()=>{d||(d=!0,c(new Error("Google authentication timed out. Please try again.")))},6e4);try{window.google.accounts.oauth2.initTokenClient({client_id:o,scope:"openid profile email",prompt:"select_account",callback:async j=>{try{if(d)return;if(clearTimeout(m),j.error){d=!0,c(new Error(`Google OAuth error: ${j.error}`));return}if(!j.access_token){d=!0,c(new Error("No access token received from Google"));return}console.log("✅ [AuthService] Google OAuth successful, got access token");const L=await this.exchangeGoogleTokenForBackendToken(j.access_token);this.setTokens(L.accessToken,L.refreshToken,L.expiresAt),d=!0,a(L)}catch(L){d||(d=!0,clearTimeout(m),c(L))}}}).requestAccessToken()}catch(x){d||(d=!0,clearTimeout(m),c(new Error(`Failed to initialize Google OAuth: ${x instanceof Error?x.message:"Unknown error"}`)))}const v=()=>{clearTimeout(m)},S=a,y=c;a=x=>{v(),S(x)},c=x=>{v(),y(x)}})}catch(o){throw console.error("Google login error:",o),new Error(`Failed to authenticate with Google: ${o instanceof Error?o.message:"Unknown error"}`)}}async loadGoogleIdentityServices(){return new Promise((o,a)=>{if(window.google){o();return}const c=document.createElement("script");c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.onload=()=>o(),c.onerror=()=>a(new Error("Failed to load Google Identity Services")),document.head.appendChild(c)})}async googleLoginOneTap(){try{return await this.loadGoogleIdentityServices(),new Promise((o,a)=>{window.google.accounts.id.initialize({client_id:"1003899655255-ib2ru0fiq7apqbgt4ifk48rmka88kqf0.apps.googleusercontent.com",callback:async c=>{try{if(c.error){a(new Error(c.error));return}const d=await this.exchangeGoogleTokenForBackendToken(c.credential);this.setTokens(d.accessToken,d.refreshToken,d.expiresAt),o(d)}catch(d){a(d)}}}),window.google.accounts.id.prompt()})}catch(o){throw console.error("Google One Tap login error:",o),new Error("Failed to authenticate with Google")}}async exchangeGoogleTokenForBackendToken(o){try{const c=await(await fetch(`https://www.googleapis.com/oauth2/v2/userinfo?access_token=${o}`)).json(),d=await fetch(`${an}/auth/google-login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessToken:o,userInfo:c})});if(!d.ok){const v=await d.json().catch(()=>({}));throw new Error(v.error||"Failed to authenticate with backend")}const m=await d.json();return console.log("✅ [AuthService] Google token exchange successful, received data:",{user:m.user,hasAccessToken:!!m.accessToken,hasRefreshToken:!!m.refreshToken,expiresAt:m.expiresAt}),this.setTokens(m.accessToken,m.refreshToken,m.expiresAt),console.log("💾 [AuthService] Tokens stored successfully for Google login"),m}catch(a){throw console.error("Error exchanging Google token:",a),new Error("Failed to authenticate with backend")}}async localLogin(o){try{if(console.log("🔐 [AuthService] Starting local login with credentials:",{email:o.email,passwordLength:o.password.length}),console.log("🌐 [AuthService] API Base URL:",an),!o.email||!o.password)throw new Error("Email and password are required");if(!o.email.includes("@"))throw new Error("Please enter a valid email address");if(o.password.length<6)throw new Error("Password must be at least 6 characters long");const a=await fetch(`${an}/auth/local-login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(console.log("📡 [AuthService] Local login response status:",a.status),!a.ok){const d=await a.json().catch(()=>({}));throw console.error("❌ [AuthService] Local login failed:",d),a.status===401?new Error("Invalid email or password. Please check your credentials and try again."):a.status===404?new Error("User not found. Please check your email or sign up for a new account."):a.status===500?new Error("Server error. Please try again later or contact support."):new Error(d.error||`Login failed with status ${a.status}`)}const c=await a.json();if(console.log("✅ [AuthService] Local login successful, received data:",{user:c.user,hasAccessToken:!!c.accessToken,hasRefreshToken:!!c.refreshToken,expiresAt:c.expiresAt}),!c.accessToken||!c.refreshToken||!c.expiresAt)throw new Error("Invalid response from server. Missing authentication tokens.");return this.setTokens(c.accessToken,c.refreshToken,c.expiresAt),console.log("💾 [AuthService] Tokens stored successfully for local login"),c}catch(a){throw console.error("❌ [AuthService] Local login error:",a),a instanceof Error?a:new Error("Local authentication failed. Please try again.")}}async register(o){try{console.log("🔐 Registering user with credentials:",{...o,password:"[HIDDEN]"}),console.log("🌐 API Base URL:",an);const a=await fetch(`${an}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(console.log("📡 Registration response status:",a.status),!a.ok){const d=await a.json().catch(()=>({}));throw console.error("❌ Registration failed:",d),new Error(d.error||"Failed to register user")}const c=await a.json();return console.log("✅ Registration successful, received data:",{user:c.user,hasAccessToken:!!c.accessToken,hasRefreshToken:!!c.refreshToken,expiresAt:c.expiresAt}),this.setTokens(c.accessToken,c.refreshToken,c.expiresAt),console.log("💾 Tokens stored successfully"),c}catch(a){throw console.error("❌ Registration error:",a),new Error(a instanceof Error?a.message:"Registration failed")}}async exchangeTokenForBackendToken(o){console.log("[AuthService] Exchanging token with backend..."),console.log("[AuthService] Backend URL:",`${an}/auth/login`),console.log("[AuthService] Request payload:",{clientId:this.config.clientId,tenantId:this.config.tenantId,hasToken:!!o,tokenLength:o?.length});try{const a=await fetch(`${an}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({msalToken:o,clientId:this.config.clientId,tenantId:this.config.tenantId})});if(console.log("[AuthService] Backend response status:",a.status),console.log("[AuthService] Backend response headers:",Object.fromEntries(a.headers.entries())),!a.ok){const d=await a.json().catch(()=>({}));throw console.error("[AuthService] Backend error response:",d),new Error(d.error||`Backend authentication failed with status ${a.status}`)}const c=await a.json();if(console.log("[AuthService] Backend success response:",{hasUser:!!c.user,hasToken:!!c.accessToken,hasRefreshToken:!!c.refreshToken,hasExpiresAt:!!c.expiresAt,userEmail:c.user?.email,expiresAt:c.expiresAt,accessTokenLength:c.accessToken?.length,refreshTokenLength:c.refreshToken?.length}),console.log("[AuthService] Full backend response:",c),console.log("[AuthService] Response keys:",Object.keys(c)),!c.accessToken||!c.refreshToken||!c.expiresAt){if(console.error("[AuthService] Backend response missing required fields:",{hasAccessToken:!!c.accessToken,hasRefreshToken:!!c.refreshToken,hasExpiresAt:!!c.expiresAt,availableKeys:Object.keys(c)}),console.warn("[AuthService] Attempting to handle missing fields..."),!c.accessToken)throw new Error("Backend response is missing access token");const d=new Date;d.setDate(d.getDate()+7);const m="temp-refresh-token-"+Date.now();console.log("[AuthService] Using default values:",{expiresAt:d.toISOString(),refreshToken:m});const v={...c,refreshToken:c.refreshToken||m,expiresAt:c.expiresAt||d.toISOString()};return this.setTokens(v.accessToken,v.refreshToken,v.expiresAt),console.log("💾 [AuthService] Tokens stored successfully for Microsoft login"),v}return this.setTokens(c.accessToken,c.refreshToken,c.expiresAt),console.log("💾 [AuthService] Tokens stored successfully for Microsoft login"),c}catch(a){throw console.error("[AuthService] Fetch error:",a),new Error(`Network error: ${a instanceof Error?a.message:"Unknown error"}`)}}async logout(){try{console.log("[AuthService] Starting logout process..."),await this.clearBackendSession(),console.log("[AuthService] Backend session cleared"),this.clearAllAuthData(),console.log("[AuthService] All authentication data cleared");try{window.msalInstance&&typeof window.msalInstance.clearCache=="function"&&(window.msalInstance.clearCache(),console.log("[AuthService] MSAL cache cleared"))}catch(o){console.warn("[AuthService] MSAL cache clear failed, but tokens cleared:",o)}console.log("[AuthService] Logout completed successfully")}catch(o){console.error("[AuthService] Logout error:",o),this.clearAllAuthData()}}async clearBackendSession(){try{const o=this.getAccessToken();o&&await fetch(`${an}/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}})}catch(o){console.error("Error clearing backend session:",o)}}async getCurrentUser(){try{const o=this.getAccessToken();if(!o)return null;const a=await fetch(`${an}/auth/me`,{headers:{Authorization:`Bearer ${o}`}});return a.ok?a.json():a.status===401&&await this.refreshToken()?this.getCurrentUser():(this.clearTokens(),null)}catch(o){return console.error("Error getting current user:",o),this.clearTokens(),null}}async refreshToken(){try{const o=this.getRefreshToken();if(!o)return this.clearTokens(),!1;const a=await fetch(`${an}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:o})});if(!a.ok)return this.clearTokens(),!1;const c=await a.json();return this.setTokens(c.accessToken,c.refreshToken,c.expiresAt),!0}catch(o){return console.error("Error refreshing token:",o),this.clearTokens(),!1}}isAuthenticated(){const o=this.getAccessToken(),a=this.getExpiresAt();if(console.log("[AuthService] Checking authentication:",{hasToken:!!o,hasExpiresAt:!!a,expiresAt:a,currentTime:new Date().toISOString(),tokenExpiry:a?new Date(a).toISOString():"N/A",isExpired:a?new Date(a)<=new Date:"N/A"}),!o||!a)return console.log("[AuthService] Authentication failed: missing token or expiry"),!1;const c=new Date,m=new Date(a)>c;return m||(console.log("[AuthService] Token expired, clearing stale tokens"),this.clearTokens()),console.log("[AuthService] Token validity check:",{isValid:m}),m}getAccessToken(){return localStorage.getItem("accessToken")}getRefreshToken(){return localStorage.getItem("refreshToken")}getExpiresAt(){return localStorage.getItem("expiresAt")}setTokens(o,a,c){console.log("[AuthService] Setting tokens in localStorage:",{hasAccessToken:!!o,hasRefreshToken:!!a,expiresAt:c,accessTokenLength:o?.length,refreshTokenLength:a?.length}),localStorage.setItem("accessToken",o),localStorage.setItem("refreshToken",a),localStorage.setItem("expiresAt",c),console.log("[AuthService] Tokens stored, verification:",{storedAccessToken:!!localStorage.getItem("accessToken"),storedRefreshToken:!!localStorage.getItem("refreshToken"),storedExpiresAt:localStorage.getItem("expiresAt")})}clearTokens(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("expiresAt")}clearAllAuthData(){console.log("[AuthService] Clearing all authentication data..."),this.clearTokens();try{localStorage.removeItem("user"),console.log("[AuthService] User data cleared from localStorage")}catch(a){console.warn("[AuthService] Could not clear user data:",a)}try{Ln(async()=>{const{historyService:a}=await Promise.resolve().then(()=>Sf);return{historyService:a}},void 0).then(({historyService:a})=>{a.clearUserData(),console.log("[AuthService] User-specific history data cleared")}).catch(a=>{console.warn("[AuthService] Could not clear user history data:",a)})}catch(a){console.warn("[AuthService] Could not clear user history data:",a)}["llm_qa_current_session","structure_last_saved","overview_market_analysis","llm_qa_sessions"].forEach(a=>{try{localStorage.getItem(a)&&(console.log(`[AuthService] Clearing conflicting localStorage key: ${a}`),localStorage.removeItem(a))}catch(c){console.warn(`[AuthService] Could not clear ${a}:`,c)}}),console.log("[AuthService] All authentication data cleared (history preserved)")}getAuthHeaders(){const o=this.getAccessToken();return o?{Authorization:`Bearer ${o}`}:{}}getCurrentUserFromStorage(){try{const o=localStorage.getItem("user");if(o)return JSON.parse(o)}catch(o){console.warn("[AuthService] Error parsing user data from localStorage:",o)}return null}getCurrentUserId(){try{return this.getCurrentUserFromStorage()?.id||null}catch(o){return console.warn("[AuthService] Error getting user ID from localStorage:",o),null}}}const Te=new wf;class bf{getStorageKey(o){const a=Te.getCurrentUserId();return a?`${o}_${a}`:`${o}_anonymous`}getHistoryKey(){return this.getStorageKey("comprehensive_history")}async addHistoryItem(o){try{console.log("[HistoryService] Adding history item to localStorage:",o);const a=this.getHistoryKey(),c=this.getHistoryFromStorage(a),d=[o,...c];localStorage.setItem(a,JSON.stringify(d)),console.log("[HistoryService] History item saved successfully to localStorage")}catch(a){throw console.error("[HistoryService] Error saving history item to localStorage:",a),a}}async getHistoryItems(){try{const o=this.getHistoryKey(),a=this.getHistoryFromStorage(o);return console.log("[HistoryService] Retrieved history items from localStorage:",a.length),a}catch(o){return console.error("[HistoryService] Error getting history items from localStorage:",o),[]}}async clearHistory(){try{console.log("[HistoryService] Clearing history from localStorage...");const o=this.getHistoryKey();localStorage.removeItem(o),console.log("[HistoryService] History cleared successfully from localStorage")}catch(o){throw console.error("[HistoryService] Error clearing history from localStorage:",o),o}}async deleteHistoryItem(o){try{console.log("[HistoryService] Deleting history item from localStorage:",o);const a=this.getHistoryKey(),d=this.getHistoryFromStorage(a).filter(m=>m.id!==o);localStorage.setItem(a,JSON.stringify(d)),console.log("[HistoryService] History item deleted successfully from localStorage")}catch(a){throw console.error("[HistoryService] Error deleting history item from localStorage:",a),a}}async exportHistoryItem(o){try{console.log("[HistoryService] Exporting history item from localStorage:",o);const a=this.getHistoryKey(),d=this.getHistoryFromStorage(a).find(S=>S.id===o);if(!d)return null;const m=JSON.stringify(d,null,2),v=`${d.type}_${d.id}.json`;return console.log("[HistoryService] History item exported successfully from localStorage"),{content:m,filename:v,mimeType:"application/json"}}catch(a){return console.error("[HistoryService] Error exporting history item from localStorage:",a),null}}async exportAllHistory(){try{console.log("[HistoryService] Exporting all history from localStorage...");const o=this.getHistoryKey(),a=this.getHistoryFromStorage(o),c=JSON.stringify(a,null,2),d=`all_history_${new Date().toISOString().split("T")[0]}.json`;return console.log("[HistoryService] All history exported successfully from localStorage"),{content:c,filename:d,mimeType:"application/json"}}catch(o){return console.error("[HistoryService] Error exporting all history from localStorage:",o),{content:"[]",filename:"empty_history.json",mimeType:"application/json"}}}async clearUserData(){try{console.log("[HistoryService] Clearing user data from localStorage..."),Te.getCurrentUserId()&&([this.getStorageKey("comprehensive_history"),this.getStorageKey("qa_history"),this.getStorageKey("ai_visibility_history"),this.getStorageKey("content_analysis_history"),this.getStorageKey("structure_analysis_history")].forEach(c=>{localStorage.removeItem(c)}),console.log("[HistoryService] User data cleared successfully from localStorage"))}catch(o){throw console.error("[HistoryService] Error clearing user data from localStorage:",o),o}}getHistoryFromStorage(o){try{const a=localStorage.getItem(o);return a?JSON.parse(a):[]}catch(a){return console.error("[HistoryService] Error parsing history from localStorage:",a),[]}}}const Je=new bf,Sf=Object.freeze(Object.defineProperty({__proto__:null,historyService:Je},Symbol.toStringTag,{value:"Module"})),hd="statistics_state";function kf({sessions:l,currentSession:o}){const[a,c]=w.useState("7d"),[d,m]=w.useState("questions"),[v,S]=w.useState([]),[y,x]=w.useState(0),[j,L]=w.useState([]),[_]=w.useState(!1);w.useEffect(()=>{(()=>{const k=Je.getHistoryItems();S(k);const R=JSON.parse(localStorage.getItem("sessions")||"[]");L(R);const B=localStorage.getItem("llm_qa_current_session");if(B)try{const K=JSON.parse(B);console.log("[Statistics] Current session loaded:",{id:K.id,qaDataLength:K.qaData?.length||0})}catch(K){console.error("[Statistics] Error parsing current session:",K)}})()},[y,l.length,o]),w.useEffect(()=>{o&&(console.log("[Statistics] Current session prop changed:",{id:o.id,qaDataLength:o.qaData?.length||0,timestamp:o.timestamp}),x(C=>C+1))},[o?.id,o?.qaData?.length,o?.timestamp]),w.useEffect(()=>{const C=K=>{(K.key==="comprehensive_history"||K.key==="sessions"||K.key==="llm_qa_current_session")&&(console.log("[Statistics] Storage changed:",K.key,"refreshing statistics"),x(J=>J+1))};window.addEventListener("storage",C);const R=setInterval(()=>{const K=localStorage.getItem("llm_qa_current_session");if(K)try{const le=JSON.parse(K).qaData?.length||0;if(o&&o.qaData){const be=o.qaData.length;le!==be&&(console.log("[Statistics] Current session QA count changed:",be,"->",le),x(G=>G+1))}}catch(J){console.error("[Statistics] Error checking current session changes:",J)}},1e3),B=setInterval(()=>{const K=Je.getHistoryItems(),J=JSON.parse(localStorage.getItem("sessions")||"[]");(K.length!==v.length||J.length!==j.length)&&(console.log("[Statistics] Data changed, refreshing statistics"),x(le=>le+1))},2e3);return()=>{window.removeEventListener("storage",C),clearInterval(R),clearInterval(B)}},[v.length,j.length,o]);const F=()=>{const C=[...l,...j];v.forEach(re=>{if(re.type==="qa"){const ye=re;C.push(ye.sessionData)}});const k=C.filter((re,ye,et)=>ye===et.findIndex(st=>st.id===re.id));if(console.log("[Statistics] Total sessions for calculation:",k.length),console.log("[Statistics] Sessions from prop:",l.length),console.log("[Statistics] Sessions from localStorage:",j.length),console.log("[Statistics] QA items from history:",v.filter(re=>re.type==="qa").length),k.forEach((re,ye)=>{console.log(`[Statistics] Session ${ye+1}:`,{id:re.id,qaCount:re.qaData.length,totalCost:re.statistics?.totalCost,timestamp:re.timestamp})}),k.length===0)return{totalQuestions:0,totalCost:0,totalTokens:0,avgAccuracy:0,totalSessions:0,avgQuestionsPerSession:0,successRate:0,providerDistribution:{},questionsPerDay:[],inputTokens:0,outputTokens:0,avgResponseTime:0,weeklyGrowth:0,dailyAverage:0,peakDay:"",sentimentDistribution:{positive:0,negative:0,neutral:0},geoScoreAverage:0,semanticRelevanceAverage:0,vectorSimilarityAverage:0};const R=k.reduce((re,ye)=>re+ye.qaData.length,0),B=k.reduce((re,ye)=>re+parseFloat(ye.statistics?.totalCost||"0"),0),K=k.reduce((re,ye)=>re+ye.qaData.reduce((et,st)=>et+st.totalTokens,0),0);console.log("[Statistics] Calculated metrics:",{totalQuestions:R,totalCost:B.toFixed(5),totalTokens:K,sessionCount:C.length});const J=k.flatMap(re=>re.qaData),le=J.map(re=>parseFloat(re.accuracy||"0")).filter(re=>!isNaN(re)&&re>0),be=le.length>0?le.reduce((re,ye)=>re+ye,0)/le.length:0;console.log("[Statistics] Accuracy calculation:",{totalQAItems:J.length,itemsWithAccuracy:le.length,avgAccuracy:be.toFixed(1)+"%",accuracyValues:le.slice(0,5)});const G={};["openai","gemini","perplexity"].forEach(re=>{G[re]=0}),J.forEach(re=>{const ye=re.provider||"Unknown";G.hasOwnProperty(ye)?G[ye]++:G[ye]=(G[ye]||0)+1});const h=k.reduce((re,ye)=>re+ye.qaData.reduce((et,st)=>et+st.inputTokens,0),0),g=k.reduce((re,ye)=>re+ye.qaData.reduce((et,st)=>et+st.outputTokens,0),0),b={positive:0,negative:0,neutral:0};J.forEach(re=>{const ye=re.sentiment?.toLowerCase()||"neutral";ye.includes("positive")?b.positive++:ye.includes("negative")?b.negative++:b.neutral++});const A=J.map(re=>re.geoScore||0).filter(re=>re>0),z=A.length>0?A.reduce((re,ye)=>re+ye,0)/A.length:0,X=J.map(re=>parseFloat(re.semanticRelevance||"0")).filter(re=>!isNaN(re)&&re>0),ue=X.length>0?X.reduce((re,ye)=>re+ye,0)/X.length:0,ae=J.map(re=>{const ye=re.vectorSimilarity;return typeof ye=="string"&&ye.includes("%")?parseFloat(ye.replace("%","")):parseFloat(ye||"0")}).filter(re=>!isNaN(re)&&re>0),te=ae.length>0?ae.reduce((re,ye)=>re+ye,0)/ae.length:0,he=new Date,Le=new Date(he.getTime()-7*24*60*60*1e3),Fe=new Date(he.getTime()-14*24*60*60*1e3),Xe=k.filter(re=>new Date(re.timestamp)>=Le),$e=k.filter(re=>new Date(re.timestamp)>=Fe&&new Date(re.timestamp)<Le),Sn=Xe.reduce((re,ye)=>re+ye.qaData.length,0),dt=$e.reduce((re,ye)=>re+ye.qaData.length,0),Kt=dt>0?(Sn-dt)/dt*100:0,Jt=R/7,ft=E(C,7),Mt=ft.indexOf(Math.max(...ft)),Y=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][Mt]||"Unknown",ce=k.filter(re=>re.qaData.some(ye=>ye.answer&&ye.answer.trim()!=="")),De=k.length>0?ce.length/k.length*100:0,Ie=k.length>0?R/k.length:0,Ce=K>0?K/1e3*2.5:0;return{totalQuestions:R,totalCost:B,totalTokens:K,avgAccuracy:be,totalSessions:k.length,avgQuestionsPerSession:Ie,successRate:De,providerDistribution:G,questionsPerDay:ft,inputTokens:h,outputTokens:g,avgResponseTime:Ce,weeklyGrowth:Kt,dailyAverage:Jt,peakDay:Y,sentimentDistribution:b,geoScoreAverage:z,semanticRelevanceAverage:ue,vectorSimilarityAverage:te}},E=(C,k)=>{const R=new Date,B=[];for(let K=k-1;K>=0;K--){const J=new Date(R);J.setDate(J.getDate()-K);const be=C.filter(G=>{const f=new Date(G.timestamp);return f.getFullYear()===J.getFullYear()&&f.getMonth()===J.getMonth()&&f.getDate()===J.getDate()}).reduce((G,f)=>G+f.qaData.length,0);B.push(be)}return B},$=()=>{const C=new Date,k=[],R=[],B=["#00ff88","#00d4aa","#00b8cc","#009cee","#0080ff","#0064ff","#0048ff","#ff6b6b","#ffa726","#ffcc02","#66bb6a","#26a69a","#42a5f5","#ab47bc","#ec407a","#ff7043","#ffca28","#8bc34a","#26c6da","#5c6bc0","#7e57c2","#ef5350","#ff9800","#ffc107","#4caf50","#00bcd4","#3f51b5","#9c27b0","#f44336","#ff5722","#ffeb3b","#8bc34a","#00bcd4","#2196f3","#9c27b0"],K=[...l];switch(v.forEach(J=>{if(J.type==="qa"){const le=J;K.push(le.sessionData)}}),a){case"7d":console.log("[Statistics] Generating 7-day chart data...");for(let J=6;J>=0;J--){const le=new Date(C);le.setDate(le.getDate()-J);const be=le.toLocaleDateString("en-US",{weekday:"short"});k.push(be),console.log(`[Statistics] Day ${J}: ${be} - ${le.toISOString()}`),new Date(le).setHours(0,0,0,0),new Date(le).setHours(23,59,59,999);const h=K.filter(g=>{try{const b=new Date(g.timestamp);if(isNaN(b.getTime()))return console.warn("[Statistics] Invalid session timestamp:",g.timestamp),!1;const A=b.getFullYear()*1e4+(b.getMonth()+1)*100+b.getDate(),z=le.getFullYear()*1e4+(le.getMonth()+1)*100+le.getDate();return A===z}catch(b){return console.error("[Statistics] Error parsing session timestamp:",g.timestamp,b),!1}});if(d==="questions"){const g=h.reduce((b,A)=>b+A.qaData.length,0);console.log(`[Statistics] Day ${k[k.length-1]}: ${h.length} sessions, ${g} questions`),R.push(g)}else if(d==="cost"){const g=h.reduce((b,A)=>b+parseFloat(A.statistics?.totalCost||"0"),0);R.push(g)}else d==="sessions"&&R.push(h.length)}break;case"30d":console.log("[Statistics] Generating 30-day chart data...");for(let J=29;J>=0;J--){const le=new Date(C);le.setDate(le.getDate()-J);const be=le.toLocaleDateString("en-US",{month:"short",day:"numeric"});k.push(be),console.log(`[Statistics] Day ${J}: ${be} - ${le.toISOString()}`),new Date(le).setHours(0,0,0,0),new Date(le).setHours(23,59,59,999);const h=K.filter(g=>{try{const b=new Date(g.timestamp);if(isNaN(b.getTime()))return console.warn("[Statistics] Invalid session timestamp:",g.timestamp),!1;const A=b.getFullYear()*1e4+(b.getMonth()+1)*100+b.getDate(),z=le.getFullYear()*1e4+(le.getMonth()+1)*100+le.getDate();return A===z}catch(b){return console.error("[Statistics] Error parsing session timestamp:",g.timestamp,b),!1}});if(d==="questions"){const g=h.reduce((b,A)=>b+A.qaData.length,0);console.log(`[Statistics] Day ${k[k.length-1]}: ${h.length} sessions, ${g} questions`),R.push(g)}else if(d==="cost"){const g=h.reduce((b,A)=>b+parseFloat(A.statistics?.totalCost||"0"),0);R.push(g)}else d==="sessions"&&R.push(h.length)}break}return{labels:k,values:R,colors:B}},U=F(),M=$(),oe=[...l];if(v.forEach(C=>{if(C.type==="qa"){const k=C;oe.push(k.sessionData)}}),oe.length>0){const C=oe[0];console.log("[Statistics] Sample session structure:",{id:C.id,timestamp:C.timestamp,qaDataLength:C.qaData.length,qaDataSample:C.qaData.slice(0,2).map(k=>({question:k.question.substring(0,50)+"...",hasAnswer:!!k.answer}))})}console.log("[Statistics] Sessions from prop:",l.length),console.log("[Statistics] QA items from history:",v.filter(C=>C.type==="qa").length),console.log("[Statistics] Total sessions for stats:",oe.length),console.log("[Statistics] Current session QA count:",o?.qaData.length||0),console.log("[Statistics] Chart data:",M),console.log("[Statistics] Provider distribution:",U.providerDistribution),o&&console.log("[Statistics] Current session active:",{id:o.id,qaDataLength:o.qaData?.length||0}),oe.length>0&&console.log("[Statistics] Sample session timestamps:",oe.slice(0,3).map(C=>({id:C.id,timestamp:C.timestamp,qaDataLength:C.qaData.length,date:new Date(C.timestamp).toLocaleDateString()})));const ne=M.values.length>0?Math.max(...M.values,1):1;if(!M.values.some(C=>C>0)&&oe.length>0)if(console.log("[Statistics] No data found in chart, showing fallback data"),o&&o.qaData.length>0){const C=o.qaData.length,k=Math.ceil(C/7);M.values=M.values.map((R,B)=>B===0?Math.floor(k*.8):B===1?Math.floor(k*1.2):B===2?Math.floor(k*1):B===3?Math.floor(k*.9):B===4?Math.floor(k*1.1):B===5?Math.floor(k*.7):B===6?Math.floor(k*.6):0)}else{const C=l.reduce((k,R)=>k+R.qaData.length,0);if(C>0){const k=Math.ceil(C/7);M.values=M.values.map((R,B)=>B===0?Math.floor(k*.8):B===1?Math.floor(k*1.2):B===2?Math.floor(k*1):B===3?Math.floor(k*.9):B===4?Math.floor(k*1.1):B===5?Math.floor(k*.7):B===6?Math.floor(k*.6):0)}}const fe=U.providerDistribution,W=["#00ff88","#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57"],I=C=>({openai:"ChatGPT",gemini:"Gemini",perplexity:"Perplexity",Unknown:"Unknown"})[C]||C;return w.useEffect(()=>{const C=localStorage.getItem(hd);if(C)try{const k=JSON.parse(C);k.timeRange&&c(k.timeRange),k.selectedMetric&&m(k.selectedMetric)}catch{}},[]),w.useEffect(()=>{localStorage.setItem(hd,JSON.stringify({timeRange:a,selectedMetric:d}))},[a,d]),n.jsxs("div",{className:"w-full max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8",children:[n.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:n.jsx("h1",{className:"text-2xl sm:text-3xl font-extrabold text-black",children:"Live Analytics Dashboard"})}),n.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6 sm:mb-8",children:[n.jsxs("div",{className:"text-center p-3 sm:p-4 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsx("div",{className:"text-xl sm:text-2xl font-bold text-blue-700",children:(()=>{let C=null,k=0;const R=["llm_qa_current_session","current_session","qa_session","enhance_content_state"];for(const B of R)try{const K=localStorage.getItem(B);if(K){const J=JSON.parse(K);console.log(`[Statistics] Found data in ${B}:`,{hasQaData:!!J.qaData,qaDataLength:J.qaData?.length,hasQaItems:!!J.qaItems,qaItemsLength:J.qaItems?.length}),J.qaData&&Array.isArray(J.qaData)&&J.qaData.length>0?(k=Math.max(k,J.qaData.length),C=J):J.qaItems&&Array.isArray(J.qaItems)&&J.qaItems.length>0&&(k=Math.max(k,J.qaItems.length),C=J)}}catch(K){console.error(`[Statistics] Error parsing ${B}:`,K)}if(console.log("[Statistics] Current Questions Debug:",{hasCurrentSession:!!o,currentSessionId:o?.id,propQaDataLength:o?.qaData?.length,hasStorageSession:!!C,totalQuestionsFound:k,overallStats:U.totalQuestions}),k>0)return console.log("[Statistics] Using localStorage session data:",k,"questions"),k;if(o&&o.qaData&&Array.isArray(o.qaData))return console.log("[Statistics] Using current session prop data:",o.qaData.length,"questions"),o.qaData.length;try{const B=Object.keys(localStorage).filter(K=>K.startsWith("enhance_content_cache_"));for(const K of B){const J=JSON.parse(localStorage.getItem(K)||"{}");if(J.qaItems&&Array.isArray(J.qaItems)&&J.qaItems.length>0)return console.log("[Statistics] Using cached enhance content data:",J.qaItems.length,"questions"),J.qaItems.length}}catch(B){console.error("[Statistics] Error checking enhance content cache:",B)}return console.log("[Statistics] Using overall stats fallback:",U.totalQuestions,"questions"),U.totalQuestions})()}),n.jsx("div",{className:"text-xs sm:text-sm text-blue-600 font-medium",children:(()=>{let C=!1;o&&o.qaData&&Array.isArray(o.qaData)&&o.qaData.length>0&&(C=!0);const k=["llm_qa_current_session","current_session","qa_session","enhance_content_state"];for(const R of k)try{const B=localStorage.getItem(R);if(B){const K=JSON.parse(B);if(K.qaData&&Array.isArray(K.qaData)&&K.qaData.length>0||K.qaItems&&Array.isArray(K.qaItems)&&K.qaItems.length>0){C=!0;break}}}catch{}try{const R=Object.keys(localStorage).filter(B=>B.startsWith("enhance_content_cache_"));for(const B of R){const K=JSON.parse(localStorage.getItem(B)||"{}");if(K.qaItems&&Array.isArray(K.qaItems)&&K.qaItems.length>0){C=!0;break}}}catch{}return C?"Current Questions":"Total Questions"})()}),(()=>{let C=!1;o&&o.qaData&&Array.isArray(o.qaData)&&o.qaData.length>0&&(C=!0);const k=["llm_qa_current_session","current_session","qa_session","enhance_content_state"];for(const R of k)try{const B=localStorage.getItem(R);if(B){const K=JSON.parse(B);if(K.qaData&&Array.isArray(K.qaData)&&K.qaData.length>0||K.qaItems&&Array.isArray(K.qaItems)&&K.qaItems.length>0){C=!0;break}}}catch{}return C?n.jsx("div",{className:"text-xs text-blue-500 mt-1",children:"Live Session"}):null})()]}),n.jsxs("div",{className:"text-center p-3 sm:p-4 bg-green-50 rounded-lg border border-green-200",children:[n.jsx("div",{className:"text-xl sm:text-2xl font-bold text-green-700",children:(()=>{let C=null,k=0,R=0;const B=["llm_qa_current_session","current_session","qa_session","enhance_content_state"];for(const K of B)try{const J=localStorage.getItem(K);if(J){const le=JSON.parse(J);console.log(`[Statistics] Accuracy - Found data in ${K}:`,{hasQaData:!!le.qaData,qaDataLength:le.qaData?.length,hasQaItems:!!le.qaItems,qaItemsLength:le.qaItems?.length});const be=le.qaData||le.qaItems;if(be&&Array.isArray(be)&&be.length>0){const G=be.filter(f=>f.answer&&f.answer.trim()!=="");if(console.log(`[Statistics] Accuracy - Found ${G.length} answered questions in ${K}`),G.length>0){let f=0,h=0;if(G.forEach(g=>{if(console.log("[Statistics] Accuracy - Processing QA:",{hasAnswer:!!g.answer,accuracyType:typeof g.accuracy,accuracyValue:g.accuracy,geoScore:g.geoScore}),g.accuracy!==void 0&&g.accuracy!==null){let b=0;typeof g.accuracy=="string"?b=parseFloat(g.accuracy.replace("%","")):typeof g.accuracy=="number"?b=g.accuracy:g.accuracy&&typeof g.accuracy=="object"&&g.accuracy.accuracy!==void 0&&(b=parseFloat(g.accuracy.accuracy.toString().replace("%",""))),isNaN(b)||(f+=b,h++,console.log(`[Statistics] Accuracy - Valid accuracy found: ${b}%`))}}),h>0){const g=f/h;console.log(`[Statistics] Accuracy - Session average: ${g.toFixed(1)}%`),k+=f,R+=h,C=le}}}}}catch(J){console.error(`[Statistics] Error parsing ${K} for accuracy:`,J)}try{const K=Object.keys(localStorage).filter(J=>J.startsWith("enhance_content_cache_"));for(const J of K){const le=JSON.parse(localStorage.getItem(J)||"{}");if(le.qaItems&&Array.isArray(le.qaItems)&&le.qaItems.length>0){const be=le.qaItems.filter(G=>G.answer&&G.answer.trim()!=="");if(console.log(`[Statistics] Accuracy - Found ${be.length} answered questions in cache ${J}`),be.length>0){let G=0,f=0;if(be.forEach(h=>{if(h.accuracy!==void 0&&h.accuracy!==null){let g=0;typeof h.accuracy=="string"?g=parseFloat(h.accuracy.replace("%","")):typeof h.accuracy=="number"?g=h.accuracy:h.accuracy&&typeof h.accuracy=="object"&&h.accuracy.accuracy!==void 0&&(g=parseFloat(h.accuracy.accuracy.toString().replace("%",""))),isNaN(g)||(G+=g,f++)}}),f>0){const h=G/f;console.log(`[Statistics] Accuracy - Cache average: ${h.toFixed(1)}%`),k+=G,R+=f}}}}}catch(K){console.error("[Statistics] Error checking enhance content cache for accuracy:",K)}if(console.log("[Statistics] Accuracy Debug:",{hasCurrentSession:!!o,currentSessionId:o?.id,propQaDataLength:o?.qaData?.length,hasStorageSession:!!C,totalAccuracyFound:k,validAccuracyCount:R,overallStats:U.averageAccuracy}),R>0){const K=k/R;return console.log("[Statistics] Using localStorage accuracy data:",K.toFixed(1)+"%"),K.toFixed(1)}if(o&&o.qaData&&Array.isArray(o.qaData)&&o.qaData.length>0){const K=o.qaData.filter(le=>le.answer&&le.answer.trim()!=="");if(K.length>0){let le=0,be=0;if(K.forEach(G=>{if(G.accuracy!==void 0&&G.accuracy!==null){let f=0;typeof G.accuracy=="string"?f=parseFloat(G.accuracy.replace("%","")):typeof G.accuracy=="number"?f=G.accuracy:G.accuracy&&typeof G.accuracy=="object"&&G.accuracy.accuracy!==void 0&&(f=parseFloat(G.accuracy.accuracy.toString().replace("%",""))),isNaN(f)||(le+=f,be++)}}),be>0){const G=le/be;return console.log("[Statistics] Using current session prop accuracy data:",G.toFixed(1)+"%"),G.toFixed(1)}}const J=o.qaData.filter(le=>le.geoScore!==void 0&&le.geoScore!==null);if(J.length>0){const G=(J.reduce((f,h)=>f+(h.geoScore||0),0)/J.length*20).toFixed(1);return console.log("[Statistics] Using geoScore fallback accuracy:",G+"%"),G}return console.log("[Statistics] Using default accuracy for answered questions: 75.0%"),"75.0"}return console.log("[Statistics] Using overall stats accuracy fallback:",U.averageAccuracy||"0"),U.averageAccuracy||"0"})()}),n.jsx("div",{className:"text-xs sm:text-sm text-green-600 font-medium",children:(()=>{let C=!1;o&&o.qaData&&Array.isArray(o.qaData)&&o.qaData.length>0&&(C=!0);const k=["llm_qa_current_session","current_session","qa_session","enhance_content_state"];for(const R of k)try{const B=localStorage.getItem(R);if(B){const K=JSON.parse(B);if(K.qaData&&Array.isArray(K.qaData)&&K.qaData.length>0||K.qaItems&&Array.isArray(K.qaItems)&&K.qaItems.length>0){C=!0;break}}}catch{}try{const R=Object.keys(localStorage).filter(B=>B.startsWith("enhance_content_cache_"));for(const B of R){const K=JSON.parse(localStorage.getItem(B)||"{}");if(K.qaItems&&Array.isArray(K.qaItems)&&K.qaItems.length>0){C=!0;break}}}catch{}return C?"Current Accuracy":"Avg Accuracy"})()}),(()=>{let C=!1;o&&o.qaData&&Array.isArray(o.qaData)&&o.qaData.length>0&&(C=!0);const k=["llm_qa_current_session","current_session","qa_session","enhance_content_state"];for(const R of k)try{const B=localStorage.getItem(R);if(B){const K=JSON.parse(B);if(K.qaData&&Array.isArray(K.qaData)&&K.qaData.length>0||K.qaItems&&Array.isArray(K.qaItems)&&K.qaItems.length>0){C=!0;break}}}catch{}return C?n.jsx("div",{className:"text-xs text-green-500 mt-1",children:"Live Session"}):null})()]}),n.jsxs("div",{className:"text-center p-3 sm:p-4 bg-purple-50 rounded-lg border border-purple-200",children:[n.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-purple-700",children:["$",o&&o.qaData&&Array.isArray(o.qaData)&&o.qaData.length>0?o.qaData.reduce((k,R)=>k+(R.cost||0),0).toFixed(5):parseFloat(U.totalCost).toFixed(5)]}),n.jsx("div",{className:"text-xs sm:text-sm text-purple-600 font-medium",children:o&&o.qaData&&Array.isArray(o.qaData)?"Current Cost":"Total Cost"}),o&&o.qaData&&Array.isArray(o.qaData)&&n.jsx("div",{className:"text-xs text-purple-500 mt-1",children:"Live Session"})]}),n.jsxs("div",{className:"text-center p-3 sm:p-4 bg-orange-50 rounded-lg border border-orange-200",children:[n.jsx("div",{className:"text-xl sm:text-2xl font-bold text-orange-700",children:o&&o.qaData&&Array.isArray(o.qaData)&&o.qaData.length>0?o.qaData.reduce((k,R)=>k+(R.totalTokens||0),0).toLocaleString():U.totalTokens.toLocaleString()}),n.jsx("div",{className:"text-xs sm:text-sm text-orange-600 font-medium",children:o&&o.qaData&&Array.isArray(o.qaData)?"Current Tokens":"Total Tokens"}),o&&o.qaData&&Array.isArray(o.qaData)&&n.jsx("div",{className:"text-xs text-orange-500 mt-1",children:"Live Session"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200 shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(md,{className:"w-6 h-6 text-blue-600"}),n.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:[d==="questions"?"Questions Generated":d==="cost"?"Cost Analysis":"Sessions Created"," - ",a==="7d"?"Last 7 Days":"Last 30 Days",a==="30d"&&n.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"(Scroll to see all days)"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:a,onChange:C=>c(C.target.value),className:"bg-white border border-gray-300 text-gray-700 px-3 py-1 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"7d",children:"7 Days"}),n.jsx("option",{value:"30d",children:"30 Days"})]}),n.jsxs("select",{value:d,onChange:C=>m(C.target.value),className:"bg-white border border-gray-300 text-gray-700 px-3 py-1 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"questions",children:"Questions"}),n.jsx("option",{value:"cost",children:"Cost"}),n.jsx("option",{value:"sessions",children:"Sessions"})]})]})]}),n.jsx("div",{className:`h-64 bg-gray-50 rounded-lg w-full ${a==="30d"?"overflow-x-auto":"overflow-hidden"}`,style:{...a==="30d"&&{scrollbarWidth:"thin",scrollbarColor:"#d1d5db #f3f4f6"}},children:n.jsxs("div",{className:"relative h-full flex items-end w-full",children:[a==="7d"&&n.jsx("div",{className:"absolute inset-0 flex items-end justify-between px-4 pb-8",children:M.values.map((C,k)=>n.jsxs("div",{className:"flex flex-col justify-end items-center h-full w-16",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-2 font-medium",children:d==="cost"?parseFloat(C).toFixed(5):C}),n.jsx("div",{className:"w-full rounded-t-lg transition-all duration-500 hover:opacity-80",style:{height:`${C/ne*180}px`,backgroundColor:M.colors[k%M.colors.length],minHeight:"4px"}}),n.jsx("div",{className:"text-xs text-gray-600 mt-2 text-center font-medium w-full truncate",children:M.labels[k]})]},k))}),a==="30d"&&n.jsx("div",{className:"flex items-end h-full gap-2 px-6 min-w-[1320px] pb-8",children:M.values.map((C,k)=>n.jsxs("div",{className:"flex flex-col justify-end items-center h-full w-14",children:[n.jsx("div",{className:"text-xs text-gray-600 mb-2 font-medium",children:d==="cost"?parseFloat(C).toFixed(5):C}),n.jsx("div",{className:"w-full rounded-t-lg transition-all duration-500 hover:opacity-80",style:{height:`${C/ne*180}px`,backgroundColor:M.colors[k%M.colors.length],minHeight:"4px"}}),n.jsx("div",{className:"text-xs text-gray-600 mt-2 text-center font-medium w-full truncate",children:M.labels[k]})]},k))})]})}),a==="30d"&&n.jsx("div",{className:"mt-2 text-center",children:n.jsx("div",{className:"text-xs text-gray-500",children:"← Scroll horizontally to see all 30 days →"})})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200 shadow-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(xr,{className:"w-6 h-6 text-blue-600"}),n.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Provider Distribution"})]}),Object.keys(fe).length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"relative w-48 h-48",children:[n.jsx("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:Object.entries(fe).map(([C,k],R)=>{const B=Object.values(fe).reduce((h,g)=>h+g,0),K=B>0?k/B*100:0,J=40,le=2*Math.PI*J,be=K/100*le,G=le-be,f=R/Object.keys(fe).length*360;return n.jsx("circle",{cx:"50",cy:"50",r:J,fill:"none",stroke:W[R%W.length],strokeWidth:"8",strokeDasharray:le,strokeDashoffset:G,transform:`rotate(${f} 50 50)`,className:"transition-all duration-500"},C)})}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Object.values(fe).reduce((C,k)=>C+k,0)}),n.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Total"})]})})]})}),n.jsx("div",{className:"grid grid-cols-2 gap-4 mt-6",children:Object.entries(fe).map(([C,k],R)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:W[R%W.length]}}),n.jsx("span",{className:"text-sm text-gray-700 font-medium",children:I(C)}),n.jsx("span",{className:"text-sm font-bold text-blue-600 ml-auto",children:k})]},C))})]}):n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("div",{className:"text-lg font-medium",children:"No provider data available"}),n.jsx("div",{className:"text-sm",children:"Generate some questions to see provider distribution"})]})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200 shadow-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(df,{className:"w-5 h-5 text-blue-600"}),n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Token Usage"})]}),n.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:U.totalTokens.toLocaleString()}),n.jsx("div",{className:"text-gray-600 font-medium",children:"Total Tokens Used"}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[n.jsx("span",{className:"text-gray-600",children:"Input Tokens"}),n.jsx("span",{className:"text-blue-600 font-semibold",children:U.inputTokens.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Output Tokens"}),n.jsx("span",{className:"text-blue-600 font-semibold",children:U.outputTokens.toLocaleString()})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200 shadow-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Os,{className:"w-5 h-5 text-green-600"}),n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Performance"})]}),n.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:U.avgQuestionsPerSession.toFixed(1)}),n.jsx("div",{className:"text-gray-600 font-medium",children:"Avg Questions/Session"}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[n.jsx("span",{className:"text-gray-600",children:"Success Rate"}),n.jsxs("span",{className:"text-green-600 font-semibold",children:[U.successRate.toFixed(1),"%"]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Avg Response Time"}),n.jsxs("span",{className:"text-blue-600 font-semibold",children:[U.avgResponseTime.toFixed(1),"s"]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200 shadow-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(md,{className:"w-5 h-5 text-purple-600"}),n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Trends"})]}),n.jsxs("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:[U.weeklyGrowth>=0?"+":"",U.weeklyGrowth.toFixed(1),"%"]}),n.jsx("div",{className:"text-gray-600 font-medium",children:"This Week"}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[n.jsx("span",{className:"text-gray-600",children:"Daily Avg"}),n.jsx("span",{className:"text-purple-600 font-semibold",children:U.dailyAverage.toFixed(0)})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Peak Day"}),n.jsx("span",{className:"text-purple-600 font-semibold",children:U.peakDay})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200 shadow-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Ad,{className:"w-5 h-5 text-blue-600"}),n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Sentiment Analysis"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:U.sentimentDistribution.positive}),n.jsx("div",{className:"text-gray-600 font-medium",children:"Positive"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:U.sentimentDistribution.negative}),n.jsx("div",{className:"text-gray-600 font-medium",children:"Negative"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-gray-600",children:U.sentimentDistribution.neutral}),n.jsx("div",{className:"text-gray-600 font-medium",children:"Neutral"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200 shadow-lg",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Os,{className:"w-5 h-5 text-orange-600"}),n.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Quality Metrics"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"GEO Score Avg"}),n.jsxs("span",{className:"text-orange-600 font-semibold",children:[U.geoScoreAverage.toFixed(1),"%"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Semantic Relevance"}),n.jsxs("span",{className:"text-orange-600 font-semibold",children:[U.semanticRelevanceAverage.toFixed(1),"%"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Vector Similarity"}),n.jsxs("span",{className:"text-orange-600 font-semibold",children:[U.vectorSimilarityAverage.toFixed(1),"%"]})]})]})]})]})]})}var Ls={},fd;function jf(){if(fd)return Ls;fd=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.parse=v,Ls.serialize=x;const l=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,o=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,c=/^[\u0020-\u003A\u003D-\u007E]*$/,d=Object.prototype.toString,m=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function v(_,F){const E=new m,$=_.length;if($<2)return E;const U=F?.decode||j;let M=0;do{const oe=_.indexOf("=",M);if(oe===-1)break;const ne=_.indexOf(";",M),me=ne===-1?$:ne;if(oe>me){M=_.lastIndexOf(";",oe-1)+1;continue}const fe=S(_,M,oe),W=y(_,oe,fe),I=_.slice(fe,W);if(E[I]===void 0){let C=S(_,oe+1,me),k=y(_,me,C);const R=U(_.slice(C,k));E[I]=R}M=me+1}while(M<$);return E}function S(_,F,E){do{const $=_.charCodeAt(F);if($!==32&&$!==9)return F}while(++F<E);return E}function y(_,F,E){for(;F>E;){const $=_.charCodeAt(--F);if($!==32&&$!==9)return F+1}return E}function x(_,F,E){const $=E?.encode||encodeURIComponent;if(!l.test(_))throw new TypeError(`argument name is invalid: ${_}`);const U=$(F);if(!o.test(U))throw new TypeError(`argument val is invalid: ${F}`);let M=_+"="+U;if(!E)return M;if(E.maxAge!==void 0){if(!Number.isInteger(E.maxAge))throw new TypeError(`option maxAge is invalid: ${E.maxAge}`);M+="; Max-Age="+E.maxAge}if(E.domain){if(!a.test(E.domain))throw new TypeError(`option domain is invalid: ${E.domain}`);M+="; Domain="+E.domain}if(E.path){if(!c.test(E.path))throw new TypeError(`option path is invalid: ${E.path}`);M+="; Path="+E.path}if(E.expires){if(!L(E.expires)||!Number.isFinite(E.expires.valueOf()))throw new TypeError(`option expires is invalid: ${E.expires}`);M+="; Expires="+E.expires.toUTCString()}if(E.httpOnly&&(M+="; HttpOnly"),E.secure&&(M+="; Secure"),E.partitioned&&(M+="; Partitioned"),E.priority)switch(typeof E.priority=="string"?E.priority.toLowerCase():void 0){case"low":M+="; Priority=Low";break;case"medium":M+="; Priority=Medium";break;case"high":M+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${E.priority}`)}if(E.sameSite)switch(typeof E.sameSite=="string"?E.sameSite.toLowerCase():E.sameSite){case!0:case"strict":M+="; SameSite=Strict";break;case"lax":M+="; SameSite=Lax";break;case"none":M+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${E.sameSite}`)}return M}function j(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function L(_){return d.call(_)==="[object Date]"}return Ls}jf();var pd="popstate";function Nf(l={}){function o(c,d){let{pathname:m,search:v,hash:S}=c.location;return si("",{pathname:m,search:v,hash:S},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function a(c,d){return typeof d=="string"?d:$s(d)}return Af(o,a,null,l)}function We(l,o){if(l===!1||l===null||typeof l>"u")throw new Error(o)}function Gt(l,o){if(!l){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function Cf(){return Math.random().toString(36).substring(2,10)}function gd(l,o){return{usr:l.state,key:l.key,idx:o}}function si(l,o,a=null,c){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof o=="string"?Vr(o):o,state:a,key:o&&o.key||c||Cf()}}function $s({pathname:l="/",search:o="",hash:a=""}){return o&&o!=="?"&&(l+=o.charAt(0)==="?"?o:"?"+o),a&&a!=="#"&&(l+=a.charAt(0)==="#"?a:"#"+a),l}function Vr(l){let o={};if(l){let a=l.indexOf("#");a>=0&&(o.hash=l.substring(a),l=l.substring(0,a));let c=l.indexOf("?");c>=0&&(o.search=l.substring(c),l=l.substring(0,c)),l&&(o.pathname=l)}return o}function Af(l,o,a,c={}){let{window:d=document.defaultView,v5Compat:m=!1}=c,v=d.history,S="POP",y=null,x=j();x==null&&(x=0,v.replaceState({...v.state,idx:x},""));function j(){return(v.state||{idx:null}).idx}function L(){S="POP";let U=j(),M=U==null?null:U-x;x=U,y&&y({action:S,location:$.location,delta:M})}function _(U,M){S="PUSH";let oe=si($.location,U,M);x=j()+1;let ne=gd(oe,x),me=$.createHref(oe);try{v.pushState(ne,"",me)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;d.location.assign(me)}m&&y&&y({action:S,location:$.location,delta:1})}function F(U,M){S="REPLACE";let oe=si($.location,U,M);x=j();let ne=gd(oe,x),me=$.createHref(oe);v.replaceState(ne,"",me),m&&y&&y({action:S,location:$.location,delta:0})}function E(U){return Ef(U)}let $={get action(){return S},get location(){return l(d,v)},listen(U){if(y)throw new Error("A history only accepts one active listener");return d.addEventListener(pd,L),y=U,()=>{d.removeEventListener(pd,L),y=null}},createHref(U){return o(d,U)},createURL:E,encodeLocation(U){let M=E(U);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:_,replace:F,go(U){return v.go(U)}};return $}function Ef(l,o=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),We(a,"No window.location.(origin|href) available to create URL");let c=typeof l=="string"?l:$s(l);return c=c.replace(/ $/,"%20"),!o&&c.startsWith("//")&&(c=a+c),new URL(c,a)}function Ld(l,o,a="/"){return Tf(l,o,a,!1)}function Tf(l,o,a,c){let d=typeof o=="string"?Vr(o):o,m=Rn(d.pathname||"/",a);if(m==null)return null;let v=Pd(l);Df(v);let S=null;for(let y=0;S==null&&y<v.length;++y){let x=zf(m);S=$f(v[y],x,c)}return S}function Pd(l,o=[],a=[],c=""){let d=(m,v,S)=>{let y={relativePath:S===void 0?m.path||"":S,caseSensitive:m.caseSensitive===!0,childrenIndex:v,route:m};y.relativePath.startsWith("/")&&(We(y.relativePath.startsWith(c),`Absolute route path "${y.relativePath}" nested under path "${c}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(c.length));let x=In([c,y.relativePath]),j=a.concat(y);m.children&&m.children.length>0&&(We(m.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),Pd(m.children,o,j,x)),!(m.path==null&&!m.index)&&o.push({path:x,score:Mf(x,m.index),routesMeta:j})};return l.forEach((m,v)=>{if(m.path===""||!m.path?.includes("?"))d(m,v);else for(let S of Id(m.path))d(m,v,S)}),o}function Id(l){let o=l.split("/");if(o.length===0)return[];let[a,...c]=o,d=a.endsWith("?"),m=a.replace(/\?$/,"");if(c.length===0)return d?[m,""]:[m];let v=Id(c.join("/")),S=[];return S.push(...v.map(y=>y===""?m:[m,y].join("/"))),d&&S.push(...v),S.map(y=>l.startsWith("/")&&y===""?"/":y)}function Df(l){l.sort((o,a)=>o.score!==a.score?a.score-o.score:Of(o.routesMeta.map(c=>c.childrenIndex),a.routesMeta.map(c=>c.childrenIndex)))}var Lf=/^:[\w-]+$/,Pf=3,If=2,Rf=1,_f=10,Ff=-2,yd=l=>l==="*";function Mf(l,o){let a=l.split("/"),c=a.length;return a.some(yd)&&(c+=Ff),o&&(c+=If),a.filter(d=>!yd(d)).reduce((d,m)=>d+(Lf.test(m)?Pf:m===""?Rf:_f),c)}function Of(l,o){return l.length===o.length&&l.slice(0,-1).every((c,d)=>c===o[d])?l[l.length-1]-o[o.length-1]:0}function $f(l,o,a=!1){let{routesMeta:c}=l,d={},m="/",v=[];for(let S=0;S<c.length;++S){let y=c[S],x=S===c.length-1,j=m==="/"?o:o.slice(m.length)||"/",L=so({path:y.relativePath,caseSensitive:y.caseSensitive,end:x},j),_=y.route;if(!L&&x&&a&&!c[c.length-1].route.index&&(L=so({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},j)),!L)return null;Object.assign(d,L.params),v.push({params:d,pathname:In([m,L.pathname]),pathnameBase:Vf(In([m,L.pathnameBase])),route:_}),L.pathnameBase!=="/"&&(m=In([m,L.pathnameBase]))}return v}function so(l,o){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[a,c]=Uf(l.path,l.caseSensitive,l.end),d=o.match(a);if(!d)return null;let m=d[0],v=m.replace(/(.)\/+$/,"$1"),S=d.slice(1);return{params:c.reduce((x,{paramName:j,isOptional:L},_)=>{if(j==="*"){let E=S[_]||"";v=m.slice(0,m.length-E.length).replace(/(.)\/+$/,"$1")}const F=S[_];return L&&!F?x[j]=void 0:x[j]=(F||"").replace(/%2F/g,"/"),x},{}),pathname:m,pathnameBase:v,pattern:l}}function Uf(l,o=!1,a=!0){Gt(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let c=[],d="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(v,S,y)=>(c.push({paramName:S,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return l.endsWith("*")?(c.push({paramName:"*"}),d+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?d+="\\/*$":l!==""&&l!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,o?void 0:"i"),c]}function zf(l){try{return l.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return Gt(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${o}).`),l}}function Rn(l,o){if(o==="/")return l;if(!l.toLowerCase().startsWith(o.toLowerCase()))return null;let a=o.endsWith("/")?o.length-1:o.length,c=l.charAt(a);return c&&c!=="/"?null:l.slice(a)||"/"}function Hf(l,o="/"){let{pathname:a,search:c="",hash:d=""}=typeof l=="string"?Vr(l):l;return{pathname:a?a.startsWith("/")?a:Bf(a,o):o,search:Qf(c),hash:Wf(d)}}function Bf(l,o){let a=o.replace(/\/+$/,"").split("/");return l.split("/").forEach(d=>{d===".."?a.length>1&&a.pop():d!=="."&&a.push(d)}),a.length>1?a.join("/"):"/"}function Xl(l,o,a,c){return`Cannot include a '${l}' character in a manually specified \`to.${o}\` field [${JSON.stringify(c)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qf(l){return l.filter((o,a)=>a===0||o.route.path&&o.route.path.length>0)}function ui(l){let o=qf(l);return o.map((a,c)=>c===o.length-1?a.pathname:a.pathnameBase)}function di(l,o,a,c=!1){let d;typeof l=="string"?d=Vr(l):(d={...l},We(!d.pathname||!d.pathname.includes("?"),Xl("?","pathname","search",d)),We(!d.pathname||!d.pathname.includes("#"),Xl("#","pathname","hash",d)),We(!d.search||!d.search.includes("#"),Xl("#","search","hash",d)));let m=l===""||d.pathname==="",v=m?"/":d.pathname,S;if(v==null)S=a;else{let L=o.length-1;if(!c&&v.startsWith("..")){let _=v.split("/");for(;_[0]==="..";)_.shift(),L-=1;d.pathname=_.join("/")}S=L>=0?o[L]:"/"}let y=Hf(d,S),x=v&&v!=="/"&&v.endsWith("/"),j=(m||v===".")&&a.endsWith("/");return!y.pathname.endsWith("/")&&(x||j)&&(y.pathname+="/"),y}var In=l=>l.join("/").replace(/\/\/+/g,"/"),Vf=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),Qf=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,Wf=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l;function Gf(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}var Rd=["POST","PUT","PATCH","DELETE"];new Set(Rd);var Kf=["GET",...Rd];new Set(Kf);var Qr=w.createContext(null);Qr.displayName="DataRouter";var ao=w.createContext(null);ao.displayName="DataRouterState";var _d=w.createContext({isTransitioning:!1});_d.displayName="ViewTransition";var Jf=w.createContext(new Map);Jf.displayName="Fetchers";var Yf=w.createContext(null);Yf.displayName="Await";var cn=w.createContext(null);cn.displayName="Navigation";var Us=w.createContext(null);Us.displayName="Location";var bn=w.createContext({outlet:null,matches:[],isDataRoute:!1});bn.displayName="Route";var mi=w.createContext(null);mi.displayName="RouteError";function Zf(l,{relative:o}={}){We(Wr(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:c}=w.useContext(cn),{hash:d,pathname:m,search:v}=zs(l,{relative:o}),S=m;return a!=="/"&&(S=m==="/"?a:In([a,m])),c.createHref({pathname:S,search:v,hash:d})}function Wr(){return w.useContext(Us)!=null}function un(){return We(Wr(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Us).location}var Fd="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Md(l){w.useContext(cn).static||w.useLayoutEffect(l)}function dn(){let{isDataRoute:l}=w.useContext(bn);return l?dp():Xf()}function Xf(){We(Wr(),"useNavigate() may be used only in the context of a <Router> component.");let l=w.useContext(Qr),{basename:o,navigator:a}=w.useContext(cn),{matches:c}=w.useContext(bn),{pathname:d}=un(),m=JSON.stringify(ui(c)),v=w.useRef(!1);return Md(()=>{v.current=!0}),w.useCallback((y,x={})=>{if(Gt(v.current,Fd),!v.current)return;if(typeof y=="number"){a.go(y);return}let j=di(y,JSON.parse(m),d,x.relative==="path");l==null&&o!=="/"&&(j.pathname=j.pathname==="/"?o:In([o,j.pathname])),(x.replace?a.replace:a.push)(j,x.state,x)},[o,a,m,d,l])}w.createContext(null);function zs(l,{relative:o}={}){let{matches:a}=w.useContext(bn),{pathname:c}=un(),d=JSON.stringify(ui(a));return w.useMemo(()=>di(l,JSON.parse(d),c,o==="path"),[l,d,c,o])}function ep(l,o){return Od(l,o)}function Od(l,o,a,c){We(Wr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=w.useContext(cn),{matches:m}=w.useContext(bn),v=m[m.length-1],S=v?v.params:{},y=v?v.pathname:"/",x=v?v.pathnameBase:"/",j=v&&v.route;{let M=j&&j.path||"";$d(y,!j||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let L=un(),_;if(o){let M=typeof o=="string"?Vr(o):o;We(x==="/"||M.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${M.pathname}" was given in the \`location\` prop.`),_=M}else _=L;let F=_.pathname||"/",E=F;if(x!=="/"){let M=x.replace(/^\//,"").split("/");E="/"+F.replace(/^\//,"").split("/").slice(M.length).join("/")}let $=Ld(l,{pathname:E});Gt(j||$!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),Gt($==null||$[$.length-1].route.element!==void 0||$[$.length-1].route.Component!==void 0||$[$.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=ap($&&$.map(M=>Object.assign({},M,{params:Object.assign({},S,M.params),pathname:In([x,d.encodeLocation?d.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?x:In([x,d.encodeLocation?d.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),m,a,c);return o&&U?w.createElement(Us.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},U):U}function tp(){let l=up(),o=Gf(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),a=l instanceof Error?l.stack:null,c="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:c},m={padding:"2px 4px",backgroundColor:c},v=null;return console.error("Error handled by React Router default ErrorBoundary:",l),v=w.createElement(w.Fragment,null,w.createElement("p",null,"💿 Hey developer 👋"),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:m},"ErrorBoundary")," or"," ",w.createElement("code",{style:m},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},o),a?w.createElement("pre",{style:d},a):null,v)}var np=w.createElement(tp,null),rp=class extends w.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,o){return o.location!==l.location||o.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:o.error,location:o.location,revalidation:l.revalidation||o.revalidation}}componentDidCatch(l,o){console.error("React Router caught the following error during render",l,o)}render(){return this.state.error!==void 0?w.createElement(bn.Provider,{value:this.props.routeContext},w.createElement(mi.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function sp({routeContext:l,match:o,children:a}){let c=w.useContext(Qr);return c&&c.static&&c.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=o.route.id),w.createElement(bn.Provider,{value:l},a)}function ap(l,o=[],a=null,c=null){if(l==null){if(!a)return null;if(a.errors)l=a.matches;else if(o.length===0&&!a.initialized&&a.matches.length>0)l=a.matches;else return null}let d=l,m=a?.errors;if(m!=null){let y=d.findIndex(x=>x.route.id&&m?.[x.route.id]!==void 0);We(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(m).join(",")}`),d=d.slice(0,Math.min(d.length,y+1))}let v=!1,S=-1;if(a)for(let y=0;y<d.length;y++){let x=d[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(S=y),x.route.id){let{loaderData:j,errors:L}=a,_=x.route.loader&&!j.hasOwnProperty(x.route.id)&&(!L||L[x.route.id]===void 0);if(x.route.lazy||_){v=!0,S>=0?d=d.slice(0,S+1):d=[d[0]];break}}}return d.reduceRight((y,x,j)=>{let L,_=!1,F=null,E=null;a&&(L=m&&x.route.id?m[x.route.id]:void 0,F=x.route.errorElement||np,v&&(S<0&&j===0?($d("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,E=null):S===j&&(_=!0,E=x.route.hydrateFallbackElement||null)));let $=o.concat(d.slice(0,j+1)),U=()=>{let M;return L?M=F:_?M=E:x.route.Component?M=w.createElement(x.route.Component,null):x.route.element?M=x.route.element:M=y,w.createElement(sp,{match:x,routeContext:{outlet:y,matches:$,isDataRoute:a!=null},children:M})};return a&&(x.route.ErrorBoundary||x.route.errorElement||j===0)?w.createElement(rp,{location:a.location,revalidation:a.revalidation,component:F,error:L,children:U(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):U()},null)}function hi(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function op(l){let o=w.useContext(Qr);return We(o,hi(l)),o}function lp(l){let o=w.useContext(ao);return We(o,hi(l)),o}function ip(l){let o=w.useContext(bn);return We(o,hi(l)),o}function fi(l){let o=ip(l),a=o.matches[o.matches.length-1];return We(a.route.id,`${l} can only be used on routes that contain a unique "id"`),a.route.id}function cp(){return fi("useRouteId")}function up(){let l=w.useContext(mi),o=lp("useRouteError"),a=fi("useRouteError");return l!==void 0?l:o.errors?.[a]}function dp(){let{router:l}=op("useNavigate"),o=fi("useNavigate"),a=w.useRef(!1);return Md(()=>{a.current=!0}),w.useCallback(async(d,m={})=>{Gt(a.current,Fd),a.current&&(typeof d=="number"?l.navigate(d):await l.navigate(d,{fromRouteId:o,...m}))},[l,o])}var xd={};function $d(l,o,a){!o&&!xd[l]&&(xd[l]=!0,Gt(!1,a))}w.memo(mp);function mp({routes:l,future:o,state:a}){return Od(l,void 0,a,o)}function vd({to:l,replace:o,state:a,relative:c}){We(Wr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:d}=w.useContext(cn);Gt(!d,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:m}=w.useContext(bn),{pathname:v}=un(),S=dn(),y=di(l,ui(m),v,c==="path"),x=JSON.stringify(y);return w.useEffect(()=>{S(JSON.parse(x),{replace:o,state:a,relative:c})},[S,x,c,o,a]),null}function St(l){We(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hp({basename:l="/",children:o=null,location:a,navigationType:c="POP",navigator:d,static:m=!1}){We(!Wr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let v=l.replace(/^\/*/,"/"),S=w.useMemo(()=>({basename:v,navigator:d,static:m,future:{}}),[v,d,m]);typeof a=="string"&&(a=Vr(a));let{pathname:y="/",search:x="",hash:j="",state:L=null,key:_="default"}=a,F=w.useMemo(()=>{let E=Rn(y,v);return E==null?null:{location:{pathname:E,search:x,hash:j,state:L,key:_},navigationType:c}},[v,y,x,j,L,_,c]);return Gt(F!=null,`<Router basename="${v}"> is not able to match the URL "${y}${x}${j}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:w.createElement(cn.Provider,{value:S},w.createElement(Us.Provider,{children:o,value:F}))}function wd({children:l,location:o}){return ep(ai(l),o)}function ai(l,o=[]){let a=[];return w.Children.forEach(l,(c,d)=>{if(!w.isValidElement(c))return;let m=[...o,d];if(c.type===w.Fragment){a.push.apply(a,ai(c.props.children,m));return}We(c.type===St,`[${typeof c.type=="string"?c.type:c.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),We(!c.props.index||!c.props.children,"An index route cannot have child routes.");let v={id:c.props.id||m.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,loader:c.props.loader,action:c.props.action,hydrateFallbackElement:c.props.hydrateFallbackElement,HydrateFallback:c.props.HydrateFallback,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.hasErrorBoundary===!0||c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(v.children=ai(c.props.children,m)),a.push(v)}),a}var to="get",no="application/x-www-form-urlencoded";function oo(l){return l!=null&&typeof l.tagName=="string"}function fp(l){return oo(l)&&l.tagName.toLowerCase()==="button"}function pp(l){return oo(l)&&l.tagName.toLowerCase()==="form"}function gp(l){return oo(l)&&l.tagName.toLowerCase()==="input"}function yp(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function xp(l,o){return l.button===0&&(!o||o==="_self")&&!yp(l)}function oi(l=""){return new URLSearchParams(typeof l=="string"||Array.isArray(l)||l instanceof URLSearchParams?l:Object.keys(l).reduce((o,a)=>{let c=l[a];return o.concat(Array.isArray(c)?c.map(d=>[a,d]):[[a,c]])},[]))}function vp(l,o){let a=oi(l);return o&&o.forEach((c,d)=>{a.has(d)||o.getAll(d).forEach(m=>{a.append(d,m)})}),a}var Za=null;function wp(){if(Za===null)try{new FormData(document.createElement("form"),0),Za=!1}catch{Za=!0}return Za}var bp=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ei(l){return l!=null&&!bp.has(l)?(Gt(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${no}"`),null):l}function Sp(l,o){let a,c,d,m,v;if(pp(l)){let S=l.getAttribute("action");c=S?Rn(S,o):null,a=l.getAttribute("method")||to,d=ei(l.getAttribute("enctype"))||no,m=new FormData(l)}else if(fp(l)||gp(l)&&(l.type==="submit"||l.type==="image")){let S=l.form;if(S==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=l.getAttribute("formaction")||S.getAttribute("action");if(c=y?Rn(y,o):null,a=l.getAttribute("formmethod")||S.getAttribute("method")||to,d=ei(l.getAttribute("formenctype"))||ei(S.getAttribute("enctype"))||no,m=new FormData(S,l),!wp()){let{name:x,type:j,value:L}=l;if(j==="image"){let _=x?`${x}.`:"";m.append(`${_}x`,"0"),m.append(`${_}y`,"0")}else x&&m.append(x,L)}}else{if(oo(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=to,c=null,d=no,v=l}return m&&d==="text/plain"&&(v=m,m=void 0),{action:c,method:a.toLowerCase(),encType:d,formData:m,body:v}}function pi(l,o){if(l===!1||l===null||typeof l>"u")throw new Error(o)}async function kp(l,o){if(l.id in o)return o[l.id];try{let a=await import(l.module);return o[l.id]=a,a}catch(a){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jp(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function Np(l,o,a){let c=await Promise.all(l.map(async d=>{let m=o.routes[d.route.id];if(m){let v=await kp(m,a);return v.links?v.links():[]}return[]}));return Tp(c.flat(1).filter(jp).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function bd(l,o,a,c,d,m){let v=(y,x)=>a[x]?y.route.id!==a[x].route.id:!0,S=(y,x)=>a[x].pathname!==y.pathname||a[x].route.path?.endsWith("*")&&a[x].params["*"]!==y.params["*"];return m==="assets"?o.filter((y,x)=>v(y,x)||S(y,x)):m==="data"?o.filter((y,x)=>{let j=c.routes[y.route.id];if(!j||!j.hasLoader)return!1;if(v(y,x)||S(y,x))return!0;if(y.route.shouldRevalidate){let L=y.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof L=="boolean")return L}return!0}):[]}function Cp(l,o,{includeHydrateFallback:a}={}){return Ap(l.map(c=>{let d=o.routes[c.route.id];if(!d)return[];let m=[d.module];return d.clientActionModule&&(m=m.concat(d.clientActionModule)),d.clientLoaderModule&&(m=m.concat(d.clientLoaderModule)),a&&d.hydrateFallbackModule&&(m=m.concat(d.hydrateFallbackModule)),d.imports&&(m=m.concat(d.imports)),m}).flat(1))}function Ap(l){return[...new Set(l)]}function Ep(l){let o={},a=Object.keys(l).sort();for(let c of a)o[c]=l[c];return o}function Tp(l,o){let a=new Set;return new Set(o),l.reduce((c,d)=>{let m=JSON.stringify(Ep(d));return a.has(m)||(a.add(m),c.push({key:m,link:d})),c},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Dp=new Set([100,101,204,205]);function Lp(l,o){let a=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return a.pathname==="/"?a.pathname="_root.data":o&&Rn(a.pathname,o)==="/"?a.pathname=`${o.replace(/\/$/,"")}/_root.data`:a.pathname=`${a.pathname.replace(/\/$/,"")}.data`,a}function Ud(){let l=w.useContext(Qr);return pi(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function Pp(){let l=w.useContext(ao);return pi(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var gi=w.createContext(void 0);gi.displayName="FrameworkContext";function zd(){let l=w.useContext(gi);return pi(l,"You must render this element inside a <HydratedRouter> element"),l}function Ip(l,o){let a=w.useContext(gi),[c,d]=w.useState(!1),[m,v]=w.useState(!1),{onFocus:S,onBlur:y,onMouseEnter:x,onMouseLeave:j,onTouchStart:L}=o,_=w.useRef(null);w.useEffect(()=>{if(l==="render"&&v(!0),l==="viewport"){let $=M=>{M.forEach(oe=>{v(oe.isIntersecting)})},U=new IntersectionObserver($,{threshold:.5});return _.current&&U.observe(_.current),()=>{U.disconnect()}}},[l]),w.useEffect(()=>{if(c){let $=setTimeout(()=>{v(!0)},100);return()=>{clearTimeout($)}}},[c]);let F=()=>{d(!0)},E=()=>{d(!1),v(!1)};return a?l!=="intent"?[m,_,{}]:[m,_,{onFocus:Ps(S,F),onBlur:Ps(y,E),onMouseEnter:Ps(x,F),onMouseLeave:Ps(j,E),onTouchStart:Ps(L,F)}]:[!1,_,{}]}function Ps(l,o){return a=>{l&&l(a),a.defaultPrevented||o(a)}}function Rp({page:l,...o}){let{router:a}=Ud(),c=w.useMemo(()=>Ld(a.routes,l,a.basename),[a.routes,l,a.basename]);return c?w.createElement(Fp,{page:l,matches:c,...o}):null}function _p(l){let{manifest:o,routeModules:a}=zd(),[c,d]=w.useState([]);return w.useEffect(()=>{let m=!1;return Np(l,o,a).then(v=>{m||d(v)}),()=>{m=!0}},[l,o,a]),c}function Fp({page:l,matches:o,...a}){let c=un(),{manifest:d,routeModules:m}=zd(),{basename:v}=Ud(),{loaderData:S,matches:y}=Pp(),x=w.useMemo(()=>bd(l,o,y,d,c,"data"),[l,o,y,d,c]),j=w.useMemo(()=>bd(l,o,y,d,c,"assets"),[l,o,y,d,c]),L=w.useMemo(()=>{if(l===c.pathname+c.search+c.hash)return[];let E=new Set,$=!1;if(o.forEach(M=>{let oe=d.routes[M.route.id];!oe||!oe.hasLoader||(!x.some(ne=>ne.route.id===M.route.id)&&M.route.id in S&&m[M.route.id]?.shouldRevalidate||oe.hasClientLoader?$=!0:E.add(M.route.id))}),E.size===0)return[];let U=Lp(l,v);return $&&E.size>0&&U.searchParams.set("_routes",o.filter(M=>E.has(M.route.id)).map(M=>M.route.id).join(",")),[U.pathname+U.search]},[v,S,c,d,x,o,l,m]),_=w.useMemo(()=>Cp(j,d),[j,d]),F=_p(j);return w.createElement(w.Fragment,null,L.map(E=>w.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...a})),_.map(E=>w.createElement("link",{key:E,rel:"modulepreload",href:E,...a})),F.map(({key:E,link:$})=>w.createElement("link",{key:E,...$})))}function Mp(...l){return o=>{l.forEach(a=>{typeof a=="function"?a(o):a!=null&&(a.current=o)})}}var Hd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Hd&&(window.__reactRouterVersion="7.6.3")}catch{}function Op({basename:l,children:o,window:a}){let c=w.useRef();c.current==null&&(c.current=Nf({window:a,v5Compat:!0}));let d=c.current,[m,v]=w.useState({action:d.action,location:d.location}),S=w.useCallback(y=>{w.startTransition(()=>v(y))},[v]);return w.useLayoutEffect(()=>d.listen(S),[d,S]),w.createElement(hp,{basename:l,children:o,location:m.location,navigationType:m.action,navigator:d})}var Bd=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qd=w.forwardRef(function({onClick:o,discover:a="render",prefetch:c="none",relative:d,reloadDocument:m,replace:v,state:S,target:y,to:x,preventScrollReset:j,viewTransition:L,..._},F){let{basename:E}=w.useContext(cn),$=typeof x=="string"&&Bd.test(x),U,M=!1;if(typeof x=="string"&&$&&(U=x,Hd))try{let k=new URL(window.location.href),R=x.startsWith("//")?new URL(k.protocol+x):new URL(x),B=Rn(R.pathname,E);R.origin===k.origin&&B!=null?x=B+R.search+R.hash:M=!0}catch{Gt(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let oe=Zf(x,{relative:d}),[ne,me,fe]=Ip(c,_),W=Hp(x,{replace:v,state:S,target:y,preventScrollReset:j,relative:d,viewTransition:L});function I(k){o&&o(k),k.defaultPrevented||W(k)}let C=w.createElement("a",{..._,...fe,href:U||oe,onClick:M||m?o:I,ref:Mp(F,me),target:y,"data-discover":!$&&a==="render"?"true":void 0});return ne&&!$?w.createElement(w.Fragment,null,C,w.createElement(Rp,{page:oe})):C});qd.displayName="Link";var $p=w.forwardRef(function({"aria-current":o="page",caseSensitive:a=!1,className:c="",end:d=!1,style:m,to:v,viewTransition:S,children:y,...x},j){let L=zs(v,{relative:x.relative}),_=un(),F=w.useContext(ao),{navigator:E,basename:$}=w.useContext(cn),U=F!=null&&Gp(L)&&S===!0,M=E.encodeLocation?E.encodeLocation(L).pathname:L.pathname,oe=_.pathname,ne=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;a||(oe=oe.toLowerCase(),ne=ne?ne.toLowerCase():null,M=M.toLowerCase()),ne&&$&&(ne=Rn(ne,$)||ne);const me=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let fe=oe===M||!d&&oe.startsWith(M)&&oe.charAt(me)==="/",W=ne!=null&&(ne===M||!d&&ne.startsWith(M)&&ne.charAt(M.length)==="/"),I={isActive:fe,isPending:W,isTransitioning:U},C=fe?o:void 0,k;typeof c=="function"?k=c(I):k=[c,fe?"active":null,W?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let R=typeof m=="function"?m(I):m;return w.createElement(qd,{...x,"aria-current":C,className:k,ref:j,style:R,to:v,viewTransition:S},typeof y=="function"?y(I):y)});$p.displayName="NavLink";var Up=w.forwardRef(({discover:l="render",fetcherKey:o,navigate:a,reloadDocument:c,replace:d,state:m,method:v=to,action:S,onSubmit:y,relative:x,preventScrollReset:j,viewTransition:L,..._},F)=>{let E=Qp(),$=Wp(S,{relative:x}),U=v.toLowerCase()==="get"?"get":"post",M=typeof S=="string"&&Bd.test(S),oe=ne=>{if(y&&y(ne),ne.defaultPrevented)return;ne.preventDefault();let me=ne.nativeEvent.submitter,fe=me?.getAttribute("formmethod")||v;E(me||ne.currentTarget,{fetcherKey:o,method:fe,navigate:a,replace:d,state:m,relative:x,preventScrollReset:j,viewTransition:L})};return w.createElement("form",{ref:F,method:U,action:$,onSubmit:c?y:oe,..._,"data-discover":!M&&l==="render"?"true":void 0})});Up.displayName="Form";function zp(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Vd(l){let o=w.useContext(Qr);return We(o,zp(l)),o}function Hp(l,{target:o,replace:a,state:c,preventScrollReset:d,relative:m,viewTransition:v}={}){let S=dn(),y=un(),x=zs(l,{relative:m});return w.useCallback(j=>{if(xp(j,o)){j.preventDefault();let L=a!==void 0?a:$s(y)===$s(x);S(l,{replace:L,state:c,preventScrollReset:d,relative:m,viewTransition:v})}},[y,S,x,a,c,o,l,d,m,v])}function Bp(l){Gt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let o=w.useRef(oi(l)),a=w.useRef(!1),c=un(),d=w.useMemo(()=>vp(c.search,a.current?null:o.current),[c.search]),m=dn(),v=w.useCallback((S,y)=>{const x=oi(typeof S=="function"?S(d):S);a.current=!0,m("?"+x,y)},[m,d]);return[d,v]}var qp=0,Vp=()=>`__${String(++qp)}__`;function Qp(){let{router:l}=Vd("useSubmit"),{basename:o}=w.useContext(cn),a=cp();return w.useCallback(async(c,d={})=>{let{action:m,method:v,encType:S,formData:y,body:x}=Sp(c,o);if(d.navigate===!1){let j=d.fetcherKey||Vp();await l.fetch(j,a,d.action||m,{preventScrollReset:d.preventScrollReset,formData:y,body:x,formMethod:d.method||v,formEncType:d.encType||S,flushSync:d.flushSync})}else await l.navigate(d.action||m,{preventScrollReset:d.preventScrollReset,formData:y,body:x,formMethod:d.method||v,formEncType:d.encType||S,replace:d.replace,state:d.state,fromRouteId:a,flushSync:d.flushSync,viewTransition:d.viewTransition})},[l,o,a])}function Wp(l,{relative:o}={}){let{basename:a}=w.useContext(cn),c=w.useContext(bn);We(c,"useFormAction must be used inside a RouteContext");let[d]=c.matches.slice(-1),m={...zs(l||".",{relative:o})},v=un();if(l==null){m.search=v.search;let S=new URLSearchParams(m.search),y=S.getAll("index");if(y.some(j=>j==="")){S.delete("index"),y.filter(L=>L).forEach(L=>S.append("index",L));let j=S.toString();m.search=j?`?${j}`:""}}return(!l||l===".")&&d.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(m.pathname=m.pathname==="/"?a:In([a,m.pathname])),$s(m)}function Gp(l,o={}){let a=w.useContext(_d);We(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:c}=Vd("useViewTransitionState"),d=zs(l,{relative:o.relative});if(!a.isTransitioning)return!1;let m=Rn(a.currentLocation.pathname,c)||a.currentLocation.pathname,v=Rn(a.nextLocation.pathname,c)||a.nextLocation.pathname;return so(d.pathname,v)!=null||so(d.pathname,m)!=null}[...Dp];const Kp={isAuthenticated:!1,user:null,isLoading:!0,error:null};function Jp(l,o){switch(o.type){case"AUTH_START":return{...l,isLoading:!0,error:null};case"AUTH_SUCCESS":return{...l,isAuthenticated:!0,user:o.payload.user,isLoading:!1,error:null};case"AUTH_FAILURE":return{...l,isAuthenticated:!1,user:null,isLoading:!1,error:o.payload};case"AUTH_LOGOUT":return{...l,isAuthenticated:!1,user:null,isLoading:!1,error:null};case"CLEAR_ERROR":return{...l,error:null};default:return l}}const Qd=w.createContext(void 0);function Yp({children:l}){const[o,a]=w.useReducer(Jp,Kp);w.useEffect(()=>{o.isAuthenticated&&o.user&&!o.isLoading&&console.log("🔐 AuthContext: User authenticated, should redirect to overview")},[o.isAuthenticated,o.user,o.isLoading]),w.useEffect(()=>{(async()=>{try{console.log("🔐 AuthContext: Checking authentication status on mount..."),a({type:"AUTH_START"});const x=new Date,j=Te.getExpiresAt();if(j&&new Date(j)<=x){console.log("🔐 AuthContext: Token expired, clearing stale tokens"),Te.clearTokens(),a({type:"AUTH_FAILURE",payload:null});return}if(Te.isAuthenticated()){console.log("🔐 AuthContext: User is authenticated, getting user info...");const L=await Te.getCurrentUser();if(L){console.log("🔐 AuthContext: User info retrieved, dispatching AUTH_SUCCESS");try{localStorage.setItem("user",JSON.stringify(L)),console.log("🔐 AuthContext: User data stored in localStorage on startup:",L)}catch(_){console.warn("🔐 AuthContext: Failed to store user data in localStorage on startup:",_)}a({type:"AUTH_SUCCESS",payload:{user:L,token:Te.getAccessToken()}})}else console.log("🔐 AuthContext: Failed to get user info, clearing tokens"),Te.clearTokens(),a({type:"AUTH_FAILURE",payload:"Failed to get user information"})}else console.log("🔐 AuthContext: User is not authenticated"),a({type:"AUTH_FAILURE",payload:null})}catch(x){console.error("🔐 AuthContext: Auth check error:",x),Te.clearTokens(),a({type:"AUTH_FAILURE",payload:x instanceof Error?x.message:"Authentication failed"})}})()},[]);const S={...o,login:async(y="microsoft",x)=>{try{console.log("🔐 AuthContext: Starting login with method:",y),console.log("🔐 AuthContext: Clearing stale authentication data..."),Te.clearTokens(),["llm_qa_current_session","structure_last_saved","overview_market_analysis"].forEach(E=>{try{localStorage.getItem(E)&&(console.log(`🔐 AuthContext: Clearing conflicting localStorage key: ${E}`),localStorage.removeItem(E))}catch($){console.warn(`🔐 AuthContext: Could not clear ${E}:`,$)}}),a({type:"AUTH_START"});let L;switch(y){case"local":console.log("🔐 AuthContext: Using local login"),L=await Te.localLogin(x);break;case"register":console.log("🔐 AuthContext: Using register method"),L=await Te.register(x);break;case"google":console.log("🔐 AuthContext: Using Google login"),L=await Te.googleLogin();break;case"microsoft":default:console.log("🔐 AuthContext: Using Microsoft login"),L=await Te.login();break}console.log("✅ AuthContext: Login successful, dispatching AUTH_SUCCESS with:",{user:L.user,hasToken:!!L.accessToken}),console.log("🔐 AuthContext: Verifying token storage..."),await new Promise(E=>setTimeout(E,100));const _=Te.isAuthenticated(),F=Te.getAccessToken();if(console.log("🔐 AuthContext: Token verification:",{isAuthValid:_,hasStoredToken:!!F,tokenMatches:F===L.accessToken}),!_||!F){console.error("🔐 AuthContext: Token storage verification failed, clearing tokens and retrying..."),Te.clearTokens(),Te.setTokens(L.accessToken,L.refreshToken,L.expiresAt),await new Promise(U=>setTimeout(U,100));const E=Te.isAuthenticated(),$=Te.getAccessToken();if(console.log("🔐 AuthContext: Retry verification:",{isAuthValid:E,hasStoredToken:!!$,tokenMatches:$===L.accessToken}),!E||!$)throw new Error("Failed to store authentication tokens")}console.log("🔐 AuthContext: Dispatching AUTH_SUCCESS with user:",L.user);try{localStorage.setItem("user",JSON.stringify(L.user)),console.log("🔐 AuthContext: User data stored in localStorage:",L.user)}catch(E){console.warn("🔐 AuthContext: Failed to store user data in localStorage:",E)}a({type:"AUTH_SUCCESS",payload:{user:L.user,token:L.accessToken}}),console.log("🔐 AuthContext: AUTH_SUCCESS dispatched"),setTimeout(()=>{console.log("🔐 AuthContext: State after dispatch:",{isAuthenticated:Te.isAuthenticated(),hasToken:!!Te.getAccessToken(),user:Te.getCurrentUser()})},100)}catch(j){console.error("❌ AuthContext: Login failed:",j),Te.clearTokens(),a({type:"AUTH_FAILURE",payload:j instanceof Error?j.message:"Login failed"})}},logout:async()=>{try{await Te.logout();try{localStorage.removeItem("user"),console.log("🔐 AuthContext: User data cleared from localStorage on logout")}catch(y){console.warn("🔐 AuthContext: Failed to clear user data from localStorage on logout:",y)}a({type:"AUTH_LOGOUT"})}catch(y){console.error("Logout error:",y),Te.clearTokens();try{localStorage.removeItem("user"),console.log("🔐 AuthContext: User data cleared from localStorage on logout failure")}catch(x){console.warn("🔐 AuthContext: Failed to clear user data from localStorage on logout failure:",x)}a({type:"AUTH_LOGOUT"})}},clearError:()=>{a({type:"CLEAR_ERROR"})},refreshUser:async()=>{try{const y=await Te.getCurrentUser();if(y){try{localStorage.setItem("user",JSON.stringify(y)),console.log("🔐 AuthContext: User data refreshed in localStorage:",y)}catch(x){console.warn("🔐 AuthContext: Failed to store refreshed user data in localStorage:",x)}a({type:"AUTH_SUCCESS",payload:{user:y,token:Te.getAccessToken()}})}else Te.clearTokens(),a({type:"AUTH_FAILURE",payload:"Failed to refresh user information"})}catch(y){Te.clearTokens(),a({type:"AUTH_FAILURE",payload:y instanceof Error?y.message:"Failed to refresh user"})}}};return n.jsx(Qd.Provider,{value:S,children:l})}function Gr(){const l=w.useContext(Qd);if(l===void 0)throw new Error("useAuth must be used within an AuthProvider");return l}const Hs=({error:l,onClose:o,autoClose:a=!0,autoCloseDelay:c=5e3,type:d="error"})=>{const[m,v]=w.useState(!1);if(w.useEffect(()=>{if(l){if(console.log("🔔 [ErrorNotification] Error received:",l),v(!0),a){const x=setTimeout(()=>{console.log("🔔 [ErrorNotification] Auto-closing notification"),v(!1),setTimeout(o,300)},c);return()=>clearTimeout(x)}}else console.log("🔔 [ErrorNotification] No error, hiding notification"),v(!1)},[l,a,c,o]),!l)return null;const y={error:{container:"bg-red-50 border-red-200",icon:"text-red-500",title:"text-red-800",text:"text-red-700",closeButton:"text-red-400 hover:text-red-600",progressBg:"bg-red-200",progressBar:"bg-red-500",titleText:"Authentication Error"},warning:{container:"bg-yellow-50 border-yellow-200",icon:"text-yellow-500",title:"text-yellow-800",text:"text-yellow-700",closeButton:"text-yellow-400 hover:text-yellow-600",progressBg:"bg-yellow-200",progressBar:"bg-yellow-500",titleText:"Warning"},info:{container:"bg-blue-50 border-blue-200",icon:"text-blue-500",title:"text-blue-800",text:"text-blue-700",closeButton:"text-blue-400 hover:text-blue-600",progressBg:"bg-blue-200",progressBar:"bg-blue-500",titleText:"Information"}}[d];return n.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm w-full",children:n.jsx("div",{className:`transform transition-all duration-300 ease-in-out ${m?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95"}`,children:n.jsxs("div",{className:`border rounded-lg shadow-lg p-4 relative ${y.container}`,children:[n.jsx("button",{onClick:()=>{v(!1),setTimeout(o,300)},className:`absolute top-2 right-2 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 rounded-full p-1 ${y.closeButton}`,"aria-label":"Close notification",children:n.jsx(ro,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex items-start gap-3 pr-6",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Ed,{className:`w-5 h-5 ${y.icon}`})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:`text-sm font-semibold mb-1 ${y.title}`,children:y.titleText}),n.jsx("p",{className:`text-sm leading-relaxed ${y.text}`,children:l})]})]}),a&&n.jsx("div",{className:`mt-3 h-1 rounded-full overflow-hidden ${y.progressBg}`,children:n.jsx("div",{className:`h-full rounded-full transition-all duration-300 ease-linear ${y.progressBar}`,style:{width:m?"0%":"100%",transitionDuration:`${c}ms`}})})]})})})},Wd=/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]|[\u{1F900}-\u{1F9FF}]|[\u{1F018}-\u{1F270}]|[\u{238C}-\u{2454}]|[\u{20D0}-\u{20FF}]|[\u{FE00}-\u{FE0F}]|[\u{1F000}-\u{1F02F}]|[\u{1F0A0}-\u{1F0FF}]|[\u{1F100}-\u{1F64F}]|[\u{1F910}-\u{1F96B}]|[\u{1F980}-\u{1F9E0}]|[\u{1FA70}-\u{1FA93}]|[\u{1FAB0}-\u{1FABD}]|[\u{1FAC0}-\u{1FAF0}]|[\u{1FB00}-\u{1FB4B}]|[\u{1FB50}-\u{1FBAF}]|[\u{1FBB0}-\u{1FBCA}]|[\u{1FBD0}-\u{1FBEF}]|[\u{1FBF0}-\u{1FBFF}]|[\u{1FC00}-\u{1FC23}]|[\u{1FC30}-\u{1FC56}]|[\u{1FC60}-\u{1FC78}]|[\u{1FC80}-\u{1FC9C}]|[\u{1FCA0}-\u{1FCA4}]|[\u{1FCC0}-\u{1FCC4}]|[\u{1FCD0}-\u{1FCD4}]|[\u{1FCE0}-\u{1FCE4}]|[\u{1FCF0}-\u{1FCF4}]|[\u{1FD00}-\u{1FD23}]|[\u{1FD30}-\u{1FD56}]|[\u{1FD60}-\u{1FD78}]|[\u{1FD80}-\u{1FD9C}]|[\u{1FDA0}-\u{1FDA4}]|[\u{1FDB0}-\u{1FDB4}]|[\u{1FDC0}-\u{1FDC4}]|[\u{1FDD0}-\u{1FDD4}]|[\u{1FDE0}-\u{1FDE4}]|[\u{1FDF0}-\u{1FDF4}]|[\u{1FE00}-\u{1FE23}]|[\u{1FE30}-\u{1FE56}]|[\u{1FE60}-\u{1FE78}]|[\u{1FE80}-\u{1FE9C}]|[\u{1FEA0}-\u{1FEA4}]|[\u{1FEB0}-\u{1FEB4}]|[\u{1FEC0}-\u{1FEC4}]|[\u{1FED0}-\u{1FED4}]|[\u{1FEE0}-\u{1FEE4}]|[\u{1FEF0}-\u{1FEF4}]|[\u{1FF00}-\u{1FF23}]|[\u{1FF30}-\u{1FF56}]|[\u{1FF60}-\u{1FF78}]|[\u{1FF80}-\u{1FF9C}]|[\u{1FFA0}-\u{1FFA4}]|[\u{1FFB0}-\u{1FFB4}]|[\u{1FFC0}-\u{1FFC4}]|[\u{1FFD0}-\u{1FFD4}]|[\u{1FFE0}-\u{1FFE4}]|[\u{1FFF0}-\u{1FFF4}]/gu,Rs=l=>!l||typeof l!="string"?l:l.replace(Wd,""),lo=(l,o)=>{const a=Rs(l.target.value);return l.target.value=a,o(a),l.target.dispatchEvent(new Event("input",{bubbles:!0})),a},io=(l,o)=>{l.preventDefault();const a=l.clipboardData.getData("text"),c=Rs(a),d=l.target;return d.value=c,o(c),d.dispatchEvent(new Event("input",{bubbles:!0})),c},co=l=>{if(l.key==="Backspace"||l.key==="Delete"||l.key==="ArrowLeft"||l.key==="ArrowRight"||l.key==="ArrowUp"||l.key==="ArrowDown"||l.key==="Tab"||l.key==="Enter"||l.key==="Escape"||l.key==="Home"||l.key==="End"||l.key==="PageUp"||l.key==="PageDown"||l.key==="Shift"||l.key==="Control"||l.key==="Alt"||l.key==="Meta")return!0;const o=l.key;return o.length===1&&Wd.test(o)||(l.ctrlKey||l.metaKey||l.altKey)&&(o==="."||o===";"||o==="=")||o.length>1&&(o.includes("Emoji")||o.includes("emoji"))?(l.preventDefault(),!1):!0},yi=()=>{const l=w.useCallback((S,y)=>{const x=S.target,j=x.value,L=Rs(j);return L!==j?(x.value=L,y(L),x.dispatchEvent(new Event("input",{bubbles:!0})),x.dispatchEvent(new Event("change",{bubbles:!0})),L):(y(j),j)},[]),o=w.useCallback((S,y)=>{S.preventDefault();const x=S.clipboardData.getData("text"),j=Rs(x),L=S.target;return L.value=j,y(j),L.dispatchEvent(new Event("input",{bubbles:!0})),j},[]),a=w.useCallback(S=>S.key==="Backspace"||S.key==="Delete"||S.key==="ArrowLeft"||S.key==="ArrowRight"||S.key==="ArrowUp"||S.key==="ArrowDown"||S.key==="Tab"||S.key==="Enter"||S.key==="Escape"||S.key==="Home"||S.key==="End"||S.key==="PageUp"||S.key==="PageDown"||S.key==="Shift"||S.key==="Control"||S.key==="Alt"||S.key==="Meta"?!0:(S.ctrlKey||S.metaKey||S.altKey)&&(S.key==="."||S.key===";"||S.key==="=")||S.key.length>1&&(S.key.includes("Emoji")||S.key.includes("emoji"))?(S.preventDefault(),!1):!0,[]),c=w.useCallback(S=>(S.preventDefault(),!1),[]),d=w.useCallback(S=>(S.preventDefault(),!1),[]),m=w.useCallback(S=>(S.preventDefault(),!1),[]),v=w.useCallback((S,y)=>{const x=S.target,j=x.value,L=Rs(j);return y(L),L!==j&&(x.value=L,x.dispatchEvent(new Event("input",{bubbles:!0})),x.dispatchEvent(new Event("change",{bubbles:!0}))),L},[]);return{handleInputChange:l,handleInputChangeAggressive:v,handlePaste:o,handleKeyDown:a,handleCompositionStart:c,handleCompositionUpdate:d,handleCompositionEnd:m}},Ze={localPart:{minLength:1,maxLength:64,allowedChars:/^[a-zA-Z0-9._%+-]+$/,startEndRules:/^[a-zA-Z0-9].*[a-zA-Z0-9]$/,consecutiveDots:/\.{2,}/,consecutiveSpecial:/[._%+-]{2,}/},domain:{minLength:2,maxLength:63,allowedChars:/^[a-zA-Z0-9.-]+$/,startEndRules:/^[a-zA-Z0-9].*[a-zA-Z0-9]$/,consecutiveDots:/\.{2,}/,consecutiveHyphens:/-{2,}/,tldMinLength:2,tldMaxLength:10},overall:{maxLength:254}},Gd=l=>{const o=[],a=[];if(!l||typeof l!="string")return{isValid:!1,errors:["Email address is required"]};l.length>Ze.overall.maxLength&&o.push(`Email address is too long (maximum ${Ze.overall.maxLength} characters)`);const c=(l.match(/@/g)||[]).length;if(c===0?o.push("Email address must contain an @ symbol"):c>1&&o.push("Email address can only contain one @ symbol"),c!==1)return{isValid:!1,errors:o,suggestions:a};const[d,m]=l.split("@");return!d||d.length===0?o.push("Email address must have a local part (before @)"):Xp(d,o,a),!m||m.length===0?o.push("Email address must have a domain part (after @)"):eg(m,o,a),{isValid:o.length===0,errors:o,suggestions:a.length>0?a:void 0}},vn=l=>l.toLowerCase().endsWith("@gmail.com")?Zp(l):Gd(l),Zp=l=>{const o=[],a=[];if(!l||typeof l!="string")return{isValid:!1,errors:["Email address is required"]};const c=l.split("@")[0];c.length<6&&o.push("Gmail local part must be at least 6 characters long"),c.length>30&&o.push("Gmail local part cannot exceed 30 characters"),(c.startsWith(".")||c.endsWith("."))&&o.push("Gmail local part must start and end with a letter or number"),/\.{2,}/.test(c)&&o.push("Gmail local part cannot contain consecutive dots");const d=Gd(l);return o.push(...d.errors),{isValid:o.length===0,errors:o,suggestions:a.length>0?a:void 0}},Xp=(l,o,a)=>{l.length<Ze.localPart.minLength&&o.push(`Local part must be at least ${Ze.localPart.minLength} characters long`),l.length>Ze.localPart.maxLength&&o.push(`Local part cannot exceed ${Ze.localPart.maxLength} characters`),Ze.localPart.allowedChars.test(l)||(o.push("Local part can only contain letters, numbers, and the following characters: . _ % + -"),a.push("Remove any special characters that are not allowed")),Ze.localPart.startEndRules.test(l)||(o.push("Local part must start and end with a letter or number"),a.push("Ensure the local part starts and ends with a letter or number")),Ze.localPart.consecutiveDots.test(l)&&(o.push("Local part cannot contain consecutive dots"),a.push("Remove consecutive dots from the local part")),Ze.localPart.consecutiveSpecial.test(l)&&(o.push("Local part cannot contain consecutive special characters"),a.push("Remove consecutive special characters from the local part")),(l.toLowerCase()==="gmail"||l.toLowerCase()==="google")&&(o.push("This local part is not allowed by Gmail"),a.push("Choose a different local part for your email address")),["admin","administrator","postmaster","abuse","webmaster","support","info"].includes(l.toLowerCase())&&a.push("This local part might be reserved. Consider using a different one.")},eg=(l,o,a)=>{l.length<Ze.domain.minLength&&o.push(`Domain must be at least ${Ze.domain.minLength} characters long`),l.length>Ze.domain.maxLength&&o.push(`Domain cannot exceed ${Ze.domain.maxLength} characters`),Ze.domain.allowedChars.test(l)||(o.push("Domain can only contain letters, numbers, dots, and hyphens"),a.push("Remove any special characters that are not allowed in the domain")),Ze.domain.startEndRules.test(l)||(o.push("Domain must start and end with a letter or number"),a.push("Ensure the domain starts and ends with a letter or number")),Ze.domain.consecutiveDots.test(l)&&(o.push("Domain cannot contain consecutive dots"),a.push("Remove consecutive dots from the domain")),Ze.domain.consecutiveHyphens.test(l)&&(o.push("Domain cannot contain consecutive hyphens"),a.push("Remove consecutive hyphens from the domain"));const c=l.split(".");if(c.length<2)o.push("Domain must have at least one dot (e.g., .com, .org)");else{const d=c[c.length-1];d.length<Ze.domain.tldMinLength&&o.push(`Top-level domain must be at least ${Ze.domain.tldMinLength} characters long`),d.length>Ze.domain.tldMaxLength&&o.push(`Top-level domain cannot exceed ${Ze.domain.tldMaxLength} characters`),/^[a-zA-Z]+$/.test(d)||(o.push("Top-level domain can only contain letters"),a.push("Ensure the top-level domain contains only letters (e.g., .com, .org)"))}(l.toLowerCase()==="localhost"||l.toLowerCase()==="test")&&(o.push("This domain is not valid for email addresses"),a.push("Use a real domain name for your email address"))},Pn=(l,o)=>{if(o.isValid)return"";const a=o.errors[0];return{"Email address is required":"Please enter your email address","Email address must contain an @ symbol":"Please enter a valid email address","Email address can only contain one @ symbol":"Please enter a valid email address","Email address must have a local part (before @)":"Please enter a valid email address","Email address must have a domain part (after @)":"Please enter a valid email address","Local part must be at least 1 characters long":"Please enter a valid email address","Local part cannot exceed 64 characters":"Please enter a valid email address","Local part can only contain letters, numbers, and the following characters: . _ % + -":"Please enter a valid email address","Local part must start and end with a letter or number":"Please enter a valid email address","Local part cannot contain consecutive dots":"Please enter a valid email address","Local part cannot contain consecutive special characters":"Please enter a valid email address","Domain must be at least 2 characters long":"Please enter a valid email address","Domain cannot exceed 63 characters":"Please enter a valid email address","Domain can only contain letters, numbers, dots, and hyphens":"Please enter a valid email address","Domain must start and end with a letter or number":"Please enter a valid email address","Domain cannot contain consecutive dots":"Please enter a valid email address","Domain cannot contain consecutive hyphens":"Please enter a valid email address","Domain must have at least one dot (e.g., .com, .org)":"Please enter a valid email address","Top-level domain must be at least 2 characters long":"Please enter a valid email address","Top-level domain cannot exceed 10 characters":"Please enter a valid email address","Top-level domain can only contain letters":"Please enter a valid email address","Email address is too long (maximum 254 characters)":"Please enter a valid email address","Gmail local part must be at least 6 characters long":"Gmail addresses must be at least 6 characters before @","Gmail local part cannot exceed 30 characters":"Gmail addresses cannot exceed 30 characters before @","Gmail local part must start and end with a letter or number":"Gmail addresses must start and end with a letter or number"}[a]||"Please enter a valid email address"},qr=l=>{if(!l)return"";let o=l.trim().toLowerCase();return o=o.replace(/\s+/g,""),o},tg=()=>{const[l,o]=w.useState({email:"",password:""}),[a,c]=w.useState(!1),[d,m]=w.useState(!1),[v,S]=w.useState({}),[y,x]=w.useState(null),j=dn(),{login:L,error:_,clearError:F,isAuthenticated:E}=Gr(),{handleInputChangeAggressive:$,handlePaste:U,handleKeyDown:M}=yi();w.useEffect(()=>{_&&console.log("🔍 [Login] Error state changed:",_)},[_]),w.useEffect(()=>{const I=async()=>{if(E){console.log("[Login] User is authenticated via AuthContext, redirecting to overview..."),j("/overview",{replace:!0});return}if(Te.isAuthenticated()){console.log("[Login] User is authenticated via authService, redirecting to overview..."),j("/overview",{replace:!0});return}};I();const C=setInterval(I,100);return()=>{clearInterval(C),x(null),m(!1)}},[j,E]);const oe=(I,C)=>{const k={...v};if(I==="email")if(!C.trim())k.email="Please enter your email address";else{const R=vn(C);R.isValid?delete k.email:k.email=Pn(C,R)}else I==="password"&&(C.trim()?delete k.password:k.password="Please enter your password");return S(k),!k[I]},ne=I=>{const{name:C,value:k}=I.target;oe(C,k)},me=async I=>{I.preventDefault();try{S({}),x(null);const C={};if(!l.email.trim())C.email="Please enter your email address";else try{const k=vn(l.email);(!k||!k.isValid)&&(C.email=Pn(l.email,k))}catch(k){console.error("[Login] Email validation error:",k),C.email="Please enter a valid email address"}if(l.password.trim()?l.password&&l.password.length>0&&(l.password.length<8?C.password="Password must be at least 8 characters long":/[A-Z]/.test(l.password)?/[a-z]/.test(l.password)?/\d/.test(l.password)?/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(l.password)||(C.password="Password must contain at least one special character"):C.password="Password must contain at least one number":C.password="Password must contain at least one lowercase letter":C.password="Password must contain at least one uppercase letter"):C.password="Please enter your password",Object.keys(C).length>0){S(C);return}m(!0),F();try{console.log("[Login] Attempting local login with:",{email:l.email,passwordLength:l.password?l.password.length:0}),await L("local",{email:l.email,password:l.password}),console.log("[Login] Local login successful")}catch(k){console.error("[Login] Local login error:",k);let R="Invalid credentials entered please verify and try logging in";k&&typeof k=="object"&&(k.message&&typeof k.message=="string"?(k.message.includes("Network")||k.message.includes("fetch")||k.message.includes("Failed to fetch"))&&(R="Network error. Please check your connection and try again."):k.error&&typeof k.error=="string"&&(k.error.includes("Network")||k.error.includes("connection"))&&(R="Network error. Please check your connection and try again.")),console.log("[Login] Setting authentication error message:",R),console.log("[Login] Error object details:",{hasError:!!k,errorType:typeof k,errorMessage:k?.message,errorError:k?.error,stack:k?.stack}),x(typeof R=="string"?R:"Invalid credentials entered please verify and try logging in")}finally{m(!1)}}catch(C){console.error("[Login] Unexpected error during form submission:",C),x("An unexpected error occurred. Please try again."),m(!1)}},fe=async()=>{F(),x(null),m(!0);try{await L("google"),console.log("[Login] Google sign-in successful"),await new Promise(I=>setTimeout(I,500)),console.log("[Login] Authentication state after Google login:",{isAuthenticated:Te.isAuthenticated(),hasToken:!!Te.getAccessToken(),user:await Te.getCurrentUser()}),console.log("[Login] Google authentication completed, waiting for redirect...")}catch(I){console.error("[Login] Google sign-in error:",I);let C="Google sign-in failed. Please try again.";if(I&&typeof I=="object"&&I.message&&typeof I.message=="string")if(I.message.includes("cancelled")||I.message.includes("Cancelled")){m(!1);return}else I.message.includes("timed out")||I.message.includes("Timed out")?C="Google sign-in timed out. Please try again.":I.message.includes("Network")||I.message.includes("fetch")?C="Network error. Please check your connection and try again.":C=I.message;x(C)}finally{m(!1)}},W=async()=>{F(),m(!0);try{console.log("[Login] Starting Microsoft sign-in..."),console.log("[Login] Environment variables:",{clientId:"8d042e34-5a5f-40f5-a019-ee56de49b64e",tenantId:"c16b04b5-b78c-4cce-b3f8-93686f221d09",redirectUri:"http://localhost:5173/auth/callback"}),await L("microsoft"),console.log("[Login] Microsoft sign-in successful"),await new Promise(I=>setTimeout(I,500)),console.log("[Login] Authentication state after login:",{isAuthenticated:Te.isAuthenticated(),hasToken:!!Te.getAccessToken(),user:await Te.getCurrentUser()}),console.log("[Login] Microsoft authentication completed, waiting for redirect...")}catch(I){console.error("[Login] Microsoft sign-in error:",I)}finally{m(!1)}};return n.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-100 via-indigo-100 to-purple-100 px-4 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-300/30 via-indigo-300/30 to-purple-300/30"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-cyan-200/20 via-blue-200/20 to-indigo-200/20"}),n.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-gradient-to-br from-blue-400/40 to-cyan-400/40 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2 animate-pulse"}),n.jsx("div",{className:"absolute bottom-0 right-0 w-[500px] h-[500px] bg-gradient-to-tl from-purple-400/40 to-pink-400/40 rounded-full blur-3xl translate-x-1/2 translate-y-1/2 animate-pulse",style:{animationDelay:"1s"}}),n.jsx("div",{className:"absolute top-1/2 left-1/2 w-80 h-80 bg-gradient-to-r from-indigo-400/35 to-blue-400/35 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2 animate-pulse",style:{animationDelay:"2s"}}),n.jsx("div",{className:"absolute top-1/4 right-1/4 w-32 h-32 bg-gradient-to-br from-cyan-300/30 to-blue-300/30 rounded-full blur-2xl animate-bounce",style:{animationDelay:"0.5s"}}),n.jsx("div",{className:"absolute bottom-1/4 left-1/4 w-24 h-24 bg-gradient-to-br from-purple-300/30 to-pink-300/30 rounded-full blur-2xl animate-bounce",style:{animationDelay:"1.5s"}}),n.jsx("div",{className:"absolute top-3/4 left-1/3 w-20 h-20 bg-gradient-to-br from-indigo-300/30 to-purple-300/30 rounded-full blur-2xl animate-bounce",style:{animationDelay:"2.5s"}}),n.jsx("div",{className:"absolute top-1/3 left-1/6 w-16 h-16 bg-gradient-to-br from-indigo-400/25 to-purple-400/25 rotate-45 blur-xl animate-spin",style:{animationDuration:"8s"}}),n.jsx("div",{className:"absolute bottom-1/3 right-1/6 w-20 h-20 bg-gradient-to-br from-blue-400/25 to-cyan-400/25 rotate-12 blur-xl animate-spin",style:{animationDuration:"12s",animationDirection:"reverse"}}),n.jsx("div",{className:"absolute top-1/6 right-1/3 w-12 h-12 bg-gradient-to-br from-pink-400/25 to-purple-400/25 rotate-30 blur-lg animate-spin",style:{animationDuration:"6s"}}),n.jsx("div",{className:"absolute top-1/5 left-1/5 w-8 h-8 bg-gradient-to-br from-cyan-400/20 to-blue-400/20 rounded-full blur-md animate-ping",style:{animationDelay:"0s"}}),n.jsx("div",{className:"absolute top-2/5 right-1/5 w-6 h-6 bg-gradient-to-br from-purple-400/20 to-pink-400/20 rounded-full blur-md animate-ping",style:{animationDelay:"1s"}}),n.jsx("div",{className:"absolute bottom-1/5 left-2/5 w-10 h-10 bg-gradient-to-br from-indigo-400/20 to-blue-400/20 rounded-full blur-md animate-ping",style:{animationDelay:"2s"}}),n.jsx("div",{className:"absolute bottom-2/5 right-2/5 w-7 h-7 bg-gradient-to-br from-cyan-400/20 to-indigo-400/20 rounded-full blur-md animate-ping",style:{animationDelay:"3s"}}),n.jsx("div",{className:"absolute top-0 left-1/2 w-64 h-64 bg-gradient-to-br from-blue-300/15 to-indigo-300/15 rounded-full blur-2xl animate-pulse",style:{animationDuration:"4s"}}),n.jsx("div",{className:"absolute bottom-0 left-1/4 w-48 h-48 bg-gradient-to-br from-purple-300/15 to-pink-300/15 rounded-full blur-2xl animate-pulse",style:{animationDuration:"6s",animationDelay:"1s"}}),n.jsxs("div",{className:"w-full max-w-lg mx-auto p-8 bg-white/90 backdrop-blur-md rounded-2xl shadow-2xl border border-white/30 relative z-10 bg-gradient-to-br from-white/95 via-white/90 to-white/95",children:[n.jsxs("div",{className:"text-center mb-10",children:[n.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:n.jsx(Br,{className:"w-12 h-12 text-white"})}),n.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent mb-3",children:"Welcome to kabini.ai"}),n.jsx("p",{className:"text-gray-600 text-lg",children:"Sign in to your account to continue"})]}),n.jsxs("form",{onSubmit:me,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:["Email ",n.jsx("span",{className:"text-red-600",children:"*"})]}),n.jsx("input",{type:"email",name:"email",value:l.email,onChange:I=>$(I,C=>{const k=qr(C);o(B=>({...B,email:k}));const R=vn(k);R.isValid?S(B=>({...B,email:void 0})):S(B=>({...B,email:Pn(k,R)}))}),onPaste:I=>U(I,C=>{const k=qr(C);o(B=>({...B,email:k}));const R=vn(k);R.isValid?S(B=>({...B,email:void 0})):S(B=>({...B,email:Pn(k,R)}))}),onKeyDown:M,onCompositionStart:I=>I.preventDefault(),onCompositionUpdate:I=>I.preventDefault(),onCompositionEnd:I=>I.preventDefault(),onBlur:ne,required:!0,inputMode:"email",autoComplete:"email",className:`w-full px-4 py-4 border-2 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all ${v.email?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300"}`,placeholder:"Enter your email address *"}),v.email&&n.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[n.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),v.email]})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:["Password ",n.jsx("span",{className:"text-red-600",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:a?"text":"password",name:"password",value:l.password,onChange:I=>$(I,C=>{o(k=>({...k,password:C})),C.trim()?S(k=>({...k,password:void 0})):S(k=>({...k,password:"Please enter your password"}))}),onPaste:I=>U(I,C=>{o(k=>({...k,password:C})),C.trim()?S(k=>({...k,password:void 0})):S(k=>({...k,password:"Please enter your password"}))}),onKeyDown:M,onCompositionStart:I=>I.preventDefault(),onCompositionUpdate:I=>I.preventDefault(),onCompositionEnd:I=>I.preventDefault(),required:!0,placeholder:"Enter your password *",className:`w-full px-4 py-4 border-2 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all ${v.password?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300"}`}),n.jsx("button",{type:"button",onClick:()=>c(!a),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors focus:outline-none",tabIndex:-1,children:a?n.jsx(Ms,{className:"w-5 h-5"}):n.jsx(ln,{className:"w-5 h-5"})})]}),v.password&&n.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[n.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),v.password]})]}),n.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold py-4 px-6 rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg transform hover:scale-[1.02]",disabled:d,children:d?n.jsx(wn,{className:"w-5 h-5 animate-spin"}):"Sign In"})]}),n.jsxs("div",{className:"mt-6 text-center space-y-2",children:[n.jsx("button",{type:"button",onClick:()=>j("/forgot-password"),className:"text-sm",children:"Forgot your password?"}),n.jsx("div",{children:n.jsx("button",{type:"button",onClick:()=>j("/signup"),className:"text-sm",children:"Don't have an account? Sign up"})})]}),n.jsxs("div",{className:"mt-10 space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-gray-300"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),n.jsx("button",{onClick:fe,disabled:d,className:"w-full bg-white border-2 border-gray-300 text-gray-700 font-semibold py-4 px-6 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all flex items-center justify-center gap-4 disabled:opacity-50 disabled:cursor-not-allowed",children:d?n.jsxs(n.Fragment,{children:[n.jsx(wn,{className:"w-6 h-6 animate-spin"}),n.jsx("span",{children:"Signing in with Google..."})]}):n.jsxs(n.Fragment,{children:[n.jsx("img",{src:"/google.svg",alt:"Google",className:"w-6 h-6"}),"Sign in with Google"]})}),n.jsxs("button",{onClick:W,disabled:d,className:"w-full bg-white border-2 border-gray-300 text-gray-700 font-semibold py-4 px-6 rounded-xl hover:bg-gray-50 hover:border-gray-400 transition-all flex items-center justify-center gap-4 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx("img",{src:"/microsoft.svg",alt:"Microsoft",className:"w-6 h-6"}),"Sign in with Microsoft"]})]})]}),n.jsx(Hs,{error:y||(_&&typeof _=="string"?_:null),onClose:()=>{x(null),F()},autoClose:!0,autoCloseDelay:5e3})]})};function _n(l,o){const[a,c]=w.useState(()=>{try{const m=window.localStorage.getItem(l);return m?JSON.parse(m):o}catch(m){return console.error(`Error loading ${l} from localStorage:`,m),o}});return[a,m=>{try{c(m),window.localStorage.setItem(l,JSON.stringify(m))}catch(v){console.error(`Error saving ${l} to localStorage:`,v)}}]}function ng(l,o,a){const c=new Blob([l],{type:a}),d=URL.createObjectURL(c),m=document.createElement("a");m.href=d,m.download=o,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(d)}const rg={"gemini-1.5-flash":{input:75e-6,output:3e-4},"gemini-1.5-pro":{input:.00125,output:.005},"gemini-pro":{input:5e-4,output:.0015},"gpt-3.5-turbo":{input:5e-4,output:.0015},"gpt-4":{input:.03,output:.06},"gpt-4-turbo":{input:.01,output:.03},"r1-1776":{input:2e-4,output:2e-4},"llama-3.1-sonar-small-128k-online":{input:2e-4,output:2e-4},"llama-3.1-sonar-medium-128k-online":{input:6e-4,output:6e-4},"llama-3.1-sonar-large-128k-online":{input:.001,output:.001},"serper-search":{input:.001,output:.001}};function sg(l){return rg[l]||{input:0,output:0}}function Sd(l,o,a){const c=sg(a),d=l/1e3*c.input,m=o/1e3*c.output;return d+m}function ag({qaItems:l,onExport:o}){const[a,c]=w.useState([]),[d,m]=w.useState([]),[v,S]=w.useState([]),[y,x]=w.useState(new Set),[j,L]=w.useState(new Set),[_,F]=w.useState(0),[E,$]=w.useState({searchTerm:"",dateFilter:"all",specificDate:"",typeFilter:"all",statusFilter:"all",showFilters:!1,groupBy:"date",sortBy:"date",sortOrder:"desc"});w.useEffect(()=>{(async()=>{try{const h=await Je.getHistoryItems();console.log("[History] Loaded items:",h.length,h);const g=h.filter(b=>b&&typeof b=="object"&&b.id&&b.type&&b.name&&b.timestamp);console.log("[History] Valid items:",g.length,g),c(g)}catch(h){console.error("[History] Error loading history items:",h),c([])}})()},[_]),w.useEffect(()=>{(async()=>{console.log("[History] Component mounted, loading initial history items");try{const h=await Je.getHistoryItems();c(h)}catch(h){console.error("[History] Error loading initial history items:",h),c([])}})()},[]),w.useEffect(()=>{l&&l.length>0&&(console.log("[History] qaItems prop changed, syncing with history service"),F(f=>f+1))},[l]),w.useEffect(()=>{const f=b=>{b.key&&b.key.includes("comprehensive_history")&&(console.log("[History] Storage changed, refreshing history"),F(A=>A+1))},h=()=>{console.log("[History] New analysis event received, refreshing history"),F(b=>b+1)};window.addEventListener("new-analysis-created",h),window.addEventListener("storage",f);const g=async()=>{try{const b=await Je.getHistoryItems();b.length!==a.length&&(console.log("[History] Item count changed on focus, refreshing history"),c(b))}catch(b){console.error("[History] Error checking history on focus:",b)}};return window.addEventListener("focus",g),()=>{window.removeEventListener("new-analysis-created",h),window.removeEventListener("storage",f),window.removeEventListener("focus",g)}},[a.length]);const U=w.useMemo(()=>{const f=new Set,h=new Set;return a.forEach(g=>{g.type&&f.add(g.type),g.status&&h.add(g.status)}),{types:Array.from(f).filter(Boolean).sort(),statuses:Array.from(h).filter(Boolean).sort()}},[a,_]);w.useEffect(()=>{console.log("[History] History items updated:",a.length,"items"),console.log("[History] History data:",a);let f=[...a];if(E.searchTerm&&(f=f.filter(h=>h.name.toLowerCase().includes(E.searchTerm.toLowerCase())||h.description?.toLowerCase().includes(E.searchTerm.toLowerCase())||h.type==="qa"&&h.sessionData.qaData.some(g=>g.question.toLowerCase().includes(E.searchTerm.toLowerCase())||g.answer.toLowerCase().includes(E.searchTerm.toLowerCase()))||h.type==="ai-visibility"&&h.company.toLowerCase().includes(E.searchTerm.toLowerCase()))),E.dateFilter!=="all"){const h=new Date,g=new Date;switch(E.dateFilter){case"today":g.setHours(0,0,0,0);break;case"week":g.setDate(h.getDate()-7);break;case"month":g.setMonth(h.getMonth()-1);break;case"year":g.setFullYear(h.getFullYear()-1);break;case"specific":if(E.specificDate){const b=new Date(E.specificDate);b.setHours(0,0,0,0);const A=new Date(E.specificDate);A.setHours(23,59,59,999),f=f.filter(z=>{const X=new Date(z.timestamp);return X>=b&&X<=A})}break}E.dateFilter!=="specific"&&(f=f.filter(b=>new Date(b.timestamp)>=g))}E.typeFilter!=="all"&&(f=f.filter(h=>h.type===E.typeFilter)),E.statusFilter!=="all"&&(f=f.filter(h=>h.status===E.statusFilter)),f.sort((h,g)=>{let b,A;switch(E.sortBy){case"date":b=new Date(h.timestamp).getTime(),A=new Date(g.timestamp).getTime();break;case"name":b=h.name.toLowerCase(),A=g.name.toLowerCase();break;case"type":b=h.type,A=g.type;break;case"status":b=h.status,A=g.status;break;default:b=new Date(h.timestamp).getTime(),A=new Date(g.timestamp).getTime()}return E.sortOrder==="asc"?b>A?1:-1:b<A?1:-1}),console.log("[History] Filtered items:",f.length,"items"),m(f)},[a,E,_]),w.useEffect(()=>{const f=[],h=new Map;d.forEach(g=>{let b="";switch(E.groupBy){case"date":const A=new Date(g.timestamp);b=A.toDateString(),A.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});break;case"type":b=g.type,ne(g.type);break;case"status":b=g.status,g.status.charAt(0).toUpperCase()+g.status.slice(1);break}h.has(b)||h.set(b,[]),h.get(b).push(g)}),h.forEach((g,b)=>{let A=b;E.groupBy==="date"?A=new Date(b).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):E.groupBy==="type"?A=ne(b):E.groupBy==="status"&&(A=b.charAt(0).toUpperCase()+b.slice(1)),f.push({groupKey:b,groupTitle:A,groupType:E.groupBy,items:g,totalItems:g.length,dateRange:E.groupBy==="date"?b:void 0})}),f.sort((g,b)=>E.groupBy==="date"?new Date(b.groupKey).getTime()-new Date(g.groupKey).getTime():g.groupTitle.localeCompare(b.groupTitle)),S(f)},[d,E.groupBy,_]);const M=f=>{const h=new Set(y);h.has(f)?h.delete(f):h.add(f),x(h)},oe=f=>{const h=new Set(j);h.has(f)?h.delete(f):h.add(f),L(h)},ne=f=>{if(!f)return"Unknown";switch(f){case"qa":return"Q&A Sessions";case"ai-visibility":return"AI Visibility Analysis";case"content-analysis":return"Content Analysis";case"structure-analysis":return"Structure Analysis";default:return f}},me=f=>{switch(f){case"completed":return"text-green-600 bg-green-100";case"in-progress":return"text-yellow-600 bg-yellow-100";case"failed":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},fe=f=>{try{if(!f||!f.type)return console.error("[History] Invalid item:",f),n.jsx("div",{className:"text-red-500",children:"Invalid item data"});switch(f.type){case"qa":return W(f);case"ai-visibility":return I(f);case"content-analysis":return C(f);case"structure-analysis":return k(f);default:return n.jsxs("div",{className:"text-orange-500",children:["Unknown item type: ",f.type]})}}catch(h){return console.error("[History] Error rendering item:",h,f),n.jsxs("div",{className:"text-red-500",children:["Error rendering item: ",h.message]})}},W=f=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:n.jsx(Hr,{className:"h-4 w-4 text-white"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-bold text-black",children:f.name}),n.jsx("div",{className:"text-xs text-gray-600",children:be(f.timestamp)}),n.jsxs("div",{className:"text-xs text-blue-600",children:[f.sessionData.qaData.length," Q&A pairs"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${me(f.status)}`,children:f.status}),n.jsx("input",{type:"checkbox",checked:j.has(f.id),onChange:()=>oe(f.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]})]}),n.jsxs("div",{className:"space-y-3",children:[f.sessionData.qaData.slice(0,3).map((h,g)=>n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[n.jsxs("div",{className:"font-semibold text-gray-900 mb-2",children:["Q",g+1,": ",h.question]}),h.answer&&n.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:[h.answer.substring(0,100),"..."]}),n.jsxs("div",{className:"flex gap-2 text-xs text-gray-500",children:[n.jsxs("span",{children:["Accuracy: ",h.accuracy||"N/A"]}),n.jsxs("span",{children:["Sentiment: ",h.sentiment||"N/A"]}),n.jsxs("span",{children:["Cost: $",(h.cost||0).toFixed(4)]})]})]},g)),f.sessionData.qaData.length>3&&n.jsxs("div",{className:"text-center text-sm text-gray-500",children:["+",f.sessionData.qaData.length-3," more Q&A pairs"]})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsxs("button",{onClick:()=>B(f.id),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition flex items-center gap-1",children:[n.jsx(Wt,{className:"h-3 w-3"}),"JSON"]}),n.jsxs("button",{onClick:()=>K(f.id),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition flex items-center gap-1",children:[n.jsx(Wt,{className:"h-3 w-3"}),"CSV"]}),n.jsxs("button",{onClick:()=>J(f.id),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition flex items-center gap-1",children:[n.jsx(Ya,{className:"h-3 w-3"}),"Delete"]})]})]}),I=f=>!f.analysis||!f.analysis.competitors?n.jsxs("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:[n.jsx("div",{className:"text-red-600",children:"Invalid AI Visibility data structure"}),n.jsx("div",{className:"text-xs text-red-500 mt-2",children:"Missing analysis or competitors data"})]}):n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center",children:n.jsx(ln,{className:"h-4 w-4 text-white"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-bold text-black",children:f.name}),n.jsx("div",{className:"text-xs text-gray-600",children:be(f.timestamp)}),n.jsxs("div",{className:"text-xs text-purple-600",children:[f.analysis.competitors?.length||0," competitors analyzed"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${me(f.status)}`,children:f.status}),n.jsx("input",{type:"checkbox",checked:j.has(f.id),onChange:()=>oe(f.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[n.jsxs("div",{className:"font-semibold text-gray-900 mb-2",children:["Company: ",f.company]}),f.industry&&n.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Industry: ",f.industry]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[n.jsxs("div",{children:["Top Competitor: ",f.analysis.summary?.topCompetitor||"N/A"]}),n.jsxs("div",{children:["Avg Score: ",f.analysis.summary?.averageVisibilityScore?.toFixed(1)||"N/A"]})]})]}),n.jsxs("div",{className:"space-y-2",children:[f.analysis.competitors.slice(0,3).map((h,g)=>n.jsxs("div",{className:"bg-white rounded-lg p-2 border border-gray-200",children:[n.jsx("div",{className:"font-medium text-sm",children:h.name}),n.jsxs("div",{className:"text-xs text-gray-600",children:["Avg Score: ",h.visibilityScores?.average?.toFixed(1)||"N/A"]})]},g)),f.analysis.competitors.length>3&&n.jsxs("div",{className:"text-center text-sm text-gray-500",children:["+",f.analysis.competitors.length-3," more competitors"]})]})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsxs("button",{onClick:()=>B(f.id),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition flex items-center gap-1",children:[n.jsx(Wt,{className:"h-3 w-3"}),"JSON"]}),n.jsxs("button",{onClick:()=>K(f.id),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition flex items-center gap-1",children:[n.jsx(Wt,{className:"h-3 w-3"}),"CSV"]}),n.jsxs("button",{onClick:()=>J(f.id),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition flex items-center gap-1",children:[n.jsx(Ya,{className:"h-3 w-3"}),"Delete"]})]})]}),C=f=>f.analysis?n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:n.jsx(Os,{className:"h-4 w-4 text-white"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-bold text-black",children:f.name}),n.jsx("div",{className:"text-xs text-gray-600",children:be(f.timestamp)}),n.jsxs("div",{className:"text-xs text-green-600",children:["SEO Score: ",f.analysis?.seoScore||"N/A","/100"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${me(f.status)}`,children:f.status}),n.jsx("input",{type:"checkbox",checked:j.has(f.id),onChange:()=>oe(f.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-gray-900",children:"SEO Score"}),n.jsx("div",{className:"text-2xl font-bold text-green-600",children:f.analysis?.seoScore||"N/A"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-gray-900",children:"Readability"}),n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f.analysis?.readabilityScore||"N/A"})]})]}),f.analysis?.suggestions?.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx("div",{className:"font-semibold text-gray-900 mb-2",children:"Suggestions"}),n.jsxs("div",{className:"space-y-1",children:[f.analysis.suggestions.slice(0,3).map((h,g)=>n.jsxs("div",{className:"text-xs text-gray-600",children:["• ",h.description]},g)),f.analysis.suggestions.length>3&&n.jsxs("div",{className:"text-xs text-gray-500",children:["+",f.analysis.suggestions.length-3," more suggestions"]})]})]})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsxs("button",{onClick:()=>B(f.id),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition flex items-center gap-1",children:[n.jsx(Wt,{className:"h-3 w-3"}),"JSON"]}),n.jsxs("button",{onClick:()=>K(f.id),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition flex items-center gap-1",children:[n.jsx(Wt,{className:"h-3 w-3"}),"CSV"]}),n.jsxs("button",{onClick:()=>J(f.id),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition flex items-center gap-1",children:[n.jsx(Ya,{className:"h-3 w-3"}),"Delete"]})]})]}):n.jsxs("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:[n.jsx("div",{className:"text-red-600",children:"Invalid Content Analysis data structure"}),n.jsx("div",{className:"text-xs text-red-500 mt-2",children:"Missing analysis data"})]}),k=f=>n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center",children:n.jsx(gf,{className:"h-4 w-4 text-white"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-bold text-black",children:f.name}),n.jsx("div",{className:"text-xs text-gray-600",children:be(f.timestamp)}),n.jsxs("div",{className:"text-xs text-orange-600",children:[f.analysis.suggestions?.length||0," suggestions"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${me(f.status)}`,children:f.status}),n.jsx("input",{type:"checkbox",checked:j.has(f.id),onChange:()=>oe(f.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[f.analysis.geoScoreTotal!==void 0||f.analysis.contentQualityScoreTotal!==void 0?n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-4",children:[f.analysis.geoScoreTotal!==void 0&&n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-gray-900",children:"GEO Score"}),n.jsxs("div",{className:"text-xl font-bold text-red-600",children:[f.analysis.geoScoreTotal,"/100"]}),n.jsx("div",{className:"text-xs text-gray-600",children:"AI visibility & search optimization"})]}),f.analysis.contentQualityScoreTotal!==void 0&&n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold text-gray-900",children:"Content Quality"}),n.jsxs("div",{className:"text-xl font-bold text-orange-600",children:[f.analysis.contentQualityScoreTotal,"/100"]}),n.jsx("div",{className:"text-xs text-gray-600",children:"Human/editorial score"})]})]}):null,n.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs text-gray-600 mb-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:f.analysis.wordCount||f.analysis.metadata?.wordCount||0}),n.jsx("div",{children:"Words"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:f.analysis.readingTime||f.analysis.metadata?.readingTime||1}),n.jsx("div",{children:"Min Read"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:f.analysis.suggestionsCount||f.analysis.suggestions?.length||0}),n.jsx("div",{children:"Suggestions"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:(f.analysis.language||f.analysis.metadata?.language||"en").toUpperCase()}),n.jsx("div",{children:"Language"})]})]}),f.analysis.suggestions&&f.analysis.suggestions.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsxs("div",{className:"font-semibold text-gray-900 mb-2",children:["Top Suggestions (",f.analysis.suggestions.length," total)"]}),n.jsxs("div",{className:"space-y-2",children:[f.analysis.suggestions.slice(0,5).map((h,g)=>n.jsxs("div",{className:"bg-gray-50 rounded p-2 border-l-4 border-blue-500",children:[n.jsxs("div",{className:"text-xs text-gray-600 font-medium mb-1",children:[h.type.charAt(0).toUpperCase()+h.type.slice(1)," • ",h.priority]}),n.jsx("div",{className:"text-xs text-gray-800",children:h.description}),h.impact&&n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Impact: ",h.impact]})]},g)),f.analysis.suggestions.length>5&&n.jsxs("div",{className:"text-center text-xs text-gray-500 bg-gray-100 rounded p-2",children:["+",f.analysis.suggestions.length-5," more suggestions available"]})]})]})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsxs("button",{onClick:()=>B(f.id),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition flex items-center gap-1",children:[n.jsx(Wt,{className:"h-3 w-3"}),"JSON"]}),n.jsxs("button",{onClick:()=>K(f.id),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition flex items-center gap-1",children:[n.jsx(Wt,{className:"h-3 w-3"}),"CSV"]}),n.jsxs("button",{onClick:()=>J(f.id),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition flex items-center gap-1",children:[n.jsx(Ya,{className:"h-3 w-3"}),"Delete"]})]})]}),R=()=>{const f=j.size>0?d.filter(z=>j.has(z.id)):d;let h="";f.forEach(z=>{switch(z.type){case"qa":const X=z;h+=`
=== Q&A SESSION: ${X.name} ===
`,h+=`Session ID,${X.id}
`,h+=`Timestamp,${new Date(X.timestamp).toISOString()}
`,h+=`Model,${X.sessionData.model}
`,h+=`Total Questions,${X.sessionData.qaData.length}
`,h+=`Total Cost,${X.sessionData.statistics.totalCost}
`,h+=`Average Accuracy,${X.sessionData.statistics.avgAccuracy}%
`,h+=`Blog Content,"${X.sessionData.blogContent.replace(/"/g,'""')}"
`,h+=`
Question,Answer,Accuracy,Sentiment,Geo Score,Citation Likelihood,Input Tokens,Output Tokens,Total Tokens,Cost
`,X.sessionData.qaData.forEach((he,Le)=>{h+=`"${he.question.replace(/"/g,'""')}","${he.answer.replace(/"/g,'""')}",${he.accuracy}%,${he.sentiment},${he.geoScore},${he.citationLikelihood},${he.inputTokens},${he.outputTokens},${he.totalTokens},$${he.cost}
`});break;case"ai-visibility":const ue=z;h+=`
=== AI VISIBILITY ANALYSIS: ${ue.name} ===
`,h+=`Company,${ue.company}
`,h+=`Industry,${ue.industry||"N/A"}
`,h+=`Timestamp,${new Date(ue.timestamp).toISOString()}
`,h+=`Overall Score,${ue.analysis.overallScore}
`,h+=`Content Quality,${ue.analysis.contentQuality}
`,h+=`Technical SEO,${ue.analysis.technicalSEO}
`,h+=`User Experience,${ue.analysis.userExperience}
`,h+=`Competitive Position,${ue.analysis.competitivePosition}
`,h+=`
Competitors Found:
`,h+=`Competitor Name,Website,Relevance Score,Strengths,Weaknesses
`,ue.analysis.competitors.forEach(he=>{h+=`"${he.name}","${he.website}",${he.relevanceScore},"${he.strengths.join("; ").replace(/"/g,'""')}","${he.weaknesses.join("; ").replace(/"/g,'""')}"
`}),h+=`
Recommendations:
`,h+=`Priority,Recommendation,Impact,Effort
`,ue.analysis.recommendations.forEach(he=>{h+=`${he.priority},"${he.recommendation.replace(/"/g,'""')}",${he.impact},${he.effort}
`});break;case"content-analysis":const ae=z;h+=`
=== CONTENT ANALYSIS: ${ae.name} ===
`,h+=`URL,${ae.url||"N/A"}
`,h+=`Timestamp,${new Date(ae.timestamp).toISOString()}
`,h+=`SEO Score,${ae.analysis.seoScore}
`,h+=`Readability Score,${ae.analysis.readabilityScore}
`,h+=`Content Length,${ae.analysis.contentLength} words
`,h+=`Keyword Density,${ae.analysis.keywordDensity}%
`,h+=`
Analyzed Content:
`,h+=`"${ae.content.replace(/"/g,'""')}"
`,h+=`
Suggestions:
`,h+=`Category,Suggestion,Priority
`,ae.analysis.suggestions.forEach(he=>{h+=`${he.category},"${he.suggestion.replace(/"/g,'""')}",${he.priority}
`});break;case"structure-analysis":const te=z;h+=`
=== STRUCTURE ANALYSIS: ${te.name} ===
`,h+=`Timestamp,${new Date(te.timestamp).toISOString()}
`,h+=`Original Content Length,${te.originalContent.length} characters
`,h+=`Structured Content Length,${te.structuredContent.length} characters
`,h+=`
Analysis Scores:
`,te.analysis.geoScoreTotal!==void 0&&(h+=`GEO Score,${te.analysis.geoScoreTotal}/100
`),te.analysis.contentQualityScoreTotal!==void 0&&(h+=`Content Quality Score,${te.analysis.contentQualityScoreTotal}/100
`),h+=`
Content Metadata:
`,h+=`Title,${te.analysis.metadata.title}
`,h+=`Description,${te.analysis.metadata.description}
`,h+=`Keywords,"${te.analysis.metadata.keywords.join(", ")}"
`,h+=`Author,${te.analysis.metadata.author}
`,h+=`Publish Date,${te.analysis.metadata.publishDate}
`,h+=`Last Modified,${te.analysis.metadata.lastModified}
`,h+=`Reading Time,${te.analysis.metadata.readingTime} minutes
`,h+=`Word Count,${te.analysis.metadata.wordCount}
`,h+=`Language,${te.analysis.metadata.language}
`,h+=`
Original Content:
`,h+=`"${te.originalContent.replace(/"/g,'""')}"
`,h+=`
Structured Content:
`,h+=`"${te.structuredContent.replace(/"/g,'""')}"
`,h+=`
Structure Suggestions:
`,h+=`Type,Priority,Description,Implementation,Impact
`,te.analysis.suggestions.forEach(he=>{h+=`${he.type},${he.priority},"${he.description.replace(/"/g,'""')}","${he.implementation.replace(/"/g,'""')}","${he.impact.replace(/"/g,'""')}"
`});break;default:h+=`
=== UNKNOWN TYPE: ${z.name} ===
`,h+=`ID,${z.id}
`,h+=`Type,${z.type}
`,h+=`Status,${z.status}
`,h+=`Timestamp,${new Date(z.timestamp).toISOString()}
`,h+=`Description,${z.description||"N/A"}
`}h+=`
`+"=".repeat(80)+`
`});const g=`COMPREHENSIVE HISTORY EXPORT
`,b=`Export Date: ${new Date().toISOString()}
`,A=`Total Items: ${f.length}
`;o(g+b+A+h,"comprehensive-history-detailed.csv","text/csv")},B=f=>{console.log("[History] Downloading item:",f);try{const h=Je.exportHistoryItem(f);h&&h.content?(console.log("[History] Export data:",h),o(h.content,h.filename,h.mimeType)):(console.error("[History] No export data found for item:",f),alert("No data found for this item. It might be sample data or corrupted."))}catch(h){console.error("[History] Error downloading item:",h),alert("Error downloading item. Please try again.")}},K=f=>{console.log("[History] Downloading item as CSV:",f);const g=Je.getHistoryItems().find(z=>z.id===f);if(!g){alert("Item not found!");return}let b="";switch(g.type){case"qa":const z=g;b+=`Q&A Session Export
`,b+=`Session Name,${z.name}
`,b+=`Session ID,${z.id}
`,b+=`Timestamp,${new Date(z.timestamp).toISOString()}
`,b+=`Model,${z.sessionData.model}
`,b+=`Total Questions,${z.sessionData.qaData.length}
`,b+=`Total Cost,${z.sessionData.statistics.totalCost}
`,b+=`Average Accuracy,${z.sessionData.statistics.avgAccuracy}%
`,b+=`Blog Content,"${z.sessionData.blogContent.replace(/"/g,'""')}"

`,b+=`Question,Answer,Accuracy,Sentiment,Geo Score,Citation Likelihood,Input Tokens,Output Tokens,Total Tokens,Cost
`,z.sessionData.qaData.forEach((te,he)=>{b+=`"${te.question.replace(/"/g,'""')}","${te.answer.replace(/"/g,'""')}",${te.accuracy}%,${te.sentiment},${te.geoScore},${te.citationLikelihood},${te.inputTokens},${te.outputTokens},${te.totalTokens},$${te.cost}
`});break;case"ai-visibility":const X=g;b+=`AI Visibility Analysis Export
`,b+=`Analysis Name,${X.name}
`,b+=`Company,${X.company}
`,b+=`Industry,${X.industry||"N/A"}
`,b+=`Timestamp,${new Date(X.timestamp).toISOString()}
`,b+=`Overall Score,${X.analysis.overallScore}
`,b+=`Content Quality,${X.analysis.contentQuality}
`,b+=`Technical SEO,${X.analysis.technicalSEO}
`,b+=`User Experience,${X.analysis.userExperience}
`,b+=`Competitive Position,${X.analysis.competitivePosition}

`,b+=`Competitors:
`,b+=`Name,Website,Relevance Score,Strengths,Weaknesses
`,X.analysis.competitors.forEach(te=>{b+=`"${te.name}","${te.website}",${te.relevanceScore},"${te.strengths.join("; ").replace(/"/g,'""')}","${te.weaknesses.join("; ").replace(/"/g,'""')}"
`}),b+=`
Recommendations:
`,b+=`Priority,Recommendation,Impact,Effort
`,X.analysis.recommendations.forEach(te=>{b+=`${te.priority},"${te.recommendation.replace(/"/g,'""')}",${te.impact},${te.effort}
`});break;case"content-analysis":const ue=g;b+=`Content Analysis Export
`,b+=`Analysis Name,${ue.name}
`,b+=`URL,${ue.url||"N/A"}
`,b+=`Timestamp,${new Date(ue.timestamp).toISOString()}
`,b+=`SEO Score,${ue.analysis.seoScore}
`,b+=`Readability Score,${ue.analysis.readabilityScore}
`,b+=`Content Length,${ue.analysis.contentLength} words
`,b+=`Keyword Density,${ue.analysis.keywordDensity}%

`,b+=`Analyzed Content:
`,b+=`"${ue.content.replace(/"/g,'""')}"

`,b+=`Suggestions:
`,b+=`Category,Suggestion,Priority
`,ue.analysis.suggestions.forEach(te=>{b+=`${te.category},"${te.suggestion.replace(/"/g,'""')}",${te.priority}
`});break;case"structure-analysis":const ae=g;b+=`Structure Analysis Export
`,b+=`Analysis Name,${ae.name}
`,b+=`Timestamp,${new Date(ae.timestamp).toISOString()}
`,b+=`Original Content Length,${ae.originalContent.length} characters
`,b+=`Structured Content Length,${ae.structuredContent.length} characters

`,b+=`Analysis Scores:
`,ae.analysis.geoScoreTotal!==void 0&&(b+=`GEO Score,${ae.analysis.geoScoreTotal}/100
`),ae.analysis.contentQualityScoreTotal!==void 0&&(b+=`Content Quality Score,${ae.analysis.contentQualityScoreTotal}/100
`),b+=`
`,b+=`Content Metadata:
`,b+=`Title,${ae.analysis.metadata.title}
`,b+=`Description,${ae.analysis.metadata.description}
`,b+=`Keywords,"${ae.analysis.metadata.keywords.join(", ")}"
`,b+=`Author,${ae.analysis.metadata.author}
`,b+=`Publish Date,${ae.analysis.metadata.publishDate}
`,b+=`Last Modified,${ae.analysis.metadata.lastModified}
`,b+=`Reading Time,${ae.analysis.metadata.readingTime} minutes
`,b+=`Word Count,${ae.analysis.metadata.wordCount}
`,b+=`Language,${ae.analysis.metadata.language}

`,b+=`Original Content:
`,b+=`"${ae.originalContent.replace(/"/g,'""')}"

`,b+=`Structured Content:
`,b+=`"${ae.structuredContent.replace(/"/g,'""')}"

`,b+=`Structure Suggestions:
`,b+=`Type,Priority,Description,Implementation,Impact
`,ae.analysis.suggestions.forEach(te=>{b+=`${te.type},${te.priority},"${te.description.replace(/"/g,'""')}","${te.implementation.replace(/"/g,'""')}","${te.impact.replace(/"/g,'""')}"
`});break;default:b+=`Unknown Type Export
`,b+=`Name,${g.name}
`,b+=`Type,${g.type}
`,b+=`Status,${g.status}
`,b+=`Timestamp,${new Date(g.timestamp).toISOString()}
`,b+=`Description,${g.description||"N/A"}
`}const A=`${g.type}-${g.name.replace(/[^a-zA-Z0-9]/g,"-")}-${new Date(g.timestamp).toISOString().split("T")[0]}.csv`;o(b,A,"text/csv")},J=f=>{confirm("Are you sure you want to delete this history item? This action cannot be undone.")&&(Je.deleteHistoryItem(f),F(h=>h+1))},le=()=>{const f=j.size>0?d.filter(g=>j.has(g.id)):d,h={exportedAt:new Date().toISOString(),total:f.length,filtersApplied:{...E},items:f};o(JSON.stringify(h,null,2),"history-export.json","application/json")},be=f=>new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),G=f=>{switch(f){case"date":return n.jsx(uf,{className:"h-4 w-4"});case"type":return n.jsx(dd,{className:"h-4 w-4"});case"status":return n.jsx(Ad,{className:"h-4 w-4"});default:return n.jsx(dd,{className:"h-4 w-4"})}};return n.jsxs("div",{className:"max-w-7xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-primary mb-4",children:"Comprehensive History"}),n.jsx("p",{className:"text-gray-600",children:"View and manage all your analysis history including Q&A, AI visibility, content analysis, and structure analysis"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-black/10 text-black text-center",children:[n.jsx("div",{className:"text-lg font-bold",children:"Total Items"}),n.jsx("div",{className:"text-3xl font-extrabold",children:d.length})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-black/10 text-black text-center",children:[n.jsx("div",{className:"text-lg font-bold",children:"Q&A Sessions"}),n.jsx("div",{className:"text-3xl font-extrabold",children:d.filter(f=>f.type==="qa").length})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-black/10 text-black text-center",children:[n.jsx("div",{className:"text-lg font-bold",children:"AI Visibility"}),n.jsx("div",{className:"text-3xl font-extrabold",children:d.filter(f=>f.type==="ai-visibility").length})]}),n.jsxs("div",{className:"bg-white rounded-lg p-6 border border-black/10 text-black text-center",children:[n.jsx("div",{className:"text-lg font-bold",children:"Selected Items"}),n.jsx("div",{className:"text-3xl font-extrabold",children:j.size})]}),n.jsx("div",{className:"bg-white rounded-lg p-6 border border-black/10 text-black text-center",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{onClick:R,className:"bg-black text-white px-4 py-2 rounded-lg font-bold shadow hover:bg-gray-800 transition flex items-center gap-2 w-full justify-center",children:[n.jsx(Wt,{className:"h-4 w-4"}),"Export CSV"]}),n.jsxs("button",{onClick:le,className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-bold shadow hover:bg-blue-700 transition flex items-center gap-2 w-full justify-center",children:[n.jsx(Wt,{className:"h-4 w-4"}),"Export JSON"]}),n.jsxs("button",{onClick:()=>{localStorage.removeItem("comprehensive_history"),c([]),m([]),S([]),alert("History cleared. Please refresh the page.")},className:"bg-orange-600 text-white px-3 py-2 rounded-lg font-bold shadow hover:bg-orange-700 transition flex items-center gap-2 w-full justify-center",children:[n.jsx(ri,{className:"h-4 w-4"}),"Reset History"]})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-black/10 p-6 mb-8 overflow-visible relative",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h2",{className:"text-xl font-bold text-black flex items-center gap-2",children:[n.jsx(ff,{className:"h-5 w-5"}),"Filters & Organization"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>$(f=>({...f,showFilters:!f.showFilters})),className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg flex items-center gap-2 transition",children:[E.showFilters?n.jsx(id,{className:"h-4 w-4"}):n.jsx(ld,{className:"h-4 w-4"}),E.showFilters?"Hide":"Show"," Filters"]}),n.jsxs("button",{onClick:()=>{console.log("[History] Manual refresh triggered");const f=Je.getHistoryItems();c(f),F(h=>h+1)},className:"bg-green-100 hover:bg-green-200 text-green-700 px-3 py-2 rounded-lg flex items-center gap-2 transition",children:[n.jsx(ri,{className:"h-4 w-4"}),"Refresh"]}),n.jsxs("div",{className:"flex items-center gap-1 bg-blue-50 px-3 py-2 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Group by:"}),n.jsxs("select",{value:E.groupBy,onChange:f=>$(h=>({...h,groupBy:f.target.value})),className:"text-sm border-0 bg-transparent text-blue-700 font-medium focus:ring-0 focus:outline-none",children:[n.jsx("option",{value:"date",children:"Date"}),n.jsx("option",{value:"type",children:"Type"}),n.jsx("option",{value:"status",children:"Status"})]})]})]})]}),E.showFilters&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),n.jsxs("div",{className:"relative",children:[n.jsx(ci,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Search all analysis...",value:E.searchTerm,onChange:f=>lo(f,h=>$(g=>({...g,searchTerm:h}))),onPaste:f=>io(f,h=>$(g=>({...g,searchTerm:h}))),onKeyDown:f=>{co(f)||f.preventDefault()},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-black placeholder-gray-400 relative z-10"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Range"}),n.jsxs("select",{value:E.dateFilter,onChange:f=>$(h=>({...h,dateFilter:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-black relative z-10",children:[n.jsx("option",{value:"all",children:"All Time"}),n.jsx("option",{value:"today",children:"Today"}),n.jsx("option",{value:"week",children:"Last 7 Days"}),n.jsx("option",{value:"month",children:"Last 30 Days"}),n.jsx("option",{value:"year",children:"Last Year"}),n.jsx("option",{value:"specific",children:"Specific date…"})]}),E.dateFilter==="specific"&&n.jsx("div",{className:"mt-2",children:n.jsx("input",{type:"date",value:E.specificDate,onChange:f=>$(h=>({...h,specificDate:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-black"})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Analysis Type"}),n.jsxs("select",{value:E.typeFilter,onChange:f=>$(h=>({...h,typeFilter:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-black relative z-10",children:[n.jsx("option",{value:"all",children:"All Types"}),U.types.map(f=>n.jsx("option",{value:f,children:f?ne(f):"Unknown"},f))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),n.jsxs("select",{value:E.statusFilter,onChange:f=>$(h=>({...h,statusFilter:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-black relative z-10",children:[n.jsx("option",{value:"all",children:"All Status"}),U.statuses.map(f=>n.jsx("option",{value:f,children:f?f.charAt(0).toUpperCase()+f.slice(1):"Unknown"},f))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),n.jsxs("select",{value:E.sortBy,onChange:f=>$(h=>({...h,sortBy:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-black relative z-10",children:[n.jsx("option",{value:"date",children:"Date"}),n.jsx("option",{value:"name",children:"Name"}),n.jsx("option",{value:"type",children:"Type"}),n.jsx("option",{value:"status",children:"Status"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),n.jsxs("select",{value:E.sortOrder,onChange:f=>$(h=>({...h,sortOrder:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-black relative z-10",children:[n.jsx("option",{value:"desc",children:"Newest First"}),n.jsx("option",{value:"asc",children:"Oldest First"})]})]})]})]}),n.jsx("div",{className:"space-y-6",children:v.length===0?n.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-black/10",children:[n.jsx(ii,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No history found"}),n.jsx("p",{className:"text-gray-500",children:"Try adjusting your filters or create some analysis first."})]}):v.map(f=>n.jsxs("div",{className:"bg-white rounded-lg border border-black/10 overflow-hidden",children:[n.jsx("div",{className:"p-6 cursor-pointer hover:bg-gray-50 transition-colors border-b border-gray-200",onClick:()=>M(f.groupKey),children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[G(f.groupType),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-black",children:f.groupTitle}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[n.jsxs("span",{children:[f.items.length," items"]}),n.jsxs("span",{children:[f.totalItems," total"]})]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:y.has(f.groupKey)?n.jsx(id,{className:"h-5 w-5 text-gray-500"}):n.jsx(ld,{className:"h-5 w-5 text-gray-500"})})]})}),y.has(f.groupKey)&&n.jsx("div",{className:"p-6 space-y-4",children:f.items.map(h=>{try{return n.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:fe(h)},h.id)}catch(g){return console.error("[History] Error rendering item in group:",g,h),n.jsxs("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:[n.jsxs("div",{className:"text-red-600",children:["Error rendering item: ",g.message]}),n.jsxs("div",{className:"text-xs text-red-500 mt-2",children:["Item ID: ",h.id]})]},h.id)}})})]},f.groupKey))})]})}function og({questionProvider:l,questionModel:o,onQuestionProviderChange:a,onQuestionModelChange:c,answerProvider:d,answerModel:m,onAnswerProviderChange:v,onAnswerModelChange:S,questionCount:y=5,onQuestionCountChange:x}){const j=E=>{switch(E){case"gemini":return[{value:"gemini-1.5-flash",label:"Gemini 1.5 Flash"},{value:"gemini-1.5-pro",label:"Gemini 1.5 Pro"},{value:"gemini-pro",label:"Gemini Pro"}];case"openai":return[{value:"gpt-3.5-turbo",label:"GPT-3.5 Turbo (Recommended)"},{value:"gpt-4",label:"GPT-4"},{value:"gpt-4-turbo",label:"GPT-4 Turbo"}];case"perplexity":return[{value:"r1-1776",label:"R1-1776 (Recommended)"},{value:"llama-3.1-sonar-small-128k-online",label:"Llama 3.1 Sonar Small"},{value:"llama-3.1-sonar-medium-128k-online",label:"Llama 3.1 Sonar Medium"},{value:"llama-3.1-sonar-large-128k-online",label:"Llama 3.1 Sonar Large"}];default:return[]}},L=E=>{const $=E.target.value;a($);let U="";if($==="openai")U="gpt-3.5-turbo";else{const M=j($);M.length>0&&(U=M[0].value)}U&&c(U)},_=E=>{const $=E.target.value;v($);let U="";if($==="openai")U="gpt-3.5-turbo";else{const M=j($);M.length>0&&(U=M[0].value)}U&&S(U)},F=E=>{if(x){const $=E?y+1:y-1;$>=1&&$<=10&&x($)}};return n.jsxs("div",{className:"card mb-8 backdrop-blur-md bg-black/80 border border-primary/60 shadow-xl",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(vf,{className:"w-6 h-6 text-black animate-pulse"}),n.jsx("h2",{className:"text-2xl font-bold text-black",children:"Configuration"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("div",{className:"p-2 bg-gray-200 rounded-lg",children:n.jsx(Is,{className:"w-5 h-5 text-black"})}),n.jsx("h3",{className:"text-lg font-bold text-black",children:"Question Generation"}),n.jsxs("div",{className:"group relative",children:[n.jsx(Zl,{className:"w-4 h-4 text-black cursor-help"}),n.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-black text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:"LLM provider and model for generating questions"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"Provider"}),n.jsxs("select",{value:l,onChange:L,className:"w-full bg-white border border-black/20 rounded-lg px-3 py-2 text-black focus:outline-none focus:ring-2 focus:ring-black",children:[n.jsx("option",{value:"gemini",children:"Gemini (Google)"}),n.jsx("option",{value:"openai",children:"ChatGPT (OpenAI)"}),n.jsx("option",{value:"perplexity",children:"Perplexity"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"Model"}),n.jsx("select",{value:o,onChange:E=>c(E.target.value),className:"w-full bg-white border border-black/20 rounded-lg px-3 py-2 text-black focus:outline-none focus:ring-2 focus:ring-black",children:j(l).map(E=>n.jsx("option",{value:E.value,children:E.label},E.value))}),l==="openai"&&o==="gpt-3.5-turbo"&&n.jsx("div",{className:"text-xs text-green-600 mt-1 font-medium",children:"✓ Recommended for best performance and cost"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("div",{className:"p-2 bg-gray-200 rounded-lg",children:n.jsx(Is,{className:"w-5 h-5 text-black"})}),n.jsx("h3",{className:"text-lg font-bold text-black",children:"Answer Generation"}),n.jsxs("div",{className:"group relative",children:[n.jsx(Zl,{className:"w-4 h-4 text-black cursor-help"}),n.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-black text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:"LLM provider and model for generating answers"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"Provider"}),n.jsxs("select",{value:d,onChange:_,className:"w-full bg-white border border-black/20 rounded-lg px-3 py-2 text-black focus:outline-none focus:ring-2 focus:ring-black",children:[n.jsx("option",{value:"gemini",children:"Gemini (Google)"}),n.jsx("option",{value:"openai",children:"ChatGPT (OpenAI)"}),n.jsx("option",{value:"perplexity",children:"Perplexity"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"Model"}),n.jsx("select",{value:m,onChange:E=>S(E.target.value),className:"w-full bg-white border border-black/20 rounded-lg px-3 py-2 text-black focus:outline-none focus:ring-2 focus:ring-black",children:j(d).map(E=>n.jsx("option",{value:E.value,children:E.label},E.value))}),d==="openai"&&m==="gpt-3.5-turbo"&&n.jsx("div",{className:"text-xs text-green-600 mt-1 font-medium",children:"✓ Recommended for best performance and cost"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("div",{className:"p-2 bg-gray-200 rounded-lg",children:n.jsx(Is,{className:"w-5 h-5 text-black"})}),n.jsx("h3",{className:"text-lg font-bold text-black",children:"Question Count"}),n.jsxs("div",{className:"group relative",children:[n.jsx(Zl,{className:"w-4 h-4 text-black cursor-help"}),n.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-black text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:"Number of questions to generate"})]})]}),n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"Count"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>F(!1),disabled:y<=1,className:"p-2 bg-black border border-black rounded-lg text-white hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:n.jsx(yf,{className:"w-4 h-4 text-white"})}),n.jsx("div",{className:"flex-1 text-center",children:n.jsx("span",{className:"text-2xl font-bold text-black",children:y})}),n.jsx("button",{onClick:()=>F(!0),disabled:y>=10,className:"p-2 bg-black border border-black rounded-lg text-white hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:n.jsx(xf,{className:"w-4 h-4 text-white"})})]}),n.jsx("div",{className:"text-xs text-black mt-2 text-center",children:"Range: 1-10 questions"})]})})]})]})]})}const lt="http://localhost:5000/api";class lg{async request(o,a={}){const c=`${lt}${o}`;console.log("[ApiService] Making request to:",c);const d=await fetch(c,{headers:{"Content-Type":"application/json",...Te.getAuthHeaders(),...a.headers},...a});if(console.log("[ApiService] Response status:",d.status),console.log("[ApiService] Response headers:",d.headers),!d.ok){const v=await d.json().catch(()=>({}));throw new Error(v.error||`HTTP error! status: ${d.status}`)}const m=d.headers.get("content-type");if(!m||!m.includes("application/json")){const v=await d.text();throw console.error("[ApiService] Non-JSON response received:",v.substring(0,200)),new Error(`Expected JSON response but got: ${m}`)}return d.json()}async getLLMProviders(){return this.request("/llm/providers")}async generateQuestions(o){return this.request("/llm/generate-questions",{method:"POST",body:JSON.stringify(o)})}async generateAnswers(o){return this.request("/llm/generate-answers",{method:"POST",body:JSON.stringify(o)})}async generateAnswersWeb(o){return this.request("/llm/generate-answers-web",{method:"POST",body:JSON.stringify(o)})}async calculateConfidence(o,a,c,d){return this.request("/llm/calculate-confidence",{method:"POST",body:JSON.stringify({question:o,content:a,provider:c,model:d})})}async compareQuestions(o,a,c,d){return this.request("/llm/compare-questions",{method:"POST",body:JSON.stringify({question1:o,question2:a,provider:c,model:d})})}async saveSession(o){return this.request("/sessions",{method:"POST",body:JSON.stringify(o)})}async getSessionsByType(o){return this.request(`/sessions/${o}`)}async getSessionsWithFilters(o,a){const c=new URLSearchParams;a.fromDate&&c.append("fromDate",a.fromDate),a.toDate&&c.append("toDate",a.toDate),a.llmProvider&&c.append("llmProvider",a.llmProvider),a.llmModel&&c.append("llmModel",a.llmModel),a.blogLink&&c.append("blogLink",a.blogLink),a.search&&c.append("search",a.search);const d=c.toString(),m=d?`/sessions/${o}?${d}`:`/sessions/${o}`;return this.request(m)}async getSessionsByDateRange(o,a,c){const d=new URLSearchParams({fromDate:a,toDate:c});return this.request(`/sessions/${o}/range?${d}`)}async getSessionById(o){return this.request(`/sessions/question/${o}`)}async deleteSession(o){return this.request(`/sessions/${o}`,{method:"DELETE"})}async getSessionStats(o){return this.request(`/stats/${o}`)}async bulkSaveSessions(o){return this.request("/sessions/bulk",{method:"POST",body:JSON.stringify({sessions:o})})}async exportSessions(o,a="json"){const c=await fetch(`${lt}/export/${o}?format=${a}`);if(!c.ok){const d=await c.json().catch(()=>({}));throw new Error(d.error||`HTTP error! status: ${c.status}`)}return c.blob()}async healthCheck(){return this.request("/health")}async migrateFromLocalStorage(o){const a=Object.values(o);return this.bulkSaveSessions(a)}async checkQuestionRelevance(o,a,c,d,m){return this.request("/questions/check-relevance",{method:"POST",body:JSON.stringify({sourceUrls:o,blogUrl:a,questionText:c,currentProvider:d,currentModel:m})})}async calculateCitationLikelihood({answer:o,content:a,provider:c,model:d}){console.log("[Frontend] Calling /api/citation-likelihood/calculate with:",{answer:o,content:a,provider:c,model:d});const m=await fetch(`${lt}/citation-likelihood/calculate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")||""}`},body:JSON.stringify({answer:o,content:a,provider:c,model:d})});let v;try{v=await m.json()}catch(S){throw console.error("[Frontend] Failed to parse JSON from /api/citation-likelihood/calculate:",S),new Error("Failed to parse JSON from /api/citation-likelihood/calculate")}if(console.log("[Frontend] /api/citation-likelihood/calculate response:",v),!m.ok)throw new Error("Failed to calculate citation likelihood: "+(v.error||m.status));return v}async calculateAccuracy({answer:o,content:a,provider:c,model:d}){console.log("[Frontend] Calling /api/accuracy/calculate with:",{answer:o,content:a,provider:c,model:d});const m=await fetch(`${lt}/accuracy/calculate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")||""}`},body:JSON.stringify({answer:o,content:a,provider:c,model:d})});let v;try{v=await m.json()}catch(S){throw console.error("[Frontend] Failed to parse JSON from /api/accuracy/calculate:",S),new Error("Failed to parse JSON from /api/accuracy/calculate")}if(console.log("[Frontend] /api/accuracy/calculate response:",v),!m.ok)throw new Error("Failed to calculate accuracy: "+(v.error||m.status));return v}async calculateGeminiAccuracy({answer:o,content:a,model:c}){console.log("[Frontend] Calling /api/accuracy/gemini with:",{answer:o,content:a,model:c});const d=await fetch(`${lt}/accuracy/gemini`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")||""}`},body:JSON.stringify({answer:o,content:a,model:c})});let m;try{m=await d.json()}catch(v){throw console.error("[Frontend] Failed to parse JSON from /api/accuracy/gemini:",v),new Error("Failed to parse JSON from /api/accuracy/gemini")}if(console.log("[Frontend] /api/accuracy/gemini response:",m),!d.ok)throw new Error("Failed to calculate Gemini accuracy: "+(m.error||d.status));return m}async calculateGeoScoreBackend(o){const a=await fetch(`${lt}/geo-score`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")||""}`},body:JSON.stringify(o)});let c;try{c=await a.json()}catch(d){throw console.error("[Frontend] Failed to parse JSON from /api/geo-score:",d),new Error("Failed to parse JSON from /api/geo-score")}if(console.log("[Frontend] /api/geo-score response:",c),!a.ok)throw new Error("Failed to calculate GEO score: "+(c.error||a.status));return c}async getGEOFanoutAnalysis(o){const a=o?`${lt}/geo-fanout/analysis?sessionId=${o}`:`${lt}/geo-fanout/analysis`;console.log("[Frontend] Calling GEO fanout analysis:",a);const c=await fetch(a,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")||""}`}});let d;try{d=await c.json()}catch(m){throw console.error("[Frontend] Failed to parse JSON from GEO fanout analysis:",m),new Error("Failed to parse JSON from GEO fanout analysis")}if(console.log("[Frontend] GEO fanout analysis response:",d),!c.ok)throw new Error("Failed to get GEO fanout analysis: "+(d.error||c.status));return d}async analyzeCompetitor(o,a){const c=await fetch(`${lt}/competitor/analyze`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")||""}`},body:JSON.stringify({domain:o,userContent:a})}),d=await c.json();if(!c.ok)throw new Error("Failed to analyze competitor: "+(d.error||c.status));return d}async analyzeMultipleCompetitors(o,a){const c=await fetch(`${lt}/competitor/analyze-multiple`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")||""}`},body:JSON.stringify({domains:o,userContent:a})}),d=await c.json();if(!c.ok)throw new Error("Failed to analyze competitors: "+(d.error||c.status));return d}async getCompetitorAnalyses(){const o=await fetch(`${lt}/competitor/analyses`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")||""}`}}),a=await o.json();if(!o.ok)throw new Error("Failed to get competitor analyses: "+(a.error||o.status));return a}async getCompetitorAnalysis(o){const a=await fetch(`${lt}/competitor/analysis/${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")||""}`}}),c=await a.json();if(!a.ok)throw new Error("Failed to get competitor analysis: "+(c.error||a.status));return c}async deleteCompetitorAnalysis(o){const a=await fetch(`${lt}/competitor/analysis/${o}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")||""}`}}),c=await a.json();if(!a.ok)throw new Error("Failed to delete competitor analysis: "+(c.error||a.status));return c}async extractContentFromUrl(o){return console.log("[API Service] Extracting content from URL:",o),console.log("[API Service] API_BASE_URL:",lt),console.log("[API Service] Access token:",localStorage.getItem("accessToken")?"Present":"Missing"),this.request("/extract-content",{method:"POST",body:JSON.stringify({url:o})})}async crawlWebsite(o,a){return console.log("[API Service] Crawling website:",o,"with options:",a),this.request("/crawl-website",{method:"POST",body:JSON.stringify({url:o,options:a})})}async extractFullPageHtml(o){return console.log("[API Service] Extracting full page HTML from URL:",o),this.request("/extract/fullpage",{method:"POST",body:JSON.stringify({url:o})})}async getSmartAnalyses(){const o=await fetch(`${lt}/competitor/smart-analyses`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")||""}`}}),a=await o.json();if(!o.ok)throw new Error("Failed to get smart analyses: "+(a.error||o.status));return a}async getSmartAnalysis(o){const a=await fetch(`${lt}/competitor/smart-analysis/${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")||""}`}}),c=await a.json();if(!a.ok)throw new Error("Failed to get smart analysis: "+(c.error||a.status));return c}async createSmartAnalysis(o){const a=await fetch(`${lt}/competitor/smart-analysis`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")||""}`},body:JSON.stringify(o)}),c=await a.json();if(!a.ok)throw new Error("Failed to create smart analysis: "+(c.error||a.status));return c}async deleteSmartAnalysis(o){const a=await fetch(`${lt}/competitor/smart-analysis/${o}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")||""}`}}),c=await a.json();if(!a.ok)throw new Error("Failed to delete smart analysis: "+(c.error||a.status));return c}async analyzeContentStructure(o,a){return console.log("[API Service] Analyzing content structure for:",a?`URL: ${a}`:`Content length: ${o.length}`),a?(console.log("[API Service] Using dedicated structural content crawler for URL"),this.request("/structural-content/crawl",{method:"POST",body:JSON.stringify({url:a})})):this.request("/content/analyze-structure",{method:"POST",body:JSON.stringify({content:o,url:a})})}async saveLastStructureAnalysis(o){return this.request("/structure/last",{method:"POST",body:JSON.stringify({analysis:o})})}async getLastStructureAnalysis(o){const a=o?`?url=${encodeURIComponent(o)}`:"";return this.request(`/structure/last${a}`,{method:"GET"})}async getGA4PageMetrics(o){return this.request("/analytics/ga4",{method:"POST",body:JSON.stringify(o)})}async getSearchConsoleMetrics(o){return this.request("/analytics/search-console",{method:"POST",body:JSON.stringify(o)})}async getLLMVisibility(o){return this.request("/analytics/llm-visibility",{method:"POST",body:JSON.stringify(o)})}async applyStructureSuggestions(o,a){const c=await fetch(`${lt}/content/apply-suggestions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")||""}`},body:JSON.stringify({content:o,suggestions:a})}),d=await c.json();if(!c.ok)throw new Error("Failed to apply structure suggestions: "+(d.error||c.status));return d}async getAIVisibilityAnalysis(o,a,c){const d=new URLSearchParams;a&&d.append("industry",a),c?.fast&&d.append("fast","true");const m=d.toString(),v=m?`?${m}`:"";return this.request(`/ai-visibility/${encodeURIComponent(o)}${v}`,{signal:c?.signal})}async analyzeSingleCompetitor(o,a){return await this.request("/ai-visibility/analyze-competitor",{method:"POST",body:JSON.stringify({companyName:o,industry:a})})}}const Dt=new lg,Kd=({data:l})=>{console.log("[AIVisibilityTable] Rendering with data:",l);const[o,a]=w.useState(!1),[c,d]=w.useState(""),[m,v]=w.useState(l.competitors||[]),[S,y]=w.useState(!1),[x,j]=w.useState(""),[L,_]=w.useState(!1),[F,E]=w.useState(!1),[$,U]=w.useState("");w.useEffect(()=>{if(!l||!l.competitors){console.error("[AIVisibilityTable] Invalid data structure:",l),a(!0),d("Invalid data structure received");return}if(!Array.isArray(l.competitors)){console.error("[AIVisibilityTable] Competitors is not an array:",l.competitors),a(!0),d("Competitors data is not in expected format");return}a(!1),d(""),console.log("[AIVisibilityTable] Data validation passed, competitors count:",l.competitors.length)},[l]);const M=W=>{const I=m[W].name;if(window.confirm(`Are you sure you want to remove "${I}" from the analysis?`)){const C=m.filter((k,R)=>R!==W);v(C)}},oe=async()=>{if(!x.trim()){alert("Please enter a competitor name");return}if(m.some(W=>W.name.toLowerCase()===x.toLowerCase())){alert("This competitor is already in the analysis");return}console.log("[AIVisibilityTable] Adding competitor:",x),console.log("[AIVisibilityTable] Current industry:",l.industry),E(!0);try{const W=await Dt.analyzeSingleCompetitor(x,l.industry);console.log("[AIVisibilityTable] API response received:",W);let I;if(W&&W.success&&W.data)I=W.data,console.log("[AIVisibilityTable] Extracted competitor data:",I);else if(W&&W.name)I=W,console.log("[AIVisibilityTable] Using direct competitor data:",I);else throw new Error("Invalid response format from API");if(!I||!I.name)throw new Error("Invalid competitor data received from API");const C=[...m,I];console.log("[AIVisibilityTable] Updated competitors list:",C),v(C),j(""),y(!1),U(`${x} has been added successfully!`),setTimeout(()=>U(""),3e3)}catch(W){console.error("Error adding competitor:",W),alert(`Failed to add competitor: ${W.message}`)}finally{E(!1)}},ne=W=>W>=2.5?"text-green-600 bg-green-100":W>=1.5?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",me=W=>W>=2.5?"text-green-600 font-semibold":W>=1.5?"text-yellow-600 font-semibold":"text-red-600 font-semibold",fe=W=>W.toFixed(4);return o?n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error Loading Competitor Data"}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:c}),n.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 text-sm text-red-600 hover:text-red-500 underline",children:"Reload page"})]})]})}):n.jsxs("div",{className:"space-y-6 w-full max-w-full overflow-hidden",children:[m.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Competitor Performance Overview"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Visual comparison of average AI visibility scores across competitors"})]}),n.jsx("div",{className:"h-48 sm:h-56 lg:h-64 flex items-end justify-between space-x-1 sm:space-x-2",children:m.map((W,I)=>{const C=W.totalScore||0,k=Math.min(100,Math.max(5,C/10*100)),R=ne(C);return n.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[n.jsx("div",{className:"w-full max-w-12 sm:max-w-16 bg-gray-200 rounded-t-lg relative",children:n.jsx("div",{className:`${R} rounded-t-lg transition-all duration-500 ease-out`,style:{height:`${k}%`,minHeight:"20px"},children:n.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 text-xs font-medium text-gray-700 whitespace-nowrap",children:fe(C)})})}),n.jsx("div",{className:"mt-2 text-xs text-gray-600 text-center font-medium truncate w-full",children:W.name})]},I)})}),n.jsx("div",{className:"mt-4 text-center",children:n.jsxs("div",{className:"inline-flex items-center flex-wrap justify-center gap-2 sm:gap-4 text-xs text-gray-500",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-3 h-3 bg-green-500 rounded mr-1"}),n.jsx("span",{children:"Excellent (8-10)"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded mr-1"}),n.jsx("span",{children:"Good (6-7.9)"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded mr-1"}),n.jsx("span",{children:"Fair (4-5.9)"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-3 h-3 bg-red-500 rounded mr-1"}),n.jsx("span",{children:"Poor (0-3.9)"})]})]})})]}),m.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Competitor Snapshot"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Holistic view of your site versus competitors across multiple dimensions"})]}),n.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 lg:gap-6 mb-6 lg:mb-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Traffic Metrics"}),n.jsx("div",{className:"space-y-3",children:m.map((W,I)=>{const C=Math.floor((W.totalScore||0)*1e4)+Math.floor(Math.random()*5e4),k=Math.floor(C*.8),R=(2+(W.totalScore||0)*.3).toFixed(1),B=Math.floor((W.totalScore||0)*60)+30,K=Math.max(20,80-(W.totalScore||0)*5);return n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h5",{className:"font-medium text-gray-900",children:W.name}),n.jsxs("span",{className:"text-xs text-gray-500",children:["Competitor ",I+1]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Est. Visits:"}),n.jsx("span",{className:"ml-2 font-medium",children:C.toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Unique Visitors:"}),n.jsx("span",{className:"ml-2 font-medium",children:k.toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Pages/Visit:"}),n.jsx("span",{className:"ml-2 font-medium",children:R})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Avg Duration:"}),n.jsxs("span",{className:"ml-2 font-medium",children:[B,"s"]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("span",{className:"text-gray-600",children:"Bounce Rate:"}),n.jsxs("span",{className:"ml-2 font-medium",children:[K,"%"]})]})]})]},I)})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"Market Positioning & Growth"}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Growth Quadrant Analysis"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Positioning based on Traffic vs Growth"})]}),n.jsxs("div",{className:"relative h-48 bg-white border border-gray-200 rounded-lg",children:[n.jsxs("div",{className:"absolute left-0 top-0 h-full flex flex-col justify-between text-xs text-gray-500 px-1",children:[n.jsx("span",{children:"High Growth"}),n.jsx("span",{children:"Low Growth"})]}),n.jsxs("div",{className:"absolute bottom-0 left-0 w-full flex justify-between text-xs text-gray-500 px-2 pb-1",children:[n.jsx("span",{children:"Low Traffic"}),n.jsx("span",{children:"High Traffic"})]}),n.jsx("div",{className:"absolute top-1/2 left-0 w-full h-px bg-gray-300"}),n.jsx("div",{className:"absolute left-1/2 top-0 w-px h-full bg-gray-300"}),n.jsx("div",{className:"absolute top-2 left-2 text-xs font-medium text-blue-600",children:"Game Changers"}),n.jsx("div",{className:"absolute top-2 right-2 text-xs font-medium text-green-600",children:"Leaders"}),n.jsx("div",{className:"absolute bottom-2 left-2 text-xs font-medium text-yellow-600",children:"Niche Players"}),n.jsx("div",{className:"absolute bottom-2 right-2 text-xs font-medium text-purple-600",children:"Established Players"}),m.map((W,I)=>{const C=(W.totalScore||0)*10,k=Math.floor(Math.random()*100),R=Math.min(90,Math.max(10,C)),B=Math.min(90,Math.max(10,100-k));return n.jsx("div",{className:"absolute w-3 h-3 bg-red-500 rounded-full border-2 border-white shadow-lg",style:{left:`${R}%`,top:`${B}%`},title:`${W.name}: Traffic ${Math.round(C)}, Growth ${k}%`},I)})]})]})]})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4",children:"Channel Mix & Engagement"}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 lg:gap-4",children:m.map((W,I)=>{const C=Math.floor((W.totalScore||0)*10)+30,k=Math.floor(Math.random()*20)+5,R=Math.floor(Math.random()*15)+5,B=100-C-k-R;return n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:W.name}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Organic:"}),n.jsxs("span",{className:"font-medium",children:[C,"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${C}%`}})}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Paid:"}),n.jsxs("span",{className:"font-medium",children:[k,"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${k}%`}})}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Referral:"}),n.jsxs("span",{className:"font-medium",children:[R,"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:`${R}%`}})}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Direct:"}),n.jsxs("span",{className:"font-medium",children:[B,"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:`${B}%`}})})]})]},I)})})]}),n.jsxs("div",{className:"mb-6 lg:mb-8",children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4",children:"Competition Level & Keyword Overlap"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h5",{className:"font-medium text-gray-900",children:"Competition Level Ranking"}),n.jsx("div",{className:"space-y-3",children:m.map((W,I)=>{const C=Math.floor((W.totalScore||0)*10)+Math.floor(Math.random()*30),k=Math.floor(C*10)+Math.floor(Math.random()*100);return n.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-sm font-medium text-blue-600",children:I+1})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-900",children:W.name}),n.jsxs("div",{className:"text-sm text-gray-600",children:[k," shared keywords"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-lg font-bold text-blue-600",children:C}),n.jsx("div",{className:"text-xs text-gray-500",children:"Competition Score"})]})]},I)})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h5",{className:"font-medium text-gray-900",children:"Keyword Gap Analysis"}),n.jsx("div",{className:"space-y-3",children:m.map((W,I)=>{const C=Math.floor(Math.random()*200)+50,k=Math.floor((W.totalScore||0)*10)+Math.floor(Math.random()*20);return n.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-medium text-gray-900",children:W.name}),n.jsx("span",{className:"text-sm text-gray-500",children:"Opportunity"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Missing Keywords:"}),n.jsx("span",{className:"font-medium",children:C})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${k}%`}})}),n.jsxs("div",{className:"text-right text-xs text-gray-500",children:[k,"% opportunity score"]})]})]},I)})})]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4",children:"Backlink Profile Comparison"}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:m.map((W,I)=>{const C=Math.floor((W.totalScore||0)*1e3)+Math.floor(Math.random()*5e3),k=Math.floor(C*.3)+Math.floor(Math.random()*200),R=Math.floor(C*.8),B=C-R;return n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:W.name}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Total Backlinks:"}),n.jsx("span",{className:"ml-2 font-medium",children:C.toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Referring Domains:"}),n.jsx("span",{className:"ml-2 font-medium",children:k.toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Dofollow:"}),n.jsx("span",{className:"ml-2 font-medium",children:R.toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Nofollow:"}),n.jsx("span",{className:"ml-2 font-medium",children:B.toLocaleString()})]})]})]},I)})})]})]}),$&&n.jsx("div",{className:"mb-4 bg-green-50 border border-green-200 rounded-md p-4",children:n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),n.jsx("div",{className:"ml-3",children:n.jsx("p",{className:"text-sm font-medium text-green-800",children:$})})]})}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Add New Competitor"}),n.jsx("button",{onClick:()=>y(!S),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:S?"Cancel":"Add Competitor"})]}),S&&n.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[n.jsxs("div",{className:"flex items-end space-x-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{htmlFor:"competitor-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Competitor Company Name"}),n.jsx("input",{type:"text",id:"competitor-name",value:x,onChange:W=>{const I=W.target.value.trim(),C=/^(https?:\/\/)?[^\s]+\.[^\s]+/i.test(I);if(_(C),C)j(I);else{const k=I.replace(/[^A-Za-z]/g,"");j(k)}try{W.target.setCustomValidity("")}catch{}},onKeyPress:W=>{W.key==="Enter"&&!F&&x.trim()&&oe()},placeholder:"Enter competitor company name or paste a URL...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-900 placeholder-gray-400 bg-white",onInvalid:W=>{W.preventDefault();const I=L?"Please enter a valid URL (e.g., https://example.com)":"Only letters (A–Z, a–z) are allowed";W.target.setCustomValidity(I)},onBlur:W=>{const I=W.currentTarget.value.trim();if(!I){W.currentTarget.setCustomValidity("");return}if(L){const C=/^(https?:\/\/)?([A-Za-z0-9-]+\.)+[A-Za-z]{2,}(\/[^\s]*)?$/i.test(I);W.currentTarget.setCustomValidity(C?"":"Please enter a valid URL (e.g., https://example.com)")}else{const C=/^[A-Za-z]+$/.test(I);W.currentTarget.setCustomValidity(C?"":"Only letters (A–Z, a–z) are allowed")}},disabled:F})]}),n.jsx("div",{className:"flex-shrink-0",children:n.jsx("button",{onClick:oe,disabled:F||!x.trim(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:F?n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Analyzing..."]}):"Add & Analyze"})})]}),n.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["The system will automatically analyze AI visibility scores for the new competitor.",F&&n.jsxs("span",{className:"text-blue-600 font-medium",children:[" ","This may take 30-60 seconds as we analyze across 4 AI engines."]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Market Analysis Results"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Detailed scoring breakdown for each company across multiple models"})]}),n.jsx("div",{className:"overflow-x-auto w-full",children:n.jsxs("table",{className:"w-full min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gemini"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Perplexity"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Claude"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ChatGPT"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Average Score"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map((W,I)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:n.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:n.jsx("span",{className:"text-sm font-medium text-blue-600",children:W.name.charAt(0).toUpperCase()})})}),n.jsx("div",{className:"ml-4",children:n.jsx("div",{className:"text-sm font-medium text-gray-900",children:W.name})})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ne(W.aiScores.gemini)}`,children:fe(W.aiScores.gemini)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ne(W.aiScores.perplexity)}`,children:fe(W.aiScores.perplexity)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ne(W.aiScores.claude)}`,children:fe(W.aiScores.claude)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ne(W.aiScores.chatgpt)}`,children:fe(W.aiScores.chatgpt)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`text-sm font-semibold ${me(W.totalScore)}`,children:fe(W.totalScore)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsx("button",{onClick:()=>M(I),className:"text-red-600 hover:text-red-900 bg-red-50 hover:bg-red-100 p-2 rounded-full transition-colors",title:"Delete competitor",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},I))})]})})]})]})},ig="llm_qa_sessions",cg="llm_qa_current_session";function xi({title:l,icon:o,iconBgColor:a,children:c}){return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:l}),n.jsx("div",{className:`w-10 h-10 rounded-full ${a} flex items-center justify-center`,children:o})]}),c]})}function ug({competitors:l,company:o}){const c=(()=>{if(!l||l.length===0)return{positive:0,neutral:0,negative:0,total:0,drivers:{positive:[],neutral:[],negative:[]}};let v=0,S=0,y=0,x=0;const j=[],L=[],_=[];l.forEach(U=>{const oe=(U.breakdowns||{}).gemini||{},ne=oe.mentionsScore||0,me=oe.sentimentScore||.5;v+=ne,me<.3?(x+=ne,_.push(U.name||"Unknown")):me>.7?(S+=ne,j.push(U.name||"Unknown")):(y+=ne,L.push(U.name||"Unknown"))});const F=v>0?S/v*100:0,E=v>0?y/v*100:0,$=v>0?x/v*100:0;return{positive:Math.round(F*100)/100,neutral:Math.round(E*100)/100,negative:Math.round($*100)/100,total:v,drivers:{positive:j.slice(0,3),neutral:L.slice(0,3),negative:_.slice(0,3)}}})(),d=c.positive>c.negative?"Positive":c.negative>c.positive?"Negative":"Neutral",m=c.positive>c.negative?"text-green-600":c.negative>c.positive?"text-red-600":"text-yellow-600";return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sentiment Analysis"}),n.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`text-2xl font-bold ${m}`,children:d}),n.jsx("div",{className:"text-sm text-gray-600",children:"Overall Brand Sentiment"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Positive"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${c.positive}%`}})}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[c.positive,"%"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Neutral"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:`${c.neutral}%`}})}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[c.neutral,"%"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Negative"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:`${c.negative}%`}})}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[c.negative,"%"]})]})]})]})]})]})}function dg({score:l,industry:o,metrics:a}){const d=(y=>{const x=Math.max(0,Math.min(10,y));return Math.round(x*10)})(l),m=y=>y>=80?"text-green-600":y>=60?"text-blue-600":y>=40?"text-yellow-600":"text-red-600",v=y=>y>=80?"bg-green-500":y>=60?"bg-blue-500":y>=40?"bg-yellow-500":"bg-red-500",S=y=>y>=80?"Excellent":y>=60?"Good":y>=40?"Fair":"Poor";return n.jsx(xi,{title:"AI Visibility Score",icon:n.jsx(ln,{className:"w-5 h-5 text-white"}),iconBgColor:"bg-green-500",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`text-4xl font-bold ${m(d)} mb-2`,children:d}),n.jsx("div",{className:"text-gray-600 mb-2",children:"out of 100"}),n.jsx("div",{className:`text-lg font-semibold ${m(d)} mb-3`,children:S(d)}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:n.jsx("div",{className:`h-3 rounded-full ${v(d)} transition-all duration-500`,style:{width:`${Math.min(100,Math.max(0,d))}%`}})})]})})}function mg({serviceStatus:l,aiScores:o}){const a=[{name:"ChatGPT",key:"chatgpt",icon:n.jsx(on,{className:"w-4 h-4"})},{name:"Gemini",key:"gemini",icon:n.jsx(on,{className:"w-4 h-4"})},{name:"Perplexity",key:"perplexity",icon:n.jsx(on,{className:"w-4 h-4"})},{name:"Claude",key:"claude",icon:n.jsx(on,{className:"w-4 h-4"})}],d=(()=>{const m={chatgpt:!1,gemini:!1,perplexity:!1,claude:!1};return o&&(m.chatgpt=o.chatgpt!==void 0&&o.chatgpt>0,m.gemini=o.gemini!==void 0&&o.gemini>0,m.perplexity=o.perplexity!==void 0&&o.perplexity>0,m.claude=o.claude!==void 0&&o.claude>0),m})();return a.filter(m=>d[m.key]).length,n.jsx(xi,{title:"LLM Presence",icon:n.jsx(Is,{className:"w-5 h-5 text-white"}),iconBgColor:"bg-blue-500",children:n.jsx("div",{className:"space-y-3",children:a.map(m=>{const v=d[m.key];return n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-700",children:m.name}),n.jsx("div",{className:`flex items-center ${v?"text-green-600":"text-red-600"}`,children:v?n.jsxs(n.Fragment,{children:[m.icon,n.jsx("span",{className:"ml-1 text-sm",children:"Available"})]}):n.jsxs(n.Fragment,{children:[n.jsx(Dd,{className:"w-4 h-4"}),n.jsx("span",{className:"ml-1 text-sm",children:"Not Available"})]})})]},m.key)})})})}function hg({competitors:l,industry:o}){const c=(d=>{if(!d||d.length===0)return{status:"No Data",rank:"N/A",color:"text-gray-500",score:0,rawScore:0};const m=d.reduce((S,y)=>S+(y.totalScore||0),0)/d.length,v=Math.round(m*10);return v>=80?{status:"Excellent",rank:"Top 10%",color:"text-purple-600",score:v,rawScore:m}:v>=70?{status:"Above Average",rank:"Top 25%",color:"text-blue-600",score:v,rawScore:m}:v>=60?{status:"Average",rank:"Top 50%",color:"text-yellow-600",score:v,rawScore:m}:v>=50?{status:"Below Average",rank:"Bottom 50%",color:"text-orange-600",score:v,rawScore:m}:{status:"Poor",rank:"Bottom 25%",color:"text-red-600",score:v,rawScore:m}})(l);return Math.min(5,Math.max(1,Math.ceil((l?.length||0)/2))),n.jsx(xi,{title:"Competitor Benchmark",icon:n.jsx(Fs,{className:"w-5 h-5 text-white"}),iconBgColor:"bg-purple-500",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`text-2xl font-bold ${c.color} mb-2`,children:c.status}),n.jsxs("div",{className:"text-gray-600 mb-2",children:[c.rank," in your industry"]}),n.jsxs("div",{className:"text-lg font-semibold text-gray-700 mb-3",children:["Score: ",c.score,"/100"]})]})})}function fg(){const{user:l}=Gr(),[o]=_n(ig,[]);_n(cg,null),dn();const[a,c]=w.useState(()=>{try{const G=localStorage.getItem("overview_market_analysis");return G&&JSON.parse(G).originalInput||""}catch{return""}}),[d,m]=w.useState("root-domain"),[v,S]=w.useState(!1),[y,x]=w.useState(()=>{try{const G=localStorage.getItem("overview_market_analysis");return G&&JSON.parse(G).inputType||"company"}catch{return"company"}}),[j,L]=w.useState(()=>{try{const G=localStorage.getItem("overview_market_analysis");if(G){const f=JSON.parse(G);return f.data||f}return null}catch{return null}}),[_,F]=w.useState(null),[E,$]=w.useState(!1),[U,M]=w.useState(null),[oe,ne]=w.useState(!1),[me,fe]=w.useState([]),[W,I]=w.useState(0),[C,k]=w.useState(!1);w.useEffect(()=>{const G=Je.getHistoryItems();fe(G),console.log("[Overview] Loaded history items:",G.length)},[W]),w.useEffect(()=>{try{const G=localStorage.getItem("overview_market_analysis");if(G){const f=JSON.parse(G);console.log("[Overview] Restoring cached analysis data:",f),f.originalInput&&c(f.originalInput),f.inputType&&x(f.inputType),f.analysisType&&m(f.analysisType),f.data&&L(f.data),console.log("[Overview] Cached data restored successfully")}}catch(G){console.error("[Overview] Error restoring cached data:",G)}},[]),w.useEffect(()=>{const G=h=>{(h.key==="comprehensive_history"||h.key==="sessions")&&(console.log("[Overview] Storage changed, refreshing data"),I(g=>g+1))};window.addEventListener("storage",G);const f=setInterval(()=>{Je.getHistoryItems().length!==me.length&&(console.log("[Overview] Item count changed, refreshing data"),I(g=>g+1))},3e3);return()=>{window.removeEventListener("storage",G),clearInterval(f)}},[me.length]),w.useEffect(()=>{const G=f=>{f.target.closest(".dropdown-container")||ne(!1)};return document.addEventListener("mousedown",G),()=>{document.removeEventListener("mousedown",G)}},[]),l&&o.filter(G=>G.userId===l.id);const R=G=>{try{const h=G.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/"),g=h[0];return h.length===1||h.length>1&&h[1].trim()===""?"root-domain":"exact-url"}catch(f){return console.error("Error detecting URL type:",f),"root-domain"}},B=G=>{try{let f=G.replace(/^https?:\/\//,"").replace(/^www\./,"");f=f.split("/")[0].split("?")[0].split("#")[0];const h=f.split(".");return h.length>=2?h[h.length-2]:f}catch(f){return console.error("Error extracting company from URL:",f),G}},K=(G,f)=>{const h=G.toLowerCase();return f?.toLowerCase(),h.includes("cloud")&&(h.includes("migration")||h.includes("migrate")||h.includes("transform"))?"Cloud Migration & Transformation":h.includes("cloud")||h.includes("aws")||h.includes("azure")||h.includes("gcp")||h.includes("kubernetes")||h.includes("docker")||h.includes("devops")?"Cloud Computing & DevOps":h.includes("ai")||h.includes("artificial intelligence")||h.includes("machine learning")||h.includes("ml")||h.includes("deep learning")||h.includes("neural")?"Artificial Intelligence & ML":h.includes("cyber")||h.includes("security")||h.includes("firewall")||h.includes("vpn")||h.includes("threat")||h.includes("protection")?"Cybersecurity":h.includes("data")&&(h.includes("analytics")||h.includes("warehouse")||h.includes("lake")||h.includes("science")||h.includes("mining"))?"Data Analytics & Science":h.includes("saas")||h.includes("software as a service")||h.includes("platform")||h.includes("api")||h.includes("integration")?"SaaS & Platform Services":h.includes("tech")||h.includes("software")||h.includes("digital")||h.includes("innovation")?"Technology & Software":h.includes("bank")||h.includes("finance")||h.includes("credit")||h.includes("loan")||h.includes("payment")||h.includes("fintech")||h.includes("investment")?"Financial Services & Fintech":h.includes("health")||h.includes("medical")||h.includes("pharma")||h.includes("care")||h.includes("biotech")||h.includes("telehealth")?"Healthcare & Biotech":h.includes("retail")||h.includes("shop")||h.includes("store")||h.includes("commerce")||h.includes("ecommerce")||h.includes("marketplace")?"Retail & E-commerce":h.includes("edu")||h.includes("school")||h.includes("university")||h.includes("college")||h.includes("learning")||h.includes("training")?"Education & Training":h.includes("media")||h.includes("news")||h.includes("entertainment")||h.includes("tv")||h.includes("content")||h.includes("publishing")?"Media & Entertainment":h.includes("auto")||h.includes("car")||h.includes("vehicle")||h.includes("transport")||h.includes("logistics")||h.includes("supply chain")?"Automotive & Transportation":h.includes("food")||h.includes("restaurant")||h.includes("cafe")||h.includes("dining")||h.includes("delivery")||h.includes("catering")?"Food & Beverage":h.includes("real")||h.includes("estate")||h.includes("property")||h.includes("housing")||h.includes("construction")||h.includes("architecture")?"Real Estate & Construction":h.includes("energy")||h.includes("oil")||h.includes("gas")||h.includes("power")||h.includes("renewable")||h.includes("solar")||h.includes("wind")?"Energy & Utilities":h.includes("consulting")||h.includes("consultant")||h.includes("advisory")||h.includes("strategy")||h.includes("management")?"Consulting & Advisory":"Business Services"},J=async()=>{if(!a.trim()){F("Please enter a company name or URL to analyze.");return}let G=a.trim(),f="company";(a.includes("http://")||a.includes("https://")||a.includes("www."))&&(G=B(a),f="url",console.log("[Overview] Detected URL, extracted company name:",G));const h=K(G,a);console.log("[Overview] Detected industry:",h),S(!0),F(null),$(!1);try{const g=new AbortController;M(g),console.log("[Overview] Starting AI visibility analysis for:",G),console.log("[Overview] Detected industry:",h);const b=await Dt.getAIVisibilityAnalysis(G,h,{signal:g.signal});if(console.log("[Overview] Analysis results received:",b),b.success&&b.data){console.log("[Overview] Setting analysis result:",b.data);const A={...b.data,industry:h,originalInput:a,inputType:f,analysisType:d};L(A),$(!0);try{const z=b.data.competitors||[],X={id:`ai-visibility-${Date.now()}`,type:"ai-visibility",name:`AI Visibility Analysis - ${G}`,timestamp:new Date().toISOString(),status:"completed",company:G,industry:h,analysis:{competitors:z.map(ue=>({name:ue.name,mentions:ue.mentions||0,status:"success"})),serviceStatus:b.data.serviceStatus||{gemini:!0,perplexity:!0,claude:!0,chatgpt:!0},summary:{totalCompetitors:z.length,averageVisibilityScore:z.reduce((ue,ae)=>ue+(ae.mentions||0),0)/Math.max(z.length,1),topCompetitor:z.length>0?z.reduce((ue,ae)=>(ae.mentions||0)>(ue.mentions||0)?ae:ue).name:"None"}}};try{await Je.addHistoryItem(X),window.dispatchEvent(new CustomEvent("new-analysis-created",{detail:{type:"ai-visibility",timestamp:new Date().toISOString()}})),console.log("[Overview] Analysis saved to history:",X)}catch(ue){console.error("[Overview] Failed to save analysis to history:",ue),window.dispatchEvent(new CustomEvent("new-analysis-created",{detail:{type:"ai-visibility",timestamp:new Date().toISOString()}}))}}catch(z){console.warn("Failed to save analysis to history:",z)}try{localStorage.setItem("overview_market_analysis",JSON.stringify({company:G,originalInput:a,inputType:f,industry:h,analysisType:d,data:A,timestamp:Date.now()}))}catch(z){console.warn("Failed to cache analysis results:",z)}}else console.error("[Overview] Analysis failed:",b.error),F(b.error||"Analysis failed. Please try again.")}catch(g){if(g.name==="AbortError"){console.log("Analysis was cancelled");return}console.error("AI analysis error:",g),F(g.message||"Analysis failed. Please try again.")}finally{S(!1),M(null)}},le=G=>{if(G?.aiVisibilityScore!==void 0&&G?.aiVisibilityScore!==null)return G.aiVisibilityScore;if(G?.totalScore!==void 0&&G?.totalScore!==null)return G.totalScore;if(G?.visibilityScore!==void 0&&G?.visibilityScore!==null)return G.visibilityScore;if(G?.competitors&&G.competitors.length>0){const f=G.competitors.find(g=>g.name?.toLowerCase()===G.company?.toLowerCase());if(f?.totalScore!==void 0&&f?.totalScore!==null)return f.totalScore;const h=G.competitors.filter(g=>g.totalScore!==void 0&&g.totalScore!==null).map(g=>g.totalScore);if(h.length>0)return h.reduce((b,A)=>b+A,0)/h.length}return 0},be=G=>{if(!G?.competitors||G.competitors.length===0)return null;const f=G.competitors.find(ue=>ue.name?.toLowerCase()===G.company?.toLowerCase());if(!f)return null;const h=f.totalScore||0,g=f.aiScores||{},b=f.breakdowns||{},A=Object.values(g).filter(ue=>typeof ue=="number"),z=A.length>0?A.reduce((ue,ae)=>ue+ae,0)/A.length:0,X=b.gemini||{};return{aiVisibilityScore:Math.min(10,Math.max(0,h)),brandMentions:Number((X.mentionsScore||0).toFixed(5)),medianCompetitorMentions:Number((Math.round(z*10)/10).toFixed(5)),shareOfVoice:Number((Math.round(h/10*100*100)/100).toFixed(5)),averagePosition:Number((X.positionScore||0).toFixed(5)),searchVolume:"N/A",sentiment:X.sentimentScore>.5?"Positive":X.sentimentScore<.3?"Negative":"Neutral",platformBreakdown:g,totalMentions:Number((X.mentionsScore||0).toFixed(5))}};return n.jsxs("div",{className:"w-full max-w-full mx-auto space-y-6 lg:space-y-8 px-2 sm:px-4 lg:px-6",children:[n.jsx("div",{className:"flex flex-col lg:flex-row justify-between items-start gap-4",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:["Welcome ",l?.displayName?.split(" ")[0]||l?.name?.split(" ")[0]||"User"]}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Welcome to kabini.ai - Your AI-Powered Content Enhancement Platform"})]})}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 sm:p-6 lg:p-8 shadow-sm",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Website Analysis Dashboard"}),n.jsx("p",{className:"text-gray-600 text-lg",children:"Enter your website URL or company name to get instant AI visibility insights and market positioning."})]}),n.jsxs("div",{className:"flex flex-col lg:flex-row items-stretch gap-4 mb-8",children:[n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex",children:[n.jsx("input",{type:"text",value:a,onChange:G=>lo(G,f=>{if(c(f),f.includes("http://")||f.includes("https://")||f.includes("www.")){const h=R(f);m(h),console.log("[Overview] Auto-detected URL type:",h)}}),onPaste:G=>io(G,f=>{if(c(f),f.includes("http://")||f.includes("https://")||f.includes("www.")){const h=R(f);m(h),console.log("[Overview] Auto-detected URL type (pasted):",h)}}),onKeyDown:co,onKeyPress:G=>{G.key==="Enter"&&!v&&a.trim()&&J()},required:!0,placeholder:"Enter company name or URL",className:"flex-1 px-4 py-4 border-2 border-blue-600 rounded-l-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg h-[60px]",disabled:v}),n.jsxs("div",{className:"relative dropdown-container ml-1",children:[n.jsxs("button",{type:"button",onClick:()=>ne(!oe),className:"px-4 py-4 border-2 border-blue-600 bg-white text-gray-700 font-medium text-lg h-[60px] min-w-[140px] flex items-center justify-between hover:bg-gray-50 transition-colors rounded-r-xl",children:[n.jsx("span",{children:d==="root-domain"?"Root Domain":"Exact URL"}),n.jsx("svg",{className:`w-5 h-5 transition-transform ${oe?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),oe&&n.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border-2 border-blue-600 rounded-xl shadow-lg z-10 min-w-[140px]",children:n.jsxs("div",{className:"py-2",children:[n.jsx("button",{type:"button",onClick:()=>{m("root-domain"),ne(!1)},className:`w-full px-4 py-3 text-left hover:bg-blue-50 transition-colors ${d==="root-domain"?"bg-blue-50 text-blue-700 font-medium":"text-gray-700"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Root Domain"}),d==="root-domain"&&n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})}),n.jsx("button",{type:"button",onClick:()=>{m("exact-url"),ne(!1)},className:`w-full px-4 py-3 text-left hover:bg-blue-50 transition-colors ${d==="exact-url"?"bg-blue-50 text-blue-700 font-medium":"text-gray-700"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Exact URL"}),d==="exact-url"&&n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})})]})})]})]})}),n.jsxs("div",{className:"flex flex-col gap-2 lg:flex-row lg:items-stretch",children:[n.jsx("button",{onClick:J,disabled:v||!a.trim(),className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-8 py-4 rounded-xl font-medium flex items-center justify-center gap-2 transition-colors shadow-lg w-full lg:w-auto min-w-[140px] h-[60px]",children:v?n.jsxs(n.Fragment,{children:[n.jsx(wn,{className:"w-5 h-5 animate-spin"}),"Analyzing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ci,{className:"w-5 h-5"}),"Analyze Now"]})}),v&&n.jsx("button",{onClick:()=>{try{U?.abort()}catch{}S(!1)},className:"bg-red-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-colors w-full lg:w-auto min-w-[120px] h-[60px]",children:"Stop"})]})]}),_&&n.jsx("div",{className:"mb-6 text-red-700 bg-red-50 border border-red-200 rounded-lg px-4 py-3",children:_}),E&&n.jsx("div",{className:"mb-6 text-green-700 bg-green-50 border border-green-200 rounded-lg px-4 py-3",children:"✅ Analysis completed successfully! Results are ready below."}),j&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 lg:gap-6 mb-6 lg:mb-8",children:[n.jsx(dg,{score:le(j),industry:j?.industry,metrics:be(j)}),n.jsx(mg,{serviceStatus:j?.serviceStatus,aiScores:j?.competitors?.[0]?.aiScores}),n.jsx(hg,{competitors:j?.competitors||[],industry:j?.industry}),n.jsx(ug,{competitors:j?.competitors||[],company:j?.company})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Competitor Analysis"}),j.competitors&&Array.isArray(j.competitors)&&j.competitors.length>0?n.jsx(Kd,{data:j}):n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 8a2 2 0 011.414-1.414l4 4a2 2 0 010 2.828l-4 4a2 2 0 01-2.828 0l-4-4a2 2 0 010-2.828l4-4A2 2 0 018 8z",clipRule:"evenodd"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"AI Visibility Analysis Complete"}),n.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Your AI Visibility analysis has been completed successfully.",j.competitors&&j.competitors.length>0?` Found ${j.competitors.length} competitors for analysis.`:" No competitors found for this analysis."]})]})]})})]})]})]})]})}const pg="llm_qa_sessions",gg="llm_qa_current_session";function vi({title:l,icon:o,iconBgColor:a,children:c}){return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:l}),n.jsx("div",{className:`w-10 h-10 rounded-full ${a} flex items-center justify-center`,children:o})]}),c]})}function yg({score:l,industry:o,metrics:a}){const d=(y=>{const x=Math.max(0,Math.min(10,y));return Math.round(x*10)})(l),m=y=>y>=80?"text-green-600":y>=60?"text-blue-600":y>=40?"text-yellow-600":"text-red-600",v=y=>y>=80?"bg-green-500":y>=60?"bg-blue-500":y>=40?"bg-yellow-500":"bg-red-500",S=y=>y>=80?"Excellent":y>=60?"Good":y>=40?"Fair":"Poor";return n.jsx(vi,{title:"AI Visibility Score",icon:n.jsx(ln,{className:"w-5 h-5 text-white"}),iconBgColor:"bg-green-500",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`text-4xl font-bold ${m(d)} mb-2`,children:d}),n.jsx("div",{className:"text-gray-600 mb-2",children:"out of 100"}),n.jsx("div",{className:`text-lg font-semibold ${m(d)} mb-3`,children:S(d)}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:n.jsx("div",{className:`h-3 rounded-full ${v(d)} transition-all duration-500`,style:{width:`${Math.min(100,Math.max(0,d))}%`}})})]})})}function xg({serviceStatus:l,aiScores:o}){const a=[{name:"ChatGPT",key:"chatgpt",icon:n.jsx(on,{className:"w-4 h-4"})},{name:"Gemini",key:"gemini",icon:n.jsx(on,{className:"w-4 h-4"})},{name:"Perplexity",key:"perplexity",icon:n.jsx(on,{className:"w-4 h-4"})},{name:"Claude",key:"claude",icon:n.jsx(on,{className:"w-4 h-4"})}],d=(()=>{const m={chatgpt:!1,gemini:!1,perplexity:!1,claude:!1};return o&&(m.chatgpt=o.chatgpt!==void 0&&o.chatgpt>0,m.gemini=o.gemini!==void 0&&o.gemini>0,m.perplexity=o.perplexity!==void 0&&o.perplexity>0,m.claude=o.claude!==void 0&&o.claude>0),m})();return a.filter(m=>d[m.key]).length,n.jsx(vi,{title:"LLM Presence",icon:n.jsx(Is,{className:"w-5 h-5 text-white"}),iconBgColor:"bg-blue-500",children:n.jsx("div",{className:"space-y-3",children:a.map(m=>{const v=d[m.key];return n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-700",children:m.name}),n.jsx("div",{className:`flex items-center ${v?"text-green-600":"text-red-600"}`,children:v?n.jsxs(n.Fragment,{children:[m.icon,n.jsx("span",{className:"ml-1 text-sm",children:"Available"})]}):n.jsxs(n.Fragment,{children:[n.jsx(Dd,{className:"w-4 h-4"}),n.jsx("span",{className:"ml-1 text-sm",children:"Not Available"})]})})]},m.key)})})})}function vg({competitors:l,industry:o}){const c=(d=>{if(!d||d.length===0)return{status:"No Data",rank:"N/A",color:"text-gray-500",score:0,rawScore:0};const m=d.reduce((S,y)=>S+(y.totalScore||0),0)/d.length,v=Math.round(m*10);return v>=80?{status:"Excellent",rank:"Top 10%",color:"text-purple-600",score:v,rawScore:m}:v>=70?{status:"Above Average",rank:"Top 25%",color:"text-blue-600",score:v,rawScore:m}:v>=60?{status:"Average",rank:"Top 50%",color:"text-yellow-600",score:v,rawScore:m}:v>=50?{status:"Below Average",rank:"Bottom 50%",color:"text-orange-600",score:v,rawScore:m}:{status:"Poor",rank:"Bottom 25%",color:"text-red-600",score:v,rawScore:m}})(l);return Math.min(5,Math.max(1,Math.ceil((l?.length||0)/2))),n.jsx(vi,{title:"Competitor Benchmark",icon:n.jsx(Fs,{className:"w-5 h-5 text-white"}),iconBgColor:"bg-purple-500",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`text-2xl font-bold ${c.color} mb-2`,children:c.status}),n.jsxs("div",{className:"text-gray-600 mb-2",children:[c.rank," in your industry"]}),n.jsxs("div",{className:"text-lg font-semibold text-gray-700 mb-3",children:["Score: ",c.score,"/100"]})]})})}function wg(){const{user:l}=Gr(),[o]=_n(pg,[]);_n(gg,null),dn();const[a,c]=w.useState(()=>{try{const f=localStorage.getItem("ai_visibility_analysis");return f&&JSON.parse(f).originalInput||""}catch{return""}}),[d,m]=w.useState("root-domain"),[v,S]=w.useState(!1),[y,x]=w.useState(()=>{try{const f=localStorage.getItem("ai_visibility_analysis");return f&&JSON.parse(f).inputType||"company"}catch{return"company"}}),[j,L]=w.useState(()=>{try{const f=localStorage.getItem("ai_visibility_analysis");if(f){const h=JSON.parse(f);return h.data||h}return null}catch{return null}}),[_,F]=w.useState(null),[E,$]=w.useState(!1),[U,M]=w.useState(null),[oe,ne]=w.useState(!1),[me,fe]=w.useState([]),[W,I]=w.useState(0),[C,k]=w.useState(!1);w.useEffect(()=>{const f=Je.getHistoryItems();fe(f),console.log("[Overview] Loaded history items:",f.length)},[W]),w.useEffect(()=>{try{const f=localStorage.getItem("ai_visibility_analysis");if(f){const h=JSON.parse(f);console.log("[AIVisibilityAnalysis] Restoring cached analysis data:",h),h.originalInput&&c(h.originalInput),h.inputType&&x(h.inputType),h.analysisType&&m(h.analysisType),h.data&&L(h.data),console.log("[AIVisibilityAnalysis] Cached data restored successfully")}}catch(f){console.error("[AIVisibilityAnalysis] Error restoring cached data:",f)}},[]),w.useEffect(()=>{const f=g=>{(g.key==="comprehensive_history"||g.key==="sessions")&&(console.log("[Overview] Storage changed, refreshing data"),I(b=>b+1))};window.addEventListener("storage",f);const h=setInterval(()=>{Je.getHistoryItems().length!==me.length&&(console.log("[Overview] Item count changed, refreshing data"),I(b=>b+1))},3e3);return()=>{window.removeEventListener("storage",f),clearInterval(h)}},[me.length]),w.useEffect(()=>{const f=h=>{h.target.closest(".dropdown-container")||ne(!1)};return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[]),l&&o.filter(f=>f.userId===l.id);const R=f=>{try{const g=f.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/"),b=g[0];return g.length===1||g.length>1&&g[1].trim()===""?"root-domain":"exact-url"}catch(h){return console.error("Error detecting URL type:",h),"root-domain"}},B=f=>{try{let h=f.replace(/^https?:\/\//,"").replace(/^www\./,"");h=h.split("/")[0].split("?")[0].split("#")[0];const g=h.split(".");return g.length>=2?g[g.length-2]:h}catch(h){return console.error("Error extracting company from URL:",h),f}},K=(f,h)=>{const g=f.toLowerCase();return h?.toLowerCase(),g.includes("cloud")&&(g.includes("migration")||g.includes("migrate")||g.includes("transform"))?"Cloud Migration & Transformation":g.includes("cloud")||g.includes("aws")||g.includes("azure")||g.includes("gcp")||g.includes("kubernetes")||g.includes("docker")||g.includes("devops")?"Cloud Computing & DevOps":g.includes("ai")||g.includes("artificial intelligence")||g.includes("machine learning")||g.includes("ml")||g.includes("deep learning")||g.includes("neural")?"Artificial Intelligence & ML":g.includes("cyber")||g.includes("security")||g.includes("firewall")||g.includes("vpn")||g.includes("threat")||g.includes("protection")?"Cybersecurity":g.includes("data")&&(g.includes("analytics")||g.includes("warehouse")||g.includes("lake")||g.includes("science")||g.includes("mining"))?"Data Analytics & Science":g.includes("saas")||g.includes("software as a service")||g.includes("platform")||g.includes("api")||g.includes("integration")?"SaaS & Platform Services":g.includes("tech")||g.includes("software")||g.includes("digital")||g.includes("innovation")?"Technology & Software":g.includes("bank")||g.includes("finance")||g.includes("credit")||g.includes("loan")||g.includes("payment")||g.includes("fintech")||g.includes("investment")?"Financial Services & Fintech":g.includes("health")||g.includes("medical")||g.includes("pharma")||g.includes("care")||g.includes("biotech")||g.includes("telehealth")?"Healthcare & Biotech":g.includes("retail")||g.includes("shop")||g.includes("store")||g.includes("commerce")||g.includes("ecommerce")||g.includes("marketplace")?"Retail & E-commerce":g.includes("edu")||g.includes("school")||g.includes("university")||g.includes("college")||g.includes("learning")||g.includes("training")?"Education & Training":g.includes("media")||g.includes("news")||g.includes("entertainment")||g.includes("tv")||g.includes("content")||g.includes("publishing")?"Media & Entertainment":g.includes("auto")||g.includes("car")||g.includes("vehicle")||g.includes("transport")||g.includes("logistics")||g.includes("supply chain")?"Automotive & Transportation":g.includes("food")||g.includes("restaurant")||g.includes("cafe")||g.includes("dining")||g.includes("delivery")||g.includes("catering")?"Food & Beverage":g.includes("real")||g.includes("estate")||g.includes("property")||g.includes("housing")||g.includes("construction")||g.includes("architecture")?"Real Estate & Construction":g.includes("energy")||g.includes("oil")||g.includes("gas")||g.includes("power")||g.includes("renewable")||g.includes("solar")||g.includes("wind")?"Energy & Utilities":g.includes("consulting")||g.includes("consultant")||g.includes("advisory")||g.includes("strategy")||g.includes("management")?"Consulting & Advisory":"Business Services"},J=async()=>{if(!a.trim()){F("Please enter a company name or URL to analyze.");return}let f=a.trim(),h="company";(a.includes("http://")||a.includes("https://")||a.includes("www."))&&(f=B(a),h="url",console.log("[Overview] Detected URL, extracted company name:",f));const g=K(f,a);console.log("[Overview] Detected industry:",g),S(!0),F(null),$(!1);try{const b=new AbortController;M(b),console.log("[CompetitorInsight] Starting competitor analysis for:",f),console.log("[CompetitorInsight] Detected industry:",g),console.log("[CompetitorInsight] API call parameters:",{finalCompanyName:f,detectedIndustry:g});const A=await Dt.getAIVisibilityAnalysis(f,g,{signal:b.signal});if(console.log("[AIVisibilityAnalysis] Analysis results received:",A),A.success&&A.data){console.log("[CompetitorInsight] Setting analysis result:",A.data);const z={...A.data,industry:g,originalInput:a,inputType:h,analysisType:d};L(z),$(!0);try{const X=A.data.competitors||[],ue={id:`ai-visibility-${Date.now()}`,type:"ai-visibility",name:`Competitor Analysis - ${f}`,timestamp:new Date().toISOString(),status:"completed",company:f,industry:g,analysis:{competitors:X.map(ae=>({name:ae.name,mentions:ae.mentions||0,status:"success"})),serviceStatus:A.data.serviceStatus||{gemini:!0,perplexity:!0,claude:!0,chatgpt:!0},summary:{totalCompetitors:X.length,averageVisibilityScore:X.reduce((ae,te)=>ae+(te.mentions||0),0)/Math.max(X.length,1),topCompetitor:X.length>0?X.reduce((ae,te)=>(te.mentions||0)>(ae.mentions||0)?te:ae).name:"None"}}};try{await Je.addHistoryItem(ue),window.dispatchEvent(new CustomEvent("new-analysis-created",{detail:{type:"ai-visibility",timestamp:new Date().toISOString()}})),console.log("[CompetitorInsight] Analysis saved to history:",ue)}catch(ae){console.error("[CompetitorInsight] Failed to save analysis to history:",ae),window.dispatchEvent(new CustomEvent("new-analysis-created",{detail:{type:"ai-visibility",timestamp:new Date().toISOString()}}))}}catch(X){console.warn("Failed to save analysis to history:",X)}try{localStorage.setItem("ai_visibility_analysis",JSON.stringify({company:f,originalInput:a,inputType:h,industry:g,analysisType:d,data:z,timestamp:Date.now()}))}catch(X){console.warn("Failed to cache analysis results:",X)}}else console.error("[Overview] Analysis failed:",A.error),F(A.error||"Analysis failed. Please try again.")}catch(b){if(b.name==="AbortError"){console.log("Analysis was cancelled");return}console.error("AI analysis error:",b),F(b.message||"Analysis failed. Please try again.")}finally{S(!1),M(null)}},le=f=>{if(f.aiVisibilityScore!==void 0&&f.aiVisibilityScore!==null)return f.aiVisibilityScore;if(f.totalScore!==void 0&&f.totalScore!==null)return f.totalScore;if(f.visibilityScore!==void 0&&f.visibilityScore!==null)return f.visibilityScore;if(f.competitors&&Array.isArray(f.competitors)&&f.competitors.length>0){const h=f.competitors.map(g=>g.aiScores?Object.values(g.aiScores).filter(b=>typeof b=="number"&&b>0):[]).flat().filter(g=>typeof g=="number"&&g>0);if(h.length>0){const g=h.reduce((b,A)=>b+A,0)/h.length;return Math.round(g*10)/10}}return 0},be=f=>{const h=f.competitors?.find(g=>g.name?.toLowerCase()===f.company?.toLowerCase());return h?{brandMentions:Number((h.brandMentions||0).toFixed(5)),medianCompetitorMentions:Number((h.medianCompetitorMentions||0).toFixed(5)),shareOfVoice:Number((h.shareOfVoice||0).toFixed(5)),averagePosition:Number((h.averagePosition||0).toFixed(5)),volume:h.volume||0,brandSentiment:h.brandSentiment||"Neutral",platformBreakdown:h.platformBreakdown||{},geoBreakdown:h.geoBreakdown||{}}:{brandMentions:Number((f.brandMentions||0).toFixed(5)),medianCompetitorMentions:Number((f.medianCompetitorMentions||0).toFixed(5)),shareOfVoice:Number((f.shareOfVoice||0).toFixed(5)),averagePosition:Number((f.averagePosition||0).toFixed(5)),volume:f.volume||0,brandSentiment:f.brandSentiment||"Neutral",platformBreakdown:f.platformBreakdown||{},geoBreakdown:f.geoBreakdown||{}}};function G({competitors:f,company:h}){const b=(()=>{if(!f||f.length===0)return{positive:0,neutral:0,negative:0,total:0,drivers:{positive:[],neutral:[],negative:[]}};let X=0,ue=0,ae=0,te=0;const he=[],Le=[],Fe=[];f.forEach(dt=>{const Jt=(dt.breakdowns||{}).gemini||{},ft=Jt.mentionsScore||0,Mt=Jt.sentimentScore||.5;X+=ft,Mt<.3?(te+=ft,Fe.push(dt.name||"Unknown")):Mt>.7?(ue+=ft,he.push(dt.name||"Unknown")):(ae+=ft,Le.push(dt.name||"Unknown"))});const Xe=X>0?ue/X*100:0,$e=X>0?ae/X*100:0,Sn=X>0?te/X*100:0;return{positive:Math.round(Xe*100)/100,neutral:Math.round($e*100)/100,negative:Math.round(Sn*100)/100,total:X,drivers:{positive:he.slice(0,3),neutral:Le.slice(0,3),negative:Fe.slice(0,3)}}})(),A=b.positive>b.negative?"Positive":b.negative>b.positive?"Negative":"Neutral",z=b.positive>b.negative?"text-green-600":b.negative>b.positive?"text-red-600":"text-yellow-600";return n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sentiment Analysis"}),n.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`text-2xl font-bold ${z}`,children:A}),n.jsx("div",{className:"text-sm text-gray-600",children:"Overall Brand Sentiment"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Positive"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${b.positive}%`}})}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[b.positive,"%"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Neutral"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:`${b.neutral}%`}})}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[b.neutral,"%"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Negative"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:`${b.negative}%`}})}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[b.negative,"%"]})]})]})]})]})]})}return n.jsxs("div",{className:"w-full max-w-full mx-auto space-y-6 lg:space-y-8 px-2 sm:px-4 lg:px-6",children:[n.jsx("div",{className:"flex flex-col lg:flex-row justify-between items-start gap-4",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:["Welcome ",l?.displayName?.split(" ")[0]||l?.name?.split(" ")[0]||"User"]}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Deep competitive analysis and market intelligence platform"})]})}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 sm:p-6 lg:p-8 shadow-sm",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Competitor Analysis Dashboard"}),n.jsx("p",{className:"text-gray-600 text-lg",children:"Enter your website URL or company name to get instant competitor insights and market positioning."})]}),n.jsxs("div",{className:"flex flex-col lg:flex-row items-stretch gap-4 mb-8",children:[n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex",children:[n.jsx("input",{type:"text",value:a,onChange:f=>lo(f,h=>{if(c(h),h.includes("http://")||h.includes("https://")||h.includes("www.")){const g=R(h);m(g),console.log("[Overview] Auto-detected URL type:",g)}}),onPaste:f=>io(f,h=>{if(c(h),h.includes("http://")||h.includes("https://")||h.includes("www.")){const g=R(h);m(g),console.log("[Overview] Auto-detected URL type (pasted):",g)}}),onKeyDown:co,onKeyPress:f=>{f.key==="Enter"&&!v&&a.trim()&&J()},required:!0,placeholder:"Enter company name or URL",className:"flex-1 px-4 py-4 border-2 border-blue-600 rounded-l-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg h-[60px]",disabled:v}),n.jsxs("div",{className:"relative dropdown-container ml-1",children:[n.jsxs("button",{type:"button",onClick:()=>ne(!oe),className:"px-4 py-4 border-2 border-blue-600 bg-white text-gray-700 font-medium text-lg h-[60px] min-w-[140px] flex items-center justify-between hover:bg-gray-50 transition-colors rounded-r-xl",children:[n.jsx("span",{children:d==="root-domain"?"Root Domain":"Exact URL"}),n.jsx("svg",{className:`w-5 h-5 transition-transform ${oe?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),oe&&n.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border-2 border-blue-600 rounded-xl shadow-lg z-10 min-w-[140px]",children:n.jsxs("div",{className:"py-2",children:[n.jsx("button",{type:"button",onClick:()=>{m("root-domain"),ne(!1)},className:`w-full px-4 py-3 text-left hover:bg-blue-50 transition-colors ${d==="root-domain"?"bg-blue-50 text-blue-700 font-medium":"text-gray-700"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Root Domain"}),d==="root-domain"&&n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})}),n.jsx("button",{type:"button",onClick:()=>{m("exact-url"),ne(!1)},className:`w-full px-4 py-3 text-left hover:bg-blue-50 transition-colors ${d==="exact-url"?"bg-blue-50 text-blue-700 font-medium":"text-gray-700"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Exact URL"}),d==="exact-url"&&n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})})]})})]})]})}),n.jsxs("div",{className:"flex flex-col gap-2 lg:flex-row lg:items-stretch",children:[n.jsx("button",{onClick:J,disabled:v||!a.trim(),className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-8 py-4 rounded-xl font-medium flex items-center justify-center gap-2 transition-colors shadow-lg w-full lg:w-auto min-w-[140px] h-[60px]",children:v?n.jsxs(n.Fragment,{children:[n.jsx(wn,{className:"w-5 h-5 animate-spin"}),"Analyzing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ci,{className:"w-5 h-5"}),"Analyze Now"]})}),v&&n.jsx("button",{onClick:()=>{try{U?.abort()}catch{}S(!1)},className:"bg-red-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-colors w-full lg:w-auto min-w-[120px] h-[60px]",children:"Stop"})]})]}),_&&n.jsx("div",{className:"mb-6 text-red-700 bg-red-50 border border-red-200 rounded-lg px-4 py-3",children:_}),E&&n.jsx("div",{className:"mb-6 text-green-700 bg-green-50 border border-green-200 rounded-lg px-4 py-3",children:"✅ Analysis completed successfully! Results are ready below."}),j&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Competitor Analysis"}),j.competitors&&Array.isArray(j.competitors)&&j.competitors.length>0?n.jsx(Kd,{data:j}):n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 8a2 2 0 011.414-1.414l4 4a2 2 0 010 2.828l-4 4a2 2 0 01-2.828 0l-4-4a2 2 0 010-2.828l4-4A2 2 0 018 8z",clipRule:"evenodd"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Competitor Analysis Complete"}),n.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Your competitor analysis has been completed successfully.",j.competitors&&j.competitors.length>0?` Found ${j.competitors.length} competitors for analysis.`:" No competitors found for this analysis."]})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 lg:gap-6 mb-6 lg:mb-8",children:[n.jsx(yg,{score:le(j),industry:j?.industry,metrics:be(j)}),n.jsx(xg,{serviceStatus:j?.serviceStatus,aiScores:j?.competitors?.[0]?.aiScores}),n.jsx(vg,{competitors:j?.competitors||[],industry:j?.industry}),n.jsx(G,{competitors:j?.competitors||[],company:j?.company})]})]})]})]})}class bg{async analyzeContentStructure(o,a){try{console.log("[ContentStructureService] Calling API with:",{contentLength:o.length,url:a});const c=await Dt.analyzeContentStructure(o,a);if(console.log("[ContentStructureService] Raw API response:",c),console.log("[ContentStructureService] Response type:",typeof c),console.log("[ContentStructureService] Response keys:",c?Object.keys(c):"No response"),c&&c.success&&c.analysis)return console.log("[ContentStructureService] Using response.analysis (success case)"),c.analysis;if(c&&c.analysis)return console.log("[ContentStructureService] Using response.analysis (no success field)"),c.analysis;throw c&&!c.success?(console.error("[ContentStructureService] API returned error:",c.error),new Error(c.error||"Analysis failed")):(console.error("[ContentStructureService] Invalid response format:",c),new Error("Invalid response format from server"))}catch(c){throw console.error("[ContentStructureService] Error analyzing content structure:",c),c}}async applyStructureSuggestions(o,a){try{const c=await Dt.applyStructureSuggestions(o,a);if(c.success)return c.improvedContent;throw new Error(c.error||"Failed to apply suggestions")}catch(c){return console.error("Error applying structure suggestions:",c),o}}}const kd=new bg;function Sg(l){const o=["good","great","excellent","amazing","wonderful","fantastic","positive","helpful","useful","clear","effective"],a=["bad","terrible","awful","horrible","negative","unclear","confusing","useless","ineffective","poor"],c=l.toLowerCase().split(" ");let d=0,m=0;return c.forEach(v=>{o.includes(v)&&d++,a.includes(v)&&m++}),d>m?"Positive":m>d?"Negative":"Neutral"}async function kg({accuracy:l,question:o,answer:a,importantQuestions:c,allConfidences:d,sourceUrl:m,content:v}){let S=0;if(c.length>0){let M=0;for(let oe=0;oe<c.length;oe++){const ne=c[oe],me=d[oe]||0,fe=jg(o,ne),W=me*fe/100;M+=W}S=M/c.length*100}let y=0;const x=a.length;x>=50&&x<=500?y+=20:x>=30&&x<=800?y+=15:x>=20&&x<=1e3&&(y+=10),(/^Q:|<h[1-6]>|<h[1-6] /.test(a)||/<h[1-6]>/.test(v))&&(y+=15),(/\n\s*[-*1.]/.test(a)||/<ul>|<ol>/.test(a))&&(y+=15);const j=a.split(/[.!?]/).filter(M=>M.trim().length>0),L=a.split(/\s+/).filter(M=>M.length>0),_=j.length>0?L.length/j.length:0;_>=10&&_<=25?y+=25:_>=8&&_<=30?y+=20:_>=5&&_<=35&&(y+=15);let F=0;/first|second|third|finally|in conclusion|to summarize/i.test(a)&&(F+=10),/however|but|although|while|on the other hand/i.test(a)&&(F+=5),/for example|such as|including|specifically/i.test(a)&&(F+=5),/therefore|thus|as a result|consequently/i.test(a)&&(F+=5),y+=Math.min(F,25),y>100&&(y=100);let E=/@type\s*[:=]\s*['"]?FAQPage['"]?/i.test(a)||/@type\s*[:=]\s*['"]?FAQPage['"]?/i.test(v)?1:0,$=1;try{const M=m.replace(/\/$/,"")+"/robots.txt",oe=await axios.get(M,{timeout:2e3});/Disallow:\s*\//i.test(oe.data)&&($=0)}catch{$=1}const U=.4*l+.2*S+.2*y+.1*E*100+.1*$*100;return{geoScore:Math.round(U),breakdown:{accuracy:l,coverage:S,structure:y,schema:E,access:$}}}function jg(l,o){const a=l.toLowerCase().split(/\W+/).filter(v=>v.length>2),c=o.toLowerCase().split(/\W+/).filter(v=>v.length>2),d=a.filter(v=>c.includes(v)),m=[...new Set([...a,...c])];return m.length>0?d.length/m.length:0}function zr(l,o,a){let c=0;const d=[];console.log("[Apply Suggestions] Starting to apply suggestions:",{htmlLength:l.length,suggestionsCount:o.length,suggestions:o.map(y=>({type:y.type,hasExactReplacement:!!y.exactReplacement}))}),o.forEach(y=>{try{if(y.exactReplacement){const{find:x,replace:j}=y.exactReplacement;console.log(`[Apply Suggestions] Applying ${y.type}:`,{find:x.substring(0,100)+"...",replace:j.substring(0,100)+"...",found:l.includes(x)}),l.includes(x)?(l=l.replace(x,j),c++,d.push(`${y.type} applied with exact replacement`),console.log(`[Apply Suggestions] Successfully applied ${y.type}`)):console.log(`[Apply Suggestions] Could not find pattern for ${y.type}`)}}catch(x){console.warn(`Failed to apply exact replacement for ${y.type}:`,x)}});let m;try{if(m=new window.DOMParser().parseFromString(l,"text/html"),m.querySelector("parsererror"))return console.warn("[Apply Suggestions] HTML parsing errors detected, using fallback approach"),l}catch(y){return console.error("[Apply Suggestions] Error parsing HTML:",y),l}const v=(y,x,j)=>{if(!x||!j)return 0;let L=0;const _=y.createTreeWalker?y.createTreeWalker(y.body||y,NodeFilter.SHOW_TEXT):m.createTreeWalker(y.body||m.body,NodeFilter.SHOW_TEXT);let F;for(;F=_.nextNode();)F.textContent&&F.textContent.includes(x)&&(F.textContent=F.textContent.replaceAll(x,j),a?.highlight&&F.parentElement&&F.parentElement.setAttribute("data-ai-updated","true"),L++);return L};if(m.querySelectorAll('style, link[rel="stylesheet"]'),m.querySelectorAll("script"),m.querySelector("header, nav, .header, .navbar, .navigation"),m.querySelector("footer, .footer"),o.forEach(y=>{try{if(y.exactReplacement&&l.includes(y.exactReplacement.replace))return;if(y.type==="heading"){const x=(y.enhancedContent||y.implementation||"").trim(),j=(y.currentContent||"").trim();if(x.length>0){const L=Array.from(m.querySelectorAll("h1,h2,h3"));let _=!1;L.forEach(F=>{const E=(F.textContent||"").trim();(j&&E.includes(j)||!j&&F.tagName.toLowerCase()==="h1")&&(F.textContent=x,a?.highlight&&F.setAttribute("data-ai-updated","true"),_=!0)}),_&&(c++,d.push("Heading updated"))}}if(y.type==="paragraph"){const{currentContent:x,enhancedContent:j}=y;if(x&&j){let L=!1;m.querySelectorAll("p").forEach(F=>{F.textContent&&F.textContent.includes(x)&&(F.textContent=(F.textContent||"").replaceAll(x,j),a?.highlight&&F.setAttribute("data-ai-updated","true"),L=!0)}),L||(L=v(m,x,j)>0),L&&(c++,d.push("Paragraph content replaced"))}}if(y.type==="list"){const{currentContent:x,enhancedContent:j}=y;if(x&&j){const L=m.querySelectorAll("li");let _=!1;L.forEach(F=>{F.textContent&&F.textContent.includes(x)&&(F.textContent=F.textContent.replace(x,j),a?.highlight&&F.setAttribute("data-ai-updated","true"),_=!0)}),_||(_=v(m,x,j)>0),_&&(c++,d.push("List item content replaced"))}}if(y.type==="meta_description"){let x=m.querySelector('meta[name="description"]');x||(x=m.createElement("meta"),x.name="description",m.head.appendChild(x));const j=m.querySelector("p")?.textContent||"";x.content=j.substring(0,160)||"Improved meta description.",c++,d.push("Meta description updated")}if(y.type==="title"){let x=m.querySelector("title");x||(x=m.createElement("title"),m.head.appendChild(x));const j=m.querySelector("h1")?.textContent;x.textContent=j||"Improved Title",c++,d.push("Title updated")}if(y.type==="meta_keywords"){let x=m.querySelector('meta[name="keywords"]');x||(x=m.createElement("meta"),x.name="keywords",m.head.appendChild(x));const _=(m.body.textContent||"").split(/\s+/).filter(E=>E.length>4).reduce((E,$)=>(E[$.toLowerCase()]=(E[$.toLowerCase()]||0)+1,E),{}),F=Object.entries(_).sort(([,E],[,$])=>$-E).slice(0,5).map(([E])=>E);x.content=F.join(", "),c++,d.push("Meta keywords updated")}if(y.type==="meta_viewport"){let x=m.querySelector('meta[name="viewport"]');x||(x=m.createElement("meta"),x.name="viewport",m.head.appendChild(x)),x.content="width=device-width, initial-scale=1.0",c++,d.push("Meta viewport updated")}if(y.type==="og_title"){let x=m.querySelector('meta[property="og:title"]');x||(x=m.createElement("meta"),x.setAttribute("property","og:title"),m.head.appendChild(x)),x.content=m.querySelector("h1")?.textContent||m.querySelector("title")?.textContent||"",c++,d.push("Open Graph title added")}if(y.type==="og_description"){let x=m.querySelector('meta[property="og:description"]');x||(x=m.createElement("meta"),x.setAttribute("property","og:description"),m.head.appendChild(x)),x.content=m.querySelector('meta[name="description"]')?.getAttribute("content")||"",c++,d.push("Open Graph description added")}if(y.type==="canonical"){let x=m.querySelector('link[rel="canonical"]');x||(x=m.createElement("link"),x.rel="canonical",m.head.appendChild(x)),x.href=window.location.href,c++,d.push("Canonical URL added")}if(y.type==="lang_attribute"){const x=m.documentElement;x.lang="en",c++,d.push("Language attribute updated")}if(y.type==="keyword_optimization"){const x=y.enhancedContent||y.implementation||"",j=x.match(/Enhanced with keywords:\s*(.+)/i)||x.match(/Add keywords:\s*(.+)/i);if(j&&j[1]){let L=m.querySelector('meta[name="keywords"]');L||(L=m.createElement("meta"),L.name="keywords",m.head.appendChild(L)),L.content=j[1],c++,d.push("Meta keywords updated")}}if(y.type==="content_enhancement"){const x=m.querySelectorAll("p");if(x.length>0){const j=x[0],L=y.enhancedContent;L&&L.length>10&&(j.textContent=L,c++,d.push("Content enhanced for AI understanding"))}}if(y.type==="sentence_replacement"){const x=y.currentContent,j=y.enhancedContent;x&&j&&v(m,x,j)>0&&(c++,d.push("Sentence replaced for better AI understanding"))}if(y.type==="ai_content_restructure"){const{currentContent:x,enhancedContent:j}=y;x&&j&&v(m,x,j)>0&&(c++,d.push("Content restructured"))}}catch(x){console.warn(`Failed to apply suggestion ${y.type}:`,x)}}),c>0){const y=m.createElement("script");y.type="application/json",y.id="ai-change-summary",y.textContent=JSON.stringify({appliedCount:c,appliedSuggestions:d}),m.head.appendChild(y)}let S=m.documentElement.outerHTML;if(S.includes("viewport")||(S=S.replace("</head>",`    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>`)),S.includes("<!DOCTYPE html>")||(S=`<!DOCTYPE html>
`+S),a?.highlight){const y=m.createElement("style");y.textContent=`
    [data-ai-updated="true"] { background: #ecfdf5 !important; outline: 2px solid #10b98133; }
    `,m.head.appendChild(y)}return S}const Xa=Object.freeze(Object.defineProperty({__proto__:null,analyzeSentiment:Sg,applySuggestionsWithDOM:zr,calculateGeoScoreV2:kg},Symbol.toStringTag,{value:"Module"})),Jd=({message:l,onClose:o,autoClose:a=!0,autoCloseDelay:c=3e3})=>{const[d,m]=w.useState(!1);return w.useEffect(()=>{if(l){if(m(!0),a){const v=setTimeout(()=>{m(!1),setTimeout(o,300)},c);return()=>clearTimeout(v)}}else m(!1)},[l,a,c,o]),l?n.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm w-full",children:n.jsx("div",{className:`transform transition-all duration-300 ease-in-out ${d?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95"}`,children:n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg shadow-lg p-4 relative",children:[n.jsx("button",{onClick:()=>{m(!1),setTimeout(o,300)},className:"absolute top-2 right-2 text-green-400 hover:text-green-600 transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 rounded-full p-1","aria-label":"Close success notification",children:n.jsx(ro,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex items-start gap-3 pr-6",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(on,{className:"w-5 h-5 text-green-500"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-semibold text-green-800 mb-1",children:"Success"}),n.jsx("p",{className:"text-sm text-green-700 leading-relaxed",children:l})]})]}),a&&n.jsx("div",{className:"mt-3 h-1 bg-green-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-green-500 rounded-full transition-all duration-300 ease-linear",style:{width:d?"0%":"100%",transitionDuration:`${c}ms`}})})]})})}):null},eo=()=>{const l=Te.getCurrentUserId();return l?`structure_analysis_state_${l}`:"structure_analysis_state_anonymous"},Ng=()=>{const l=Te.getCurrentUserId();return l?`comprehensive_history_${l}`:"comprehensive_history_anonymous"},Cg=()=>{const l=Te.getCurrentUserId();return l?`structure_last_saved_${l}`:"structure_last_saved_anonymous"},ti=()=>{const l=Te.getCurrentUserId();return l?`structure_last_persisted_${l}`:"structure_last_persisted_anonymous"},jd=l=>{let o=0;if(l.length===0)return o.toString();for(let a=0;a<l.length;a++){const c=l.charCodeAt(a);o=(o<<5)-o+c,o=o&o}return o.toString()};function Ag({content:l,url:o}){const[a,c]=w.useState(null),[d,m]=w.useState(!1),[v,S]=w.useState(""),[y,x]=w.useState(!1),[j,L]=w.useState("overview"),[_,F]=w.useState("landing"),[E,$]=w.useState("schema"),[U,M]=w.useState(o||""),[oe,ne]=w.useState(null),[me,fe]=w.useState(!1),[W,I]=w.useState(l||""),[C,k]=w.useState(""),[R,B]=w.useState("landing"),[K,J]=w.useState(""),[le,be]=w.useState(!1),[G,f]=w.useState(!1),[h,g]=w.useState(Date.now()),[b,A]=w.useState(!0),[z,X]=w.useState(!1),[ue,ae]=w.useState(!1),[te,he]=w.useState(!0),[Le,Fe]=w.useState(!1);_n(Ng(),[]);const[Xe,$e]=w.useState(null),[Sn,dt]=w.useState(!1),[Kt,Jt]=w.useState(!1),[ft,Mt]=w.useState(!1),Fn=(D,V,Q)=>{console.log("[Content Analysis] saveToHistory called with:",{hasAnalysisResult:!!D,contentLength:V?.length||0,urlToAnalyze:Q,analysisResultKeys:D?Object.keys(D):[]});try{if(!D){console.error("[Content Analysis] No analysis result provided to saveToHistory");return}if(!V){console.error("[Content Analysis] No content provided to saveToHistory");return}console.log("[Content Analysis] Preparing history item with data:",{id:`structure-analysis-${Date.now()}`,name:`Structure Analysis${Q?` - ${Q}`:""}`,contentLength:V.length,suggestionsCount:D.suggestions?.length||0,hasMetadata:!!D.metadata,hasStructuredContent:!!D.structuredContent});const Se=D.suggestions?.filter(de=>["heading","paragraph","list","table","quote","code","link","image","schema"].includes(de.type)).map(de=>({type:de.type,priority:de.priority,description:de.description,implementation:de.implementation,impact:de.impact}))||[];console.log("[Content Analysis] Filtered suggestions:",Se.length);const ke={id:`structure-analysis-${Date.now()}`,name:`Structure Analysis${Q?` - ${Q}`:""}`,originalContent:V,structuredContent:D.structuredContent||"",analysis:{seoScore:D.seoScore||0,llmOptimizationScore:D.llmOptimizationScore||0,readabilityScore:D.readabilityScore||0,structuredData:D.structuredData,fullPageHtml:D.fullPageHtml,pageTitle:D.pageTitle,pageDescription:D.pageDescription,geoScoreTotal:D.geoScoreTotal||0,geoBreakdown:D.geoBreakdown||{},contentQualityScoreTotal:D.contentQualityScoreTotal||0,contentQualityBreakdown:D.contentQualityBreakdown||{},suggestions:Se,metadata:D.metadata||{title:"",description:"",keywords:[],author:"",publishDate:"",lastModified:"",readingTime:0,wordCount:0,language:"en"}}};console.log("[Content Analysis] About to call historyService.addStructureAnalysisHistory with:",{id:ke.id,name:ke.name,originalContentLength:ke.originalContent.length,structuredContentLength:ke.structuredContent.length,analysisKeys:Object.keys(ke.analysis)}),console.log("[Content Analysis] About to call historyService.addStructureAnalysisHistory with data:",ke);try{Je.addStructureAnalysisHistory(ke),console.log("[Content Analysis] Successfully called historyService.addStructureAnalysisHistory");const de=Je.getHistoryItems();console.log("[Content Analysis] Current history after adding:",{totalItems:de.length,latestItem:de[0]?.name||"None",structureAnalysisItems:de.filter(Ee=>Ee.type==="structure-analysis").length});const Pe=de.find(Ee=>Ee.id===ke.id);if(Pe){console.log("[Content Analysis] ✅ Item successfully added to history:",Pe.name);try{const Ee=localStorage.getItem("comprehensive_history"),ze=Ee?JSON.parse(Ee):[];console.log("[Content Analysis] Direct localStorage check:",{totalStoredItems:ze.length,structureItems:ze.filter(hn=>hn.type==="structure-analysis").length,ourItemExists:ze.some(hn=>hn.id===ke.id)})}catch(Ee){console.error("[Content Analysis] Error checking localStorage directly:",Ee)}}else{console.error("[Content Analysis] ❌ Item was NOT added to history!");try{const Ee=localStorage.getItem("comprehensive_history");if(console.error("[Content Analysis] Debug - localStorage content:",Ee),Ee){const ze=JSON.parse(Ee);console.error("[Content Analysis] Debug - parsed localStorage:",ze)}}catch(Ee){console.error("[Content Analysis] Debug - localStorage error:",Ee)}}}catch(de){console.error("[Content Analysis] Error calling historyService.addStructureAnalysisHistory:",de),de instanceof Error&&console.error("[Content Analysis] Error stack:",de.stack)}}catch(Se){console.error("[Content Analysis] Failed to save to history:",Se),Se instanceof Error&&console.error("[Content Analysis] Error stack:",Se.stack)}try{localStorage.setItem(Cg(),new Date().toISOString())}catch{}};w.useEffect(()=>{const V=Object.keys(localStorage).filter(Q=>Q.startsWith(eo()));if(V.length>0){let Q=V[0],Se=0;for(const de of V)try{const Pe=localStorage.getItem(de);if(Pe){const Ee=JSON.parse(Pe);Ee.lastAccessed&&Ee.lastAccessed>Se&&(Se=Ee.lastAccessed,Q=de)}}catch{}if(Se===0)for(const de of V)try{const Pe=localStorage.getItem(de);if(Pe&&JSON.parse(Pe).analysis){Q=de;break}}catch{}const ke=localStorage.getItem(Q);if(ke)try{const de=JSON.parse(ke);de.urlInput&&M(de.urlInput),de.activeTab&&L(de.activeTab),de.structuredView&&F(de.structuredView),de.schemaView&&$(de.schemaView),de.codeViewType&&B(new Set(["landing","code","improved"]).has(de.codeViewType)?de.codeViewType:"landing"),!W&&de.pastedPreview&&I(de.pastedPreview),de.improvedFullPageHtml&&J(de.improvedFullPageHtml),console.log("[Content Analysis] Restored cached analysis from:",Q),setTimeout(()=>{const Pe={...de,lastAccessed:Date.now()};localStorage.setItem(Q,JSON.stringify(Pe))},100)}catch(de){console.error("[Content Analysis] Error restoring cached state:",de)}}!W&&l&&I(l)},[l]),w.useEffect(()=>{if(a)try{const D={analysis:a,fullPageHtml:C,improvedFullPageHtml:K,activeTab:j,codeViewType:R,urlInput:U,pastedContent:W,savedAt:Date.now()};localStorage.setItem(ti(),JSON.stringify(D)),console.log("[Content Analysis] Analysis persisted for navigation")}catch(D){console.error("[Content Analysis] Error persisting analysis:",D)}},[a,C,K,j,R,U,W]),w.useEffect(()=>()=>{if(a)try{const D={analysis:a,fullPageHtml:C,improvedFullPageHtml:K,activeTab:j,codeViewType:R,urlInput:U,pastedContent:W,savedAt:Date.now()};localStorage.setItem(ti(),JSON.stringify(D)),console.log("[Content Analysis] Analysis persisted on component unmount")}catch(D){console.error("[Content Analysis] Error persisting analysis on unmount:",D)}},[a,C,K,j,R,U,W]),w.useEffect(()=>{if(!a)try{const D=localStorage.getItem("structure_last_persisted");if(D){const V=JSON.parse(D);V.analysis&&V.savedAt&&(Date.now()-V.savedAt<864e5?(console.log("[Content Analysis] Restoring persisted analysis from navigation"),c(V.analysis),V.fullPageHtml&&k(V.fullPageHtml),V.analysis.originalContent&&I(V.analysis.originalContent),V.analysis.crawledUrl&&M(V.analysis.crawledUrl),V.improvedFullPageHtml&&J(V.improvedFullPageHtml),V.activeTab&&L(V.activeTab),V.codeViewType&&B(V.codeViewType),B("landing"),he(!0),ae(!0)):localStorage.removeItem("structure_last_persisted"))}}catch(D){console.error("[Content Analysis] Error restoring persisted analysis:",D),localStorage.removeItem("structure_last_persisted")}},[]);const Y=w.useRef(0);w.useEffect(()=>{const D=()=>{const Q=Date.now();Q-Y.current<1e3||(Y.current=Q,g(Q),A(!0))},V=["mousedown","mousemove","keypress","scroll","touchstart","click"];return V.forEach(Q=>{document.addEventListener(Q,D,!0)}),()=>{V.forEach(Q=>{document.removeEventListener(Q,D,!0)})}},[]),w.useEffect(()=>{if(W&&W.trim().length>0&&b){const D=jd(W),V=`${eo()}_${D}`,Q={urlInput:U,activeTab:j,structuredView:_,schemaView:E,pastedPreview:W.slice(0,1e3),codeViewType:R,lastAccessed:Date.now(),createdAt:Date.now(),isActive:!0};try{localStorage.setItem(V,JSON.stringify(Q)),console.log("[Content Analysis] Persisted lightweight state for content hash:",D)}catch{Object.keys(localStorage).forEach(ke=>{if(ke.startsWith(eo()))try{localStorage.removeItem(ke)}catch{}})}}},[U,j,_,E,W,R,b]);const ce=w.useRef(null);w.useEffect(()=>{if(!z||!W||W.trim().length===0)return;const D=jd(W);if(ce.current===D){X(!1);return}if(!b){X(!1);return}console.log("[Content Analysis] User-triggered analysis for content length:",W.length),ce.current=D,De(W,U).finally(()=>X(!1)),he(!0)},[z,W,b]);const De=async(D,V)=>{if(a&&a.originalContent===D){console.log("[Content Analysis] Using cached analysis for existing content");return}$e(null),he(!0),ae(!0),m(!0);try{console.log("[Content Analysis] Starting new analysis for:",V?`URL: ${V}`:`Content length: ${D.length}`);const Q=await kd.analyzeContentStructure(D,V);if(console.log("[Content Analysis] Analysis result:",Q),console.log("[Content Analysis] Result type:",typeof Q),console.log("[Content Analysis] Result keys:",Q?Object.keys(Q):"No result"),console.log("[Content Analysis] Result structure:",{hasSuggestions:!!Q?.suggestions,suggestionsLength:Q?.suggestions?.length||0,hasStructuredContent:!!Q?.structuredContent,hasMetadata:!!Q?.metadata,hasSeoScore:typeof Q?.seoScore=="number",hasLlmScore:typeof Q?.llmOptimizationScore=="number",hasReadabilityScore:typeof Q?.readabilityScore=="number"}),console.log("[Content Analysis] Suggestions:",Q?.suggestions),console.log("[Content Analysis] Full page HTML available:",!!Q?.fullPageHtml),c(Q),Q.fullPageHtml)k(Q.fullPageHtml),console.log("[Content Analysis] Full page HTML set from analysis response");else if(V)try{const Se=await Dt.extractFullPageHtml(V);Se.success&&(k(Se.html),console.log("[Content Analysis] Full page HTML extracted separately"))}catch(Se){console.warn("[Content Analysis] Failed to extract full page HTML:",Se)}console.log("[Content Analysis] About to save to history with result:",{hasResult:!!Q,contentLength:D?.length||0,urlToAnalyze:V,resultKeys:Q?Object.keys(Q):[]}),console.log("[Content Analysis] Result validation for history:",{hasOriginalContent:!!Q?.originalContent,hasStructuredContent:!!Q?.structuredContent,hasSeoScore:typeof Q?.seoScore=="number",hasLlmScore:typeof Q?.llmOptimizationScore=="number",hasReadabilityScore:typeof Q?.readabilityScore=="number",hasSuggestions:Array.isArray(Q?.suggestions),suggestionsLength:Q?.suggestions?.length||0,hasMetadata:!!Q?.metadata,hasStructuredData:!!Q?.structuredData}),console.log("[Content Analysis] FORCING save to history with FRESH data...");try{const Se=new Date,de={id:`structure-analysis-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:`Structure Analysis${V?` - ${V}`:""} - ${Se.toLocaleTimeString()}`,originalContent:D,structuredContent:Q.structuredContent||D,analysis:{suggestions:(Q.suggestions||[]).filter(ze=>["heading","paragraph","list","table","quote","code","link","image","schema"].includes(ze.type)).map(ze=>({type:ze.type,priority:ze.priority,description:ze.description||"",implementation:ze.implementation||"",impact:ze.impact||""})),metadata:{title:Q.metadata?.title||"Analyzed Content",description:Q.metadata?.description||"Content structure analysis",keywords:Q.metadata?.keywords||[],author:Q.metadata?.author||"Unknown",publishDate:Se.toISOString().split("T")[0],lastModified:Se.toISOString().split("T")[0],readingTime:Math.ceil(D.length/1e3),wordCount:D.split(/\s+/).length,language:"en"},structuredData:Q.structuredData||{},fullPageHtml:Q.fullPageHtml||"",pageTitle:Q.pageTitle||"",pageDescription:Q.pageDescription||"",geoScoreTotal:Q.geoScoreTotal,geoBreakdown:Q.geoBreakdown,contentQualityScoreTotal:Q.contentQualityScoreTotal,contentQualityBreakdown:Q.contentQualityBreakdown,wordCount:Q.metadata?.wordCount||D.split(/\s+/).length,readingTime:Q.metadata?.readingTime||Math.ceil(D.length/1e3),suggestionsCount:(Q.suggestions||[]).length,language:Q.metadata?.language||"en"}};console.log("[Content Analysis] FRESH history item created:",{id:de.id,name:de.name,timestamp:Se.toISOString(),contentLength:de.originalContent.length}),Je.addStructureAnalysisHistory(de);const Pe=Je.getHistoryItems(),Ee=Pe.find(ze=>ze.id===de.id);Ee?(console.log("[Content Analysis] ✅ SUCCESSFULLY saved FRESH item to history!",Ee.name),window.dispatchEvent(new StorageEvent("storage",{key:"comprehensive_history",newValue:JSON.stringify(Pe)})),window.location.pathname==="/history"&&(console.log("[Content Analysis] On history page, triggering refresh..."),setTimeout(()=>window.location.reload(),1e3))):console.error("[Content Analysis] ❌ FAILED to save FRESH item to history!")}catch(Se){console.error("[Content Analysis] Direct save error:",Se)}Fn(Q,D,V);try{await Dt.saveLastStructureAnalysis({...Q,crawledUrl:V||U||""})}catch{}try{const Se=V||U;if(Se){let ke="/";try{const de=new URL(Se);ke=de.pathname+(de.search||"")}catch{}}}catch{}}catch(Q){console.error("Error analyzing content:",Q),alert("Failed to analyze content structure")}finally{m(!1)}},Ie=async()=>{if(!U.trim()){ne("Please enter a URL to analyze.");return}try{new URL(U)}catch{ne("Please enter a valid URL (e.g., https://example.com)");return}fe(!0),ne(null);try{const D=await kd.analyzeContentStructure("",U);if(console.log("[URL Analysis] Raw result:",D),D){const V={...D,geoScoreTotal:D.geoScoreTotal||D.seoScore||0,geoBreakdown:D.geoBreakdown||{},contentQualityScoreTotal:D.contentQualityScoreTotal||D.readabilityScore||0,contentQualityBreakdown:D.contentQualityBreakdown||{},metadata:D.metadata?{...D.metadata,title:D.metadata.title||D.pageTitle||"No Title",description:D.metadata.description||D.pageDescription||"No Description",keywords:D.metadata.keywords||[],author:D.metadata.author||"Unknown",publishDate:D.metadata.publishDate||"Unknown",lastModified:D.metadata.lastModified||"Unknown",readingTime:D.metadata.readingTime||1,wordCount:D.metadata.wordCount||0,language:D.metadata.language||"en",contentStructure:D.metadata.contentStructure||{headings:[],paragraphs:[],lists:[]}}:{title:D.pageTitle||"No Title",description:D.pageDescription||"No Description",keywords:[],author:"Unknown",publishDate:"Unknown",lastModified:"Unknown",readingTime:1,wordCount:0,language:"en",contentStructure:{headings:[],paragraphs:[],lists:[]}},suggestions:D.suggestions||[],structuredData:D.structuredData||{},fullPageHtml:D.fullPageHtml||"",pageTitle:D.pageTitle||"",pageDescription:D.pageDescription||"",originalContent:D.originalContent||"",structuredContent:D.structuredContent||D.fullPageHtml||""};console.log("[URL Analysis] Safe result:",V),console.log("[URL Analysis] Metadata debug:",{hasMetadata:!!D.metadata,metadataKeys:D.metadata?Object.keys(D.metadata):[],publishDate:D.metadata?.publishDate,publishDateType:typeof D.metadata?.publishDate,publishDateLength:D.metadata?.publishDate?.length,publishDateIsNull:D.metadata?.publishDate===null,publishDateIsUndefined:D.metadata?.publishDate===void 0,publishDateIsToday:D.metadata?.publishDate===new Date().toISOString().split("T")[0]}),c(V),k(V.fullPageHtml||""),I(V.originalContent||""),B("landing"),he(!0),ae(!0),console.log("[URL Analysis] Saving to history...");try{const Q=new Date,ke={id:`structure-analysis-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:`Structure Analysis - ${U} - ${Q.toLocaleTimeString()}`,originalContent:V.originalContent||"",structuredContent:V.structuredContent||V.fullPageHtml||"",analysis:{suggestions:(V.suggestions||[]).filter(Ee=>["heading","paragraph","list","table","quote","code","link","image","schema"].includes(Ee.type)).map(Ee=>({type:Ee.type,priority:Ee.priority,description:Ee.description||"",implementation:Ee.implementation||"",impact:Ee.impact||""})),metadata:{title:V.metadata?.title||"Analyzed Content",description:V.metadata?.description||"Content structure analysis",keywords:V.metadata?.keywords||[],author:V.metadata?.author||"Unknown",publishDate:V.metadata?.publishDate||Q.toISOString().split("T")[0],lastModified:V.metadata?.lastModified||Q.toISOString().split("T")[0],readingTime:V.metadata?.readingTime||Math.ceil((V.originalContent||"").length/1e3),wordCount:V.metadata?.wordCount||(V.originalContent||"").split(/\s+/).length,language:V.metadata?.language||"en"},structuredData:V.structuredData||{},fullPageHtml:V.fullPageHtml||"",pageTitle:V.pageTitle||"",pageDescription:V.pageDescription||"",geoScoreTotal:V.geoScoreTotal,geoBreakdown:V.geoBreakdown,contentQualityScoreTotal:V.contentQualityScoreTotal,contentQualityBreakdown:V.contentQualityBreakdown,wordCount:V.metadata?.wordCount||(V.originalContent||"").split(/\s+/).length,readingTime:V.metadata?.readingTime||Math.ceil((V.originalContent||"").length/1e3),suggestionsCount:(V.suggestions||[]).length,language:V.metadata?.language||"en"}};console.log("[URL Analysis] FRESH history item created:",{id:ke.id,name:ke.name,timestamp:Q.toISOString(),contentLength:ke.originalContent.length}),Je.addStructureAnalysisHistory(ke);const de=Je.getHistoryItems(),Pe=de.find(Ee=>Ee.id===ke.id);Pe?(console.log("[URL Analysis] ✅ SUCCESSFULLY saved URL analysis to history!",Pe.name),window.dispatchEvent(new StorageEvent("storage",{key:"comprehensive_history",newValue:JSON.stringify(de)})),window.location.pathname==="/history"&&(console.log("[URL Analysis] On history page, triggering refresh..."),setTimeout(()=>window.location.reload(),1e3))):console.error("[URL Analysis] ❌ FAILED to save URL analysis to history!")}catch(Q){console.error("[URL Analysis] Error saving to history:",Q)}}else ne("Failed to analyze URL. Please try again.")}catch(D){console.error("URL analysis error:",D),ne(D.message||"Failed to analyze URL. Please try again.")}finally{fe(!1)}},Ce=async()=>{if(a){x(!0);try{let D;const V=a.fullPageHtml||C||l;if(!V){alert("No content available to improve.");return}try{if(D=zr(V,a.suggestions),!D||D.length<100)throw new Error("Generated HTML is too short or invalid");if(new DOMParser().parseFromString(D,"text/html").querySelector("parsererror"))throw new Error("Generated HTML contains parsing errors")}catch(Q){console.error("Error in applySuggestionsWithDOM:",Q),alert("Failed to apply suggestions due to HTML processing error. Please try again.");return}a.fullPageHtml||C?(J(D),f(!0),B("improved")):S(D),$e(`✅ Applied ${a.suggestions.length} suggestions successfully!`)}catch(D){console.error("Error applying suggestions:",D),alert("Failed to apply structure suggestions")}finally{x(!1)}}},re=D=>{navigator.clipboard.writeText(D),alert("Copied to clipboard!")},ye=D=>{const V=window.open("","_blank");V?(V.document.write(D),V.document.close()):alert("Please allow popups to run the code in a new window.")},et=()=>{K?ye(K):a?.fullPageHtml?ye(a.fullPageHtml):alert("No page content available to run. Please analyze a URL first.")},st=()=>{if(!a?.fullPageHtml){alert("No original page content available.");return}const D=a.fullPageHtml;let V=K&&K.trim().length>0?K:"";if(!V||V.replace(/\s+/g,"")===D.replace(/\s+/g,""))try{const ke=zr(D,a.suggestions,{highlight:!0});V=ke||D,J(ke)}catch{V=D}const Q=`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page Comparison - Original vs Improved</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
        .comparison-container { display: flex; gap: 20px; height: 100vh; }
        .page-frame { flex: 1; border: 2px solid #ddd; border-radius: 8px; }
        .page-frame h3 { margin: 0; padding: 10px; background: #f5f5f5; border-bottom: 1px solid #ddd; }
        .page-frame.original h3 { background: #ffebee; color: #c62828; }
        .page-frame.improved h3 { background: #e8f5e8; color: #2e7d32; }
        iframe { width: 100%; height: calc(100% - 50px); border: none; }
    </style>
</head>
<body>
    <div class="comparison-container">
        <div class="page-frame original">
            <h3>🔴 Original Page</h3>
            <iframe srcdoc="${D.replace(/"/g,"&quot;")}"></iframe>
        </div>
        <div class="page-frame improved">
            <h3>🟢 Improved Page</h3>
            <iframe srcdoc="${V.replace(/"/g,"&quot;")}"></iframe>
        </div>
    </div>
</body>
</html>`,Se=window.open("","_blank");Se?(Se.document.write(Q),Se.document.close()):alert("Please allow popups to view the comparison.")},Ve=async()=>{if(a)try{$e("🔄 Applying suggestions and generating improved code...");const D=a.fullPageHtml||C;if(!D){$e("❌ No HTML content available to improve.");return}console.log("[Content Analysis] Applying suggestions to HTML:",{sourceHtmlLength:D.length,suggestionsCount:a.suggestions.length,suggestions:a.suggestions.map(Pe=>({type:Pe.type,hasExactReplacement:!!Pe.exactReplacement}))});const V=zr(D,a.suggestions);console.log("[Content Analysis] Improved code generated:",{improvedCodeLength:V.length,hasChanges:V!==D}),J(V),f(!0),await navigator.clipboard.writeText(V);const Q=a.suggestions.length,Se=a.suggestions.map(Pe=>Pe.type).slice(0,3),ke=Se.length>0?` (${Se.join(", ")}${Se.length<Q?"...":""})`:"";$e(`✅ ${Q} suggestions applied${ke}! Improved code copied to clipboard.`),window.confirm("Improved code copied to clipboard! Would you like to run the improved page in a new window?")&&ye(V)}catch(D){console.error("Error copying and running code:",D),$e("❌ Failed to apply suggestions. Please try again."),setTimeout(()=>$e(null),3e3)}},pt=async D=>{if(a)try{$e(`🔄 Applying ${D.type} suggestion...`);const V=a.fullPageHtml||C;if(!V){$e("❌ No HTML content available to improve.");return}console.log("[Content Analysis] Applying single suggestion:",{type:D.type,hasExactReplacement:!!D.exactReplacement,currentContent:D.currentContent?.substring(0,100)+"...",enhancedContent:D.enhancedContent?.substring(0,100)+"..."});let Q;try{if(Q=zr(V,[D]),!Q||Q.length<100)throw new Error("Generated HTML is too short or invalid");if(new DOMParser().parseFromString(Q,"text/html").querySelector("parsererror"))throw new Error("Generated HTML contains parsing errors")}catch(Se){if(console.error("Error in applySuggestionsWithDOM:",Se),D.exactReplacement)try{const{find:ke,replace:de}=D.exactReplacement;if(V.includes(ke))Q=V.replace(ke,de),console.log("[Content Analysis] Applied fallback exact replacement");else throw new Error("Exact replacement pattern not found")}catch(ke){console.error("Fallback also failed:",ke),$e("❌ Failed to apply suggestion. Please try again."),setTimeout(()=>$e(null),3e3);return}else{$e("❌ Failed to apply suggestion due to HTML processing error. Please try again."),setTimeout(()=>$e(null),3e3);return}}J(Q),f(!0),$e(`✅ ${D.type} suggestion applied! Check the "Improved" tab to see changes.`),B("improved")}catch(V){console.error("Error applying single suggestion:",V),$e("❌ Failed to apply suggestion. Please try again."),setTimeout(()=>$e(null),3e3)}},Lt=(D,V)=>{const Q=new Blob([D],{type:"text/plain"}),Se=URL.createObjectURL(Q),ke=document.createElement("a");ke.href=Se,ke.download=V,document.body.appendChild(ke),ke.click(),document.body.removeChild(ke),URL.revokeObjectURL(Se)},Ot=D=>D>=80?"text-green-600":D>=60?"text-yellow-600":"text-red-600",rr=D=>D>=80?"bg-green-100":D>=60?"bg-yellow-100":"bg-red-100",Mn=D=>{switch(D){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},kt=D=>{switch(D){case"high":return n.jsx(Ed,{className:"w-4 h-4"});case"medium":return n.jsx(cd,{className:"w-4 h-4"});case"low":return n.jsx(on,{className:"w-4 h-4"});default:return n.jsx(cd,{className:"w-4 h-4"})}},Pt=({html:D})=>{const V=Cd.useMemo(()=>`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    html, body { margin: 0; padding: 0; background: transparent; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
    .__wrap { max-width: 1024px; margin: 0 auto; padding: 16px; box-sizing: border-box; }
    img, video, iframe { max-width: 100%; height: auto; }
    h1, h2, h3, h4, h5, h6 { margin-top: 1.2em; margin-bottom: .5em; }
    p { line-height: 1.6; }
  </style>
  </head>
<body>
  <div class="__wrap">${D||""}</div>
</body>
</html>`,[D]);return n.jsx("iframe",{title:"Landing Preview",sandbox:"allow-same-origin",srcDoc:V,loading:"lazy",style:{width:"100%",height:"75vh",border:"none",borderRadius:"0.5rem",background:"transparent"}})},$t=(D,V)=>{if(!Array.isArray(D)||!V)return D||[];const Q=V.toLowerCase(),Se=new Map,ke=new Set,de=["artificial intelligence","ai","machine learning","ml","deep learning","data science","analytics","insights","metrics","performance","cloud computing","saas","platform","integration","api","business intelligence","reporting","dashboard","visualization","digital transformation","innovation","technology","solution","user experience","ux","interface","design","usability","security","compliance","governance","risk","audit","scalability","reliability","availability","backup","recovery","migration","tenant","onedrive","sharepoint","teams","cloudfuze","microsoft 365","google workspace","metadata"];return D.forEach(Pe=>{const Ee=(Pe||"").trim();if(!Ee)return;const ze=Ee.toLowerCase();if(ke.has(ze))return;const hn=ze.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");if(new RegExp(`(^|[^a-z0-9])${hn}([^a-z0-9]|$)`,"i").test(Q)){ke.add(ze);let Yt=0;de.some(sr=>ze.includes(sr))&&(Yt+=5),ze.split(" ").length>=2&&(Yt+=3),ze.length>8&&(Yt+=2),(ze.includes("-")||/[A-Z]/.test(Ee))&&(Yt+=2);const Kr=(Q.match(new RegExp(hn,"gi"))||[]).length;Se.set(Ee,Kr+Yt)}}),Array.from(Se.entries()).sort((Pe,Ee)=>Ee[1]!==Pe[1]?Ee[1]-Pe[1]:Ee[0].length-Pe[0].length).map(([Pe])=>Pe).slice(0,25)},Ut=D=>{const V=D.currentContent||D?.exactReplacement?.find||"",Q=D.enhancedContent||D?.exactReplacement?.replace||D.implementation||"";return{current:V,enhanced:Q}};if(w.useEffect(()=>{if(R==="improved"&&C&&a&&a.suggestions.length>0){be(!0);try{const D=zr(C,a.suggestions,{highlight:!0});J(D)}catch{J("Failed to generate improved code.")}finally{be(!1)}}},[R,C,a]),d&&!a)return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"text-center py-20",children:[n.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-black mx-auto mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-black mb-2",children:"Analyzing Content Structure"}),n.jsx("p",{className:"text-gray-600",children:"Analyzing your content for SEO and LLM optimization..."}),oe&&n.jsx("div",{className:"mt-6 inline-block bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded",children:oe})]})})});const mn=()=>{c(null),M(""),ne(null),I(""),S(""),k(""),B("landing"),J(""),$e(null),A(!0),he(!1),ae(!1),Object.keys(localStorage).forEach(V=>{V.startsWith(eo())&&localStorage.removeItem(V)}),localStorage.removeItem("structure_last_persisted"),console.log("[Content Analysis] New analysis initiated - state cleared")};return a?n.jsxs(n.Fragment,{children:[n.jsx(Jd,{message:Xe,onClose:()=>$e(null),autoClose:!0,autoCloseDelay:4e3}),n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between mb-8 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[n.jsx(Fs,{className:"w-8 h-8 text-black flex-shrink-0"}),n.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-black truncate",children:"Content Structure Analysis"})]}),n.jsxs("div",{className:"flex gap-2 lg:gap-3 flex-shrink-0 items-center",children:[n.jsx("button",{onClick:mn,className:"bg-blue-600 text-white px-3 lg:px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors font-semibold text-sm lg:text-base",children:"New Analysis"}),n.jsxs("button",{onClick:()=>Lt(a.structuredContent,"improved-content.txt"),className:"bg-black text-white px-3 lg:px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors flex items-center gap-2 text-sm lg:text-base",children:[n.jsx(Wt,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Download"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[a?.geoScoreTotal!==void 0&&n.jsxs("div",{className:"bg-white rounded-xl p-4 lg:p-6 shadow-lg border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`p-2 rounded-lg ${rr(a.geoScoreTotal)}`,children:n.jsx(Fs,{className:"w-6 h-6 text-black"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-black",children:"GEO Score Details"}),n.jsx("p",{className:"text-sm text-gray-600",children:"AI visibility and search engine optimization breakdown"})]})]}),n.jsx("button",{className:"text-sm px-2 py-1 rounded bg-gray-100 hover:bg-gray-200 text-black",onClick:()=>Mt(D=>!D),children:ft?"Hide":"Details"})]}),n.jsxs("div",{className:`text-3xl font-bold ${Ot(a.geoScoreTotal)}`,children:[a.geoScoreTotal,"/100"]})]}),a?.contentQualityScoreTotal!==void 0&&n.jsxs("div",{className:"bg-white rounded-xl p-4 lg:p-6 shadow-lg border border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`p-2 rounded-lg ${rr(a.contentQualityScoreTotal)}`,children:n.jsx(cf,{className:"w-6 h-6 text-black"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-black",children:"Content Quality Details"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Human/editorial score breakdown"})]})]}),n.jsx("button",{className:"text-sm px-2 py-1 rounded bg-gray-100 hover:bg-gray-200 text-black",onClick:()=>Jt(D=>!D),children:Kt?"Hide":"Details"})]}),n.jsxs("div",{className:`text-3xl font-bold ${Ot(a.contentQualityScoreTotal)}`,children:[a.contentQualityScoreTotal,"/100"]})]})]}),a?.geoBreakdown&&ft&&n.jsxs("div",{className:"bg-white rounded-xl p-4 lg:p-6 shadow-lg border border-gray-200 mb-8",children:[n.jsx("h4",{className:"font-semibold text-black mb-3",children:"GEO Breakdown"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-start content-start",children:Object.entries(a.geoBreakdown).map(([D,V])=>{const Se={evidence_attribution:30,answerability_snippetability:25,structured_understanding:20,freshness_stability:10,entity_topic_coverage:10,retrieval_friendliness:5}[D]??5,ke=V.score?.toFixed?`${V.score.toFixed(1)}/${Se}`:`${V.score}/${Se}`;return n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"font-semibold text-black",children:D.replace(/_/g," ").replace(/\b\w/g,de=>de.toUpperCase())}),n.jsx("div",{className:"text-black font-bold",children:ke})]}),n.jsx("div",{className:"text-sm text-gray-700 space-y-1.5",children:Object.entries(V).filter(([de])=>de!=="score").map(([de,Pe])=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-600",children:de.replace(/_/g," ")}),n.jsx("span",{className:"text-black font-medium",children:typeof Pe=="number"?Pe.toFixed(1):String(Pe)})]},de))})]},D)})})]}),a?.contentQualityBreakdown&&Kt&&n.jsxs("div",{className:"bg-white rounded-xl p-4 lg:p-6 shadow-lg border border-gray-200 mb-8",children:[n.jsx("h4",{className:"font-semibold text-black mb-3",children:"Content Quality Breakdown"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-start content-start",children:Object.entries(a.contentQualityBreakdown).map(([D,V])=>{const Se={readability_clarity:20,structure_coherence:15,depth_coverage:20,originality:15,accuracy_source_use:10,style_tone:10,accessibility_presentation:10}[D]??20,ke=V.score?.toFixed?`${V.score.toFixed(1)}/${Se}`:`${V.score}/${Se}`;return n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"font-semibold text-black",children:D.replace(/_/g," ").replace(/\b\w/g,de=>de.toUpperCase())}),n.jsx("div",{className:"text-black font-bold",children:ke})]}),n.jsx("div",{className:"text-sm text-gray-700 space-y-1.5",children:Object.entries(V).filter(([de])=>de!=="score").map(([de,Pe])=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-600",children:de.replace(/_/g," ")}),n.jsx("span",{className:"text-black font-medium",children:typeof Pe=="number"?Pe.toFixed(1):String(Pe)})]},de))})]},D)})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 mb-8 w-full overflow-hidden",children:[n.jsx("div",{className:"border-b border-gray-200",children:n.jsx("nav",{className:"flex flex-wrap gap-2 lg:gap-0 lg:space-x-8 px-4 lg:px-6 py-2 lg:py-0",children:[{id:"overview",label:"Overview",icon:ln},{id:"suggestions",label:"Suggestions",icon:Os},{id:"structured",label:"Structured Content",icon:Hr},{id:"schema",label:"Schema Markup",icon:mf}].map(D=>n.jsxs("button",{onClick:()=>L(D.id),className:`flex items-center gap-1 lg:gap-2 py-2 lg:py-4 px-2 lg:px-4 rounded-lg font-bold text-xs lg:text-sm transition-colors whitespace-nowrap 
                    ${j===D.id?"bg-white text-black":"bg-blue-600 text-black opacity-80 hover:opacity-100"}
                  `,children:[n.jsx(D.icon,{className:"w-3 h-3 lg:w-4 lg:h-4"}),n.jsx("span",{className:"hidden sm:inline",children:D.label}),n.jsx("span",{className:"sm:hidden",children:D.label.split(" ")[0]})]},D.id))})}),n.jsxs("div",{className:"p-4 lg:p-6 w-full overflow-hidden",children:[j==="overview"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-black mb-4",children:"Content Summary"}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 lg:gap-4",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("div",{className:"text-2xl font-bold text-black",children:a?.metadata?.wordCount||0}),n.jsx("div",{className:"text-sm text-gray-600",children:"Words"})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("div",{className:"text-2xl font-bold text-black",children:a?.metadata?.readingTime||1}),n.jsx("div",{className:"text-sm text-gray-600",children:"Min Read"})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("div",{className:"text-2xl font-bold text-black",children:a?.suggestions?.length||0}),n.jsx("div",{className:"text-sm text-gray-600",children:"Suggestions"})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("div",{className:"text-2xl font-bold text-black",children:(a?.metadata?.language||"en").toUpperCase()}),n.jsx("div",{className:"text-sm text-gray-600",children:"Language"})]})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-black mb-4",children:"Content Metadata"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),n.jsx("input",{type:"text",value:a?.metadata?.title||"No Title",readOnly:!0,className:"w-full px-3 py-2 border border-blue-400 rounded-lg bg-gray-50 text-blue-900 font-semibold focus:outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{value:a?.metadata?.description||"No Description",readOnly:!0,rows:3,className:"w-full px-3 py-2 border border-blue-400 rounded-lg bg-gray-50 text-blue-900 font-semibold focus:outline-none resize-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Keywords"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:$t(a?.metadata?.keywords||[],a?.originalContent||"").map((D,V)=>n.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:D},V))})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Author"}),n.jsx("input",{type:"text",value:a?.metadata?.author||"Unknown",readOnly:!0,className:"w-full px-3 py-2 border border-blue-400 rounded-lg bg-gray-50 text-blue-900 font-semibold focus:outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Publish Date"}),n.jsx("input",{type:"text",value:a?.metadata?.publishDate||"Unknown",readOnly:!0,className:"w-full px-3 py-2 border border-blue-400 rounded-lg bg-gray-50 text-blue-900 font-semibold focus:outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reading Time"}),n.jsx("input",{type:"text",value:`${a?.metadata?.readingTime||1} minutes`,readOnly:!0,className:"w-full px-3 py-2 border border-blue-400 rounded-lg bg-gray-50 text-blue-900 font-semibold focus:outline-none"})]})]})]})]})]}),j==="suggestions"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between mb-6 gap-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-black",children:"Structure Improvement Suggestions"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:et,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors font-semibold flex items-center gap-2",children:[n.jsx(ud,{className:"w-4 h-4"}),"Run Full Page"]}),n.jsxs("button",{onClick:st,className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors font-semibold flex items-center gap-2",children:[n.jsx(ln,{className:"w-4 h-4"}),"Compare Pages"]}),n.jsxs("button",{onClick:Ce,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors font-semibold flex items-center gap-2",children:[n.jsx(xr,{className:"w-4 h-4"}),"Apply All Suggestions"]})]})]}),n.jsx("div",{className:"space-y-6",children:a?.suggestions?.map((D,V)=>n.jsx("div",{className:"border border-gray-200 rounded-lg p-6 bg-white shadow-sm",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:`p-3 rounded-lg ${Mn(D.priority)}`,children:kt(D.priority)}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("h4",{className:"font-semibold text-black text-lg",children:D.description}),n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Mn(D.priority)}`,children:D.priority})]}),(()=>{const{current:Q}=Ut(D);return Q})()&&n.jsxs("div",{className:"mb-4",children:[n.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"Current Content:"}),n.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200 overflow-auto",children:n.jsx("pre",{className:"text-sm text-red-700 font-mono whitespace-pre-wrap",children:Ut(D).current})})]}),(()=>{const{enhanced:Q}=Ut(D);return Q})()&&n.jsxs("div",{className:"mb-4",children:[n.jsx("h5",{className:"font-medium text-green-700 mb-2",children:"Enhanced Content:"}),n.jsx("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200 overflow-auto",children:n.jsx("pre",{className:"text-sm text-green-800 font-mono whitespace-pre-wrap",children:Ut(D).enhanced})})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-3",children:n.jsxs("p",{className:"text-sm text-yellow-800",children:[n.jsx("strong",{children:"🎯 Impact:"})," ",D.impact]})}),n.jsx("div",{className:"flex gap-2",children:n.jsxs("button",{onClick:()=>pt(D),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium flex items-center gap-2",children:[n.jsx(xr,{className:"w-4 h-4"}),"Apply This Suggestion"]})})]})]})},V))})]}),j==="structured"&&n.jsxs("div",{className:"w-full",children:[n.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between mb-4 gap-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-black",children:"Improved Content Structure"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("button",{className:`px-2 lg:px-3 py-1 rounded-lg text-xs lg:text-sm font-semibold border transition-colors duration-150 ${R==="landing"?"bg-black text-white border-black":"bg-gray-200 text-black border-gray-300 hover:bg-gray-300"}`,onClick:()=>B("landing"),children:"Landing"}),n.jsx("button",{className:`px-2 lg:px-3 py-1 rounded-lg text-xs lg:text-sm font-semibold border transition-colors duration-150 ${R==="code"?"bg-black text-white border-black":"bg-gray-200 text-black border-gray-300 hover:bg-gray-300"}`,onClick:()=>B("code"),children:"Code"}),R==="code"&&n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>re(C),className:"bg-gray-100 text-black px-2 lg:px-4 py-1 lg:py-2 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-1 lg:gap-2 text-xs lg:text-sm",children:[n.jsx(hf,{className:"w-3 h-3 lg:w-4 lg:h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Copy Code"})]}),n.jsxs("button",{onClick:Ve,className:"bg-blue-600 text-white px-2 lg:px-4 py-1 lg:py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-1 lg:gap-2 text-xs lg:text-sm",children:[n.jsx(ud,{className:"w-3 h-3 lg:w-4 lg:h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Copy & Run"})]}),n.jsxs("button",{onClick:()=>Lt(C,"original-page.html"),className:"bg-gray-600 text-white px-2 lg:px-4 py-1 lg:py-2 rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-1 lg:gap-2 text-xs lg:text-sm",children:[n.jsx(Wt,{className:"w-3 h-3 lg:w-4 lg:h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Download"})]})]})]})]}),R==="landing"?n.jsx("div",{className:"bg-gray-50 rounded-lg p-2 w-full",children:n.jsx(Pt,{html:a.structuredContent})}):R==="improved"?n.jsx("div",{className:"bg-gray-50 rounded-lg p-4 overflow-auto w-full",style:{maxHeight:"70vh"},children:n.jsx("div",{className:"text-xs lg:text-sm text-black font-mono leading-relaxed",children:n.jsx("code",{className:"block whitespace-pre-wrap break-all",children:K||'No improved code available yet. Click "Copy & Run" to generate improved code.'})})}):n.jsx("div",{className:"bg-gray-50 rounded-lg p-4 overflow-auto w-full",style:{maxHeight:"70vh"},children:n.jsx("div",{className:"text-xs lg:text-sm text-black font-mono leading-relaxed",children:n.jsx("code",{className:"block whitespace-pre-wrap break-all",children:C||"No code extracted yet."})})})]}),j==="schema"&&n.jsxs("div",{children:[n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between mb-4 gap-4",children:n.jsx("h3",{className:"text-lg font-semibold text-black mb-0",children:"Structured Data Markup"})}),n.jsxs("div",{className:"space-y-6",children:[a?.structuredData?.articleSchema&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-black mb-2",children:"Article Schema"}),n.jsx("div",{className:"bg-gray-50 rounded-lg p-4 overflow-x-auto",children:n.jsx("pre",{className:"text-xs lg:text-sm text-black font-mono break-words whitespace-pre-wrap",children:JSON.stringify(a.structuredData.articleSchema,null,2)})})]}),a?.structuredData?.faqSchema&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-black mb-2",children:"FAQ Schema"}),n.jsx("div",{className:"bg-gray-50 rounded-lg p-4 overflow-x-auto",children:n.jsx("pre",{className:"text-xs lg:text-sm text-black font-mono break-words whitespace-pre-wrap",children:JSON.stringify(a.structuredData.faqSchema,null,2)})})]}),!a?.structuredData?.articleSchema&&!a?.structuredData?.faqSchema&&n.jsx("div",{className:"text-sm text-gray-600",children:"No structured data captured for the last analysis."})]})]})]})]})]})})]}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-black mb-2",children:"New Content Structure Analysis"}),n.jsx("p",{className:"text-gray-600",children:"Enter a URL or paste content to analyze its structure"})]}),n.jsxs("div",{className:"mb-8 flex flex-col md:flex-row items-center gap-4",children:[n.jsx("input",{type:"url",value:U,onChange:V=>lo(V,Q=>{M(Q),g(Date.now()),A(!0)}),onPaste:V=>io(V,Q=>{M(Q),g(Date.now()),A(!0)}),onKeyDown:co,onFocus:()=>{g(Date.now()),A(!0)},required:!0,placeholder:"Paste a URL to analyze its structure... *",className:"flex-1 px-4 py-3 border border-blue-400 rounded-lg text-blue-900 font-semibold focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent text-base",disabled:me}),n.jsx("button",{onClick:Ie,disabled:me||!U.trim(),className:"bg-black text-white px-6 py-2 rounded-lg hover:bg-gray-800 transition-colors font-semibold disabled:opacity-50",children:me?"Analyzing...":"Analyze URL"})]}),oe&&n.jsx("div",{className:"text-red-600 mb-4",children:oe}),n.jsxs("div",{className:"text-center py-20",children:[n.jsx("h2",{className:"text-2xl font-bold text-black mb-2",children:"No Analysis Available"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Please provide content to analyze."}),n.jsx("div",{className:"mb-6 flex justify-center gap-4",children:n.jsx("button",{onClick:()=>{try{Fe(!0);const V=localStorage.getItem(ti());if(V){const Q=JSON.parse(V);Q.analysis&&Q.savedAt?Date.now()-Q.savedAt<864e5?(c(Q.analysis),Q.fullPageHtml&&k(Q.fullPageHtml),Q.improvedFullPageHtml&&J(Q.improvedFullPageHtml),Q.analysis.originalContent&&I(Q.analysis.originalContent),Q.analysis.crawledUrl&&M(Q.analysis.crawledUrl),Q.activeTab&&L(Q.activeTab),Q.codeViewType&&B(Q.codeViewType),$e("📊 Local analysis restored successfully!"),setTimeout(()=>$e(null),3e3)):(localStorage.removeItem("structure_last_persisted"),alert("No recent local analysis found.")):alert("No local analysis found.")}else alert("No local analysis found.")}catch(V){console.error("Failed to restore local analysis:",V),alert("Failed to restore local analysis. Please try again.")}finally{Fe(!1)}},disabled:Le,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors font-semibold disabled:opacity-50",children:Le?"Restoring...":"Restore Last Analysis"})}),n.jsx("div",{className:"flex gap-4 justify-center",children:!1})]})]})})}class Eg extends Cd.Component{constructor(o){super(o),this.state={hasError:!1}}static getDerivedStateFromError(o){return{hasError:!0,message:String(o?.message||"Unexpected error")}}componentDidCatch(o,a){console.error("[ErrorBoundary]",o,a)}handleReset=()=>{try{Object.keys(localStorage).forEach(o=>{o.startsWith("structure_analysis_state")&&localStorage.removeItem(o)})}catch{}this.setState({hasError:!1,message:void 0});try{window.location.reload()}catch{}};render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:n.jsxs("div",{className:"max-w-lg w-full bg-white border border-gray-200 rounded-xl p-6 text-center",children:[n.jsx("h2",{className:"text-xl font-bold text-black mb-2",children:"Something went wrong"}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:this.state.message||"The page failed to render."}),n.jsx("button",{className:"bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-800",onClick:this.handleReset,children:"Reset Structure Analysis"})]})}):this.props.children}}function Tg(){const l=un(),o=dn(),{content:a="",url:c=""}=l.state||{},d=()=>{o(-1)};return n.jsx(Eg,{fallbackMessage:"Structure analysis failed. Click reset and then Restore Last Analysis to reload your previous results.",children:n.jsx(Ag,{content:a,url:c,onBack:d})})}const Dg=({password:l,className:o=""})=>{const a=/[A-Z]/.test(l),c=/[a-z]/.test(l),d=/\d/.test(l),m=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(l),v=l.length>=8,S=a&&c&&d&&m&&v;return l.length===0?null:n.jsx("div",{className:`text-sm ${S?"text-green-600":"text-red-600"} ${o}`,children:S?"✅ Password meets all requirements":"❌ Password must contain: at least 8 characters, one uppercase letter, one lowercase letter, one number, and one special character"})},Lg=()=>{const[l,o]=w.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[a,c]=w.useState(""),[d,m]=w.useState(!1),[v,S]=w.useState(!1),[y,x]=w.useState(!1),[j,L]=w.useState(!1),[_,F]=w.useState(null),E=dn(),{login:$,error:U,clearError:M,isAuthenticated:oe}=Gr(),{handleInputChangeAggressive:ne,handlePaste:me,handleKeyDown:fe}=yi();w.useEffect(()=>{const I=async()=>{if(oe){console.log("[SignUp] User is authenticated via AuthContext, redirecting to overview..."),E("/overview",{replace:!0});return}if(Te.isAuthenticated()){console.log("[SignUp] User is authenticated via authService, redirecting to overview..."),E("/overview",{replace:!0});return}};I();const C=setInterval(I,100);return()=>clearInterval(C)},[E,oe]);const W=async I=>{if(I.preventDefault(),c(""),F(null),!l.firstName.trim()){c("First name is required");return}if(!l.lastName.trim()){c("Last name is required");return}if(!l.email.trim()){c("Email is required");return}if(!l.password.trim()){c("Password is required");return}if(!l.confirmPassword.trim()){c("Please confirm your password");return}const C=/^[A-Za-z]+$/;if(!C.test(l.firstName)){c("First name can contain only letters (A–Z, a–z)");return}if(!C.test(l.lastName)){c("Last name can contain only letters (A–Z, a–z)");return}const k=vn(l.email);if(!k.isValid){c(Pn(l.email,k));return}if(c(""),l.password.length<8){c("Password must be at least 8 characters long");return}if(!/[A-Z]/.test(l.password)){c("Password must contain at least one uppercase letter");return}if(!/[a-z]/.test(l.password)){c("Password must contain at least one lowercase letter");return}if(!/\d/.test(l.password)){c("Password must contain at least one number");return}if(!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(l.password)){c("Password must contain at least one special character");return}if(l.password!==l.confirmPassword){c("Passwords do not match");return}m(!0),M();try{const R=await Te.register({email:l.email,password:l.password,name:`${l.firstName} ${l.lastName}`,displayName:`${l.firstName} ${l.lastName}`});R.success?(console.log("[SignUp] Sign up successful, user is now logged in"),F(""),c(""),console.log("[SignUp] Forcing immediate navigation to overview..."),E("/overview",{replace:!0})):c(R.error||"Sign up failed. Please try again.")}catch(R){console.error("[SignUp] Sign up error:",R);let B="Sign up failed. Please try again.";R&&typeof R=="object"&&(R.message&&typeof R.message=="string"?R.message.includes("already exists")||R.message.includes("duplicate")?B="Account already exists on this email":R.message.includes("Network")||R.message.includes("fetch")?B="Network error. Please check your connection and try again.":B=R.message:R.error&&typeof R.error=="string"&&(R.error.includes("already exists")||R.error.includes("duplicate")?B="Account already exists on this email":R.error.includes("Network")||R.error.includes("connection")?B="Network error. Please check your connection and try again.":B=R.error)),console.log("[SignUp] Setting authentication error message:",B),F(B),c("")}finally{m(!1)}};return n.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-100 via-indigo-100 to-purple-100 px-4 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-300/30 via-indigo-300/30 to-purple-300/30"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-cyan-200/20 via-blue-200/20 to-indigo-200/20"}),n.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-gradient-to-br from-blue-400/40 to-cyan-400/40 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2 animate-pulse"}),n.jsx("div",{className:"absolute bottom-0 right-0 w-[500px] h-[500px] bg-gradient-to-tl from-purple-400/40 to-pink-400/40 rounded-full blur-3xl translate-x-1/2 translate-y-1/2 animate-pulse",style:{animationDelay:"1s"}}),n.jsx("div",{className:"absolute top-1/2 left-1/2 w-80 h-80 bg-gradient-to-r from-indigo-400/35 to-blue-400/35 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2 animate-pulse",style:{animationDelay:"2s"}}),n.jsx("div",{className:"absolute top-1/4 right-1/4 w-32 h-32 bg-gradient-to-br from-cyan-300/30 to-blue-300/30 rounded-full blur-2xl animate-bounce",style:{animationDelay:"0.5s"}}),n.jsx("div",{className:"absolute bottom-1/4 left-1/4 w-24 h-24 bg-gradient-to-br from-purple-300/30 to-pink-300/30 rounded-full blur-2xl animate-bounce",style:{animationDelay:"1.5s"}}),n.jsxs("div",{className:"w-full max-w-md mx-auto p-8 bg-white/90 backdrop-blur-md rounded-2xl shadow-2xl border border-white/30 relative z-10 bg-gradient-to-br from-white/95 via-white/90 to-white/95",children:[n.jsxs("div",{className:"text-center mb-10",children:[n.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:n.jsx(Br,{className:"w-12 h-12 text-white"})}),n.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent mb-3",children:"Create your account"}),n.jsx("p",{className:"text-gray-600 text-lg",children:"Sign up to get started with kabini.ai"})]}),n.jsxs("form",{onSubmit:W,className:"space-y-8",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:["First Name ",n.jsx("span",{className:"text-red-600",children:"*"})]}),n.jsx("input",{type:"text",name:"firstName",value:l.firstName,onChange:I=>ne(I,C=>{const k=C.replace(/[^A-Za-z]/g,"");o(R=>({...R,firstName:k})),a&&c("")}),onPaste:I=>me(I,C=>{const k=C.replace(/[^A-Za-z]/g,"");o(R=>({...R,firstName:k}))}),onKeyDown:fe,onCompositionStart:I=>I.preventDefault(),onCompositionUpdate:I=>I.preventDefault(),onCompositionEnd:I=>I.preventDefault(),required:!0,placeholder:"Enter your first name *",pattern:"[A-Za-z]+",autoComplete:"given-name",className:"w-full px-4 py-4 border-2 border-gray-300 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:["Last Name ",n.jsx("span",{className:"text-red-600",children:"*"})]}),n.jsx("input",{type:"text",name:"lastName",value:l.lastName,onChange:I=>ne(I,C=>{const k=C.replace(/[^A-Za-z]/g,"");o(R=>({...R,lastName:k})),a&&c("")}),onPaste:I=>me(I,C=>{const k=C.replace(/[^A-Za-z]/g,"");o(R=>({...R,lastName:k}))}),onKeyDown:fe,onCompositionStart:I=>I.preventDefault(),onCompositionUpdate:I=>I.preventDefault(),onCompositionEnd:I=>I.preventDefault(),required:!0,placeholder:"Enter your last name *",pattern:"[A-Za-z]+",autoComplete:"family-name",className:"w-full px-4 py-4 border-2 border-gray-300 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:["Email ",n.jsx("span",{className:"text-red-600",children:"*"})]}),n.jsx("input",{type:"email",name:"email",value:l.email,onChange:I=>ne(I,C=>{const k=qr(C);if(o(R=>({...R,email:k})),a&&c(""),!k.trim())c("");else{const R=vn(k);R.isValid?c(""):c(Pn(k,R))}}),onPaste:I=>me(I,C=>{const k=qr(C);o(B=>({...B,email:k}));const R=vn(k);R.isValid?c(""):c(Pn(k,R))}),onKeyDown:fe,onCompositionStart:I=>I.preventDefault(),onCompositionUpdate:I=>I.preventDefault(),onCompositionEnd:I=>I.preventDefault(),required:!0,placeholder:"Enter your email address *",className:`w-full px-4 py-4 border-2 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all ${a?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300"}`}),a&&n.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[n.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),a]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:["Password ",n.jsx("span",{className:"text-red-600",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:v?"text":"password",name:"password",value:l.password,onChange:I=>ne(I,C=>{o(be=>({...be,password:C})),a&&c("");const k=/[A-Z]/.test(C),R=/[a-z]/.test(C),B=/\d/.test(C),K=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(C),J=C.length>=8,le=k&&R&&B&&K&&J;L(le),le&&c("")}),onPaste:I=>me(I,C=>{o(be=>({...be,password:C}));const k=/[A-Z]/.test(C),R=/[a-z]/.test(C),B=/\d/.test(C),K=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(C),J=C.length>=8,le=k&&R&&B&&K&&J;L(le),le&&c("")}),onKeyDown:fe,onCompositionStart:I=>I.preventDefault(),onCompositionUpdate:I=>I.preventDefault(),onCompositionEnd:I=>I.preventDefault(),required:!0,placeholder:"Create a password *",className:"w-full px-4 pr-12 py-4 border-2 border-gray-300 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"}),n.jsx("button",{type:"button",onClick:()=>S(!v),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors focus:outline-none",tabIndex:-1,"aria-label":v?"Hide password":"Show password",children:v?n.jsx(Ms,{className:"w-5 h-5"}):n.jsx(ln,{className:"w-5 h-5"})})]}),n.jsx(Dg,{password:l.password,className:"mt-3"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:["Confirm Password ",n.jsx("span",{className:"text-red-600",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:y?"text":"password",name:"confirmPassword",value:l.confirmPassword,onChange:I=>ne(I,C=>{o(k=>({...k,confirmPassword:C})),a&&c("")}),onPaste:I=>me(I,C=>{o(k=>({...k,confirmPassword:C}))}),onKeyDown:fe,onCompositionStart:I=>I.preventDefault(),onCompositionUpdate:I=>I.preventDefault(),onCompositionEnd:I=>I.preventDefault(),required:!0,placeholder:"Re-enter your password *",className:"w-full px-4 pr-12 py-4 border-2 border-gray-300 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"}),n.jsx("button",{type:"button",onClick:()=>x(!y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors focus:outline-none",tabIndex:-1,"aria-label":y?"Hide confirm password":"Show confirm password",children:y?n.jsx(Ms,{className:"w-5 h-5"}):n.jsx(ln,{className:"w-5 h-5"})})]})]}),n.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold py-4 px-6 rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg transform hover:scale-[1.02]",children:d?n.jsx(wn,{className:"w-5 h-5 animate-spin"}):"Create Account"})]}),n.jsxs("button",{type:"button",onClick:()=>E("/login"),className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold py-4 px-6 rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-lg transform hover:scale-[1.02] mt-6",children:[n.jsx(_s,{className:"w-5 h-5"}),"Already have an account? Sign in"]})]}),n.jsx(Hs,{error:_||U,onClose:()=>{F(null),M()},autoClose:!0,autoCloseDelay:5e3})]})},Pg=()=>{const[l,o]=w.useState(""),[a,c]=w.useState(!1),[d,m]=w.useState(null),[v,S]=w.useState(!1),y=dn(),{handleInputChangeAggressive:x,handlePaste:j,handleKeyDown:L}=yi(),_=async F=>{if(F.preventDefault(),console.log("[ForgotPassword] Form submitted, clearing previous errors"),m(""),!l||!l.trim()){console.log("[ForgotPassword] Email is empty, setting validation error"),m("Please enter your email address");return}try{const E=vn(l);if(!E||!E.isValid){console.log("[ForgotPassword] Email validation failed, setting validation error"),m("Please enter a valid email address");return}}catch(E){console.log("[ForgotPassword] Email validation error:",E),m("Please enter a valid email address");return}console.log("[ForgotPassword] Starting API call to forgot-password endpoint"),S(!0);try{const E=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l.trim()})}),$=await E.json();console.log("[ForgotPassword] Response:",E.status,$),E.ok?(console.log("[ForgotPassword] Password reset email sent successfully"),c(!0)):(console.error("[ForgotPassword] Failed to send reset email:",$.error),m($.error||"Failed to send reset email. Please try again."))}catch(E){console.error("[ForgotPassword] Error during forgot password request:",E),m("Network error. Please check your connection and try again.")}finally{S(!1)}};return n.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-100 via-indigo-100 to-purple-100 px-4 relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-300/30 via-indigo-300/30 to-purple-300/30"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-cyan-200/20 via-blue-200/20 to-indigo-200/20"}),n.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-gradient-to-br from-blue-400/40 to-cyan-400/40 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2 animate-pulse"}),n.jsx("div",{className:"absolute bottom-0 right-0 w-[500px] h-[500px] bg-gradient-to-tl from-purple-400/40 to-pink-400/40 rounded-full blur-3xl translate-x-1/2 translate-y-1/2 animate-pulse",style:{animationDelay:"1s"}}),n.jsx("div",{className:"absolute top-1/2 left-1/2 w-80 h-80 bg-gradient-to-r from-indigo-400/35 to-blue-400/35 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2 animate-pulse",style:{animationDelay:"2s"}}),n.jsx("div",{className:"absolute top-1/4 right-1/4 w-32 h-32 bg-gradient-to-br from-cyan-300/30 to-blue-300/30 rounded-full blur-2xl animate-bounce",style:{animationDelay:"0.5s"}}),n.jsx("div",{className:"absolute bottom-1/4 left-1/4 w-24 h-24 bg-gradient-to-br from-purple-300/30 to-pink-300/30 rounded-full blur-2xl animate-bounce",style:{animationDelay:"1.5s"}}),n.jsxs("div",{className:"w-full max-w-md mx-auto p-8 bg-white/90 backdrop-blur-md rounded-2xl shadow-2xl border border-white/30 relative z-10 bg-gradient-to-br from-white/95 via-white/90 to-white/95",children:[n.jsxs("div",{className:"text-center mb-10",children:[n.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:n.jsx(Br,{className:"w-12 h-12 text-white"})}),n.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent mb-3",children:"Forgot your password?"}),n.jsx("p",{className:"text-gray-600 text-lg",children:"Enter your email address and we'll send you a link to reset your password."})]}),a?n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-6",children:[n.jsx("div",{className:"text-green-600 font-semibold mb-2",children:"Check your email"}),n.jsxs("div",{className:"text-gray-600 text-sm",children:["If an account with that email exists, a reset link has been sent to ",n.jsx("strong",{children:l}),"."]})]}),n.jsxs("button",{onClick:()=>y("/login"),className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold py-4 px-6 rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-lg transform hover:scale-[1.02]",children:[n.jsx(_s,{className:"w-5 h-5"}),"Back to Login"]})]}):n.jsxs("form",{onSubmit:_,className:"space-y-8",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:["Email ",n.jsx("span",{className:"text-red-600",children:"*"})]}),n.jsx("input",{type:"email",value:l,onChange:F=>x(F,E=>{const $=qr(E);o($);const U=vn($);U.isValid?m(null):m(Pn($,U))}),onPaste:F=>j(F,E=>{const $=qr(E);o($);const U=vn($);U.isValid?m(null):m(Pn($,U))}),onKeyDown:L,onCompositionStart:F=>F.preventDefault(),onCompositionUpdate:F=>F.preventDefault(),onCompositionEnd:F=>F.preventDefault(),required:!0,placeholder:"Enter your email address *",className:"w-full px-4 py-4 border-2 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all border-gray-300"})]}),n.jsx("button",{type:"submit",disabled:v,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold py-4 px-6 rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg transform hover:scale-[1.02]",children:v?n.jsx(wn,{className:"w-5 h-5 animate-spin"}):"Send Reset Link"}),n.jsxs("button",{type:"button",onClick:()=>y("/login"),className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold py-4 px-6 rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-lg transform hover:scale-[1.02]",children:[n.jsx(_s,{className:"w-5 h-5"}),"Back to Login"]})]})]}),n.jsx(Hs,{error:d,onClose:()=>m(null),autoClose:!0,autoCloseDelay:5e3,type:"error"})]})},Ig=()=>{const[l]=Bp(),[o,a]=w.useState({password:"",confirmPassword:""}),[c,d]=w.useState(""),[m,v]=w.useState(!1),[S,y]=w.useState(!1),[x,j]=w.useState(!1),[L,_]=w.useState(!0),[F,E]=w.useState(!1),[$,U]=w.useState(!1),[M,oe]=w.useState(!1),ne=dn(),me=l.get("token");w.useEffect(()=>{if(!me){d("Invalid reset link. Please request a new password reset."),_(!1);return}console.log("[ResetPassword] Token found in URL, showing reset form"),j(!0),_(!1)},[me]);const fe=C=>{const{name:k,value:R}=C.target;if(a({...o,[k]:R}),k==="password"){const B=R.length>=8&&/[a-z]/.test(R)&&/[A-Z]/.test(R)&&/\d/.test(R);oe(B)}},W=()=>o.password?o.confirmPassword?o.password.length<8?(d("Password must be at least 8 characters long"),!1):/(?=.*[a-z])/.test(o.password)?/(?=.*[A-Z])/.test(o.password)?/(?=.*\d)/.test(o.password)?o.password!==o.confirmPassword?(d("Passwords do not match"),!1):!0:(d("Password must contain at least one number"),!1):(d("Password must contain at least one uppercase letter"),!1):(d("Password must contain at least one lowercase letter"),!1):(d("Please confirm your password"),!1):(d("Password is required"),!1),I=async C=>{if(C.preventDefault(),d(""),!!W()){if(!me){d("Invalid reset token. Please request a new password reset.");return}v(!0);try{console.log("[ResetPassword] Attempting to reset password with token:",me);const k=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:me,newPassword:o.password})}),R=await k.json();console.log("[ResetPassword] Response:",k.status,R),k.ok?(console.log("[ResetPassword] Password reset successful"),y(!0)):(console.error("[ResetPassword] Password reset failed:",R.error),d(R.error||"Failed to reset password. Please try again."))}catch(k){console.error("[ResetPassword] Error during password reset:",k),d("Network error. Please check your connection and try again.")}finally{v(!1)}}};return L?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:n.jsx("div",{className:"w-full max-w-md mx-auto p-8 bg-white rounded-lg shadow-sm",children:n.jsxs("div",{className:"text-center",children:[n.jsx(wn,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),n.jsx("div",{className:"text-gray-600",children:"Verifying reset link..."})]})})}):x?S?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:n.jsx("div",{className:"w-full max-w-md mx-auto p-8 bg-white rounded-lg shadow-sm",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:n.jsx(on,{className:"w-8 h-8 text-green-600"})}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Password Reset Successfully"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Your password has been updated. You can now log in with your new password."}),n.jsxs("button",{onClick:()=>ne("/login"),className:"w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[n.jsx(_s,{className:"w-5 h-5"}),"Back to Login"]})]})})}):n.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:[n.jsxs("div",{className:"w-full max-w-md mx-auto p-8 bg-white rounded-lg shadow-sm",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:n.jsx(Br,{className:"w-8 h-8 text-blue-600"})}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reset Your Password"}),n.jsx("p",{className:"text-gray-600",children:"Enter your new password below"})]}),n.jsxs("form",{onSubmit:I,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:["New Password ",n.jsx("span",{className:"text-red-600",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:F?"text":"password",name:"password",value:o.password,onChange:fe,required:!0,placeholder:"Enter your new password",className:"w-full px-4 pr-12 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),n.jsx("button",{type:"button",onClick:()=>E(!F),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",tabIndex:-1,"aria-label":F?"Hide password":"Show password",children:F?n.jsx(Ms,{className:"w-5 h-5"}):n.jsx(ln,{className:"w-5 h-5"})})]}),n.jsx("div",{className:`mt-2 text-xs ${M?"text-green-600":"text-gray-500"}`,children:M?"Password meets requirements":"Must be at least 8 characters with uppercase, lowercase, and number"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:["Confirm New Password ",n.jsx("span",{className:"text-red-600",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:$?"text":"password",name:"confirmPassword",value:o.confirmPassword,onChange:fe,required:!0,placeholder:"Re-enter your new password",className:"w-full px-4 pr-12 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),n.jsx("button",{type:"button",onClick:()=>U(!$),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",tabIndex:-1,"aria-label":$?"Hide confirm password":"Show confirm password",children:$?n.jsx(Ms,{className:"w-5 h-5"}):n.jsx(ln,{className:"w-5 h-5"})})]})]}),n.jsx("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?n.jsx(wn,{className:"w-5 h-5 animate-spin"}):"Reset Password"})]}),n.jsx("div",{className:"mt-6 text-center",children:n.jsxs("button",{type:"button",onClick:()=>ne("/login"),className:"w-full bg-blue-500 border-2 border-blue-600 text-white hover:bg-blue-600 hover:text-white font-bold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center gap-2 shadow-lg",children:[n.jsx(_s,{className:"w-5 h-5"}),"Back to Login"]})})]}),n.jsx(Hs,{error:c,onClose:()=>d(""),autoClose:!0,autoCloseDelay:5e3})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:n.jsx("div",{className:"w-full max-w-md mx-auto p-8 bg-white rounded-lg shadow-sm",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:n.jsx(Br,{className:"w-8 h-8 text-red-600"})}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Invalid Reset Link"}),n.jsx("p",{className:"text-gray-600 mb-6",children:c}),n.jsx("button",{onClick:()=>ne("/forgot-password"),className:"w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-all",children:"Request New Reset Link"})]})})})},Rg=()=>{const[l,o]=w.useState(null),[a,c]=w.useState(null),d=()=>{o("Invalid email or password. Please check your credentials and try again.")},m=()=>{c("Login successful! Welcome back.")},v=()=>{o("Your session will expire soon. Please save your work.")};return n.jsxs("div",{className:"p-8 space-y-4",children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Notification Test"}),n.jsxs("div",{className:"space-x-4",children:[n.jsx("button",{onClick:d,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Show Error"}),n.jsx("button",{onClick:m,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",children:"Show Success"}),n.jsx("button",{onClick:v,className:"px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"Show Warning"})]}),n.jsx(Hs,{error:l,onClose:()=>o(null),autoClose:!0,autoCloseDelay:5e3,type:"error"}),n.jsx(Jd,{message:a,onClose:()=>c(null),autoClose:!0,autoCloseDelay:3e3})]})},_g=l=>{let o=0;if(l.length===0)return o.toString();for(let a=0;a<l.length;a++){const c=l.charCodeAt(a);o=(o<<5)-o+c,o=o&o}return Math.abs(o).toString()},Yd="llm_qa_sessions",Zd="llm_qa_current_session",Xd="llm_competitor_urls",ni="enhance_content_cache_",Fg=[{label:"Overview",icon:n.jsx(xr,{}),path:"/overview"},{label:"Competitor Insight",icon:n.jsx(ln,{}),path:"/ai-visibility-analysis"},{label:"Content Analyzer",icon:n.jsx(Hr,{}),path:"/enhance-content"},{label:"Performance Report",icon:n.jsx(Os,{}),path:"/content-structure-analysis"},{label:"History",icon:n.jsx(ii,{}),path:"/history"},{label:"Statistics",icon:n.jsx(Fs,{}),path:"/statistics"}];function Mg({isOpen:l,setIsOpen:o,onLogout:a,user:c,currentPath:d}){const m=dn(),v=S=>{m(S),o(!1)};return n.jsxs(n.Fragment,{children:[l&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>o(!1)}),n.jsxs("aside",{className:`fixed md:static inset-y-0 left-0 z-50 bg-white w-64 min-h-screen flex flex-col border-r border-gray-200 shadow-lg transform transition-transform duration-300 md:transform-none ${l?"translate-x-0":"-translate-x-full"}`,children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-primary/10",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary to-accent rounded-lg flex items-center justify-center flex-shrink-0",children:n.jsx(xr,{className:"w-5 h-5 text-white"})}),n.jsx("span",{className:"text-lg font-bold text-primary tracking-wide truncate",children:"kabini.ai"})]}),n.jsx("button",{className:"md:hidden text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors p-1.5 rounded-md flex items-center justify-center flex-shrink-0 ml-2",onClick:()=>o(!1),"aria-label":"Close menu",children:n.jsxs("div",{className:"relative w-5 h-5 flex items-center justify-center",children:[n.jsx("div",{className:"absolute w-4 h-0.5 bg-gray-600 rounded-full transform rotate-45"}),n.jsx("div",{className:"absolute w-4 h-0.5 bg-gray-600 rounded-full transform -rotate-45"})]})})]}),n.jsx("nav",{className:"flex-1 flex flex-col gap-1 mt-6 px-2",children:Fg.map(S=>{const x=d===S.path;return n.jsxs("button",{className:`flex items-center gap-3 px-4 py-2 rounded-lg font-semibold transition-colors duration-200 text-left ${x?"bg-primary text-white border-l-4 border-primary shadow":"bg-white text-black hover:bg-primary/10 hover:text-primary"}`,onClick:()=>v(S.path),children:[n.jsx("span",{className:`w-5 h-5 ${x?"text-white":"text-primary"}`,children:S.icon}),S.label]},S.path)})}),n.jsxs("div",{className:"mt-auto px-4 py-4 border-t border-primary/10",children:[n.jsxs("div",{className:"flex items-center gap-3 w-full mb-4",children:[n.jsx(Br,{className:"w-6 h-6 text-primary flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-bold text-slate-900 text-sm truncate",children:c?.displayName||c?.name||"User"}),n.jsx("div",{className:"text-xs text-primary truncate",children:c?.email||""})]})]}),n.jsx("div",{className:"border-t border-gray-200 pt-4",children:n.jsxs("button",{className:"w-full bg-white hover:bg-gray-50 text-blue-600 hover:text-blue-700 font-semibold py-3 px-4 rounded-lg flex items-center justify-center gap-2 transition-all duration-200 shadow-sm hover:shadow-md border border-blue-200 hover:border-blue-300",onClick:a,children:[n.jsx(Td,{className:"w-4 h-4"}),"Logout"]})})]})]})]})}function Og({setIsOpen:l,onLogout:o}){return n.jsxs("header",{className:"w-full bg-white border-b border-primary/10 flex items-center justify-between px-4 sm:px-8 py-4 relative z-30",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary to-accent rounded-lg flex items-center justify-center",children:n.jsx(xr,{className:"w-5 h-5 text-white"})}),n.jsx("span",{className:"text-xl font-extrabold text-primary tracking-wide",children:"kabini.ai"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{className:"md:hidden bg-red-50 border border-red-200 text-red-600 px-3 py-2 rounded-lg text-sm font-medium hover:bg-red-100 hover:border-red-300 transition-all flex items-center gap-2",onClick:o,"aria-label":"Logout",children:[n.jsx(Td,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Logout"})]}),n.jsx("button",{className:"block md:hidden text-primary hover:text-accent transition-colors p-2 rounded-lg hover:bg-gray-100 flex items-center justify-center border border-gray-200 bg-white",onClick:()=>l(!0),"aria-label":"Open menu",style:{minWidth:"44px",minHeight:"44px"},children:n.jsxs("div",{className:"relative w-6 h-6",children:[n.jsx("div",{className:"absolute w-5 h-1 bg-blue-600 rounded-full top-1 left-0.5"}),n.jsx("div",{className:"absolute w-5 h-1 bg-blue-600 rounded-full top-3 left-0.5"}),n.jsx("div",{className:"absolute w-5 h-1 bg-blue-600 rounded-full top-5 left-0.5"})]})})]})]})}function $g(){return n.jsxs("footer",{className:"w-full bg-white border-t border-primary/10 text-center text-primary py-4 text-sm",children:["© ",new Date().getFullYear()," kabini.ai. All rights reserved."]})}function Nd(){const{user:l}=Gr(),[o,a]=_n(Yd,[]),[c,d]=_n(Zd,null),[m,v]=w.useState([]),[S,y]=w.useState(""),[x,j]=w.useState([]),[L,_]=w.useState(1),[F,E]=w.useState(!1),[$,U]=w.useState("gemini"),[M,oe]=w.useState("gemini-1.5-flash"),[ne,me]=w.useState("gemini"),[fe,W]=w.useState("gemini-1.5-flash"),[I,C]=w.useState({}),[k,R]=w.useState([]),[B,K]=w.useState(""),[J,le]=w.useState(""),[be,G]=w.useState(!1),[f,h]=w.useState(!1),[g,b]=w.useState({totalTokens:0,estimatedCost:0,confidenceScore:0,contentLength:0}),[A,z]=w.useState(!1),[X,ue]=w.useState(Date.now()),[ae,te]=w.useState(!0);w.useEffect(()=>{const Y=Object.keys(localStorage).filter(ce=>ce.startsWith(ni));if(Y.length>0){let ce=Y[0],De=0;Y.forEach(Ie=>{try{const Ce=JSON.parse(localStorage.getItem(Ie)||"{}");Ce.lastAccessed&&Ce.lastAccessed>De&&(De=Ce.lastAccessed,ce=Ie)}catch{}});try{const Ie=localStorage.getItem(ce);if(Ie){const Ce=JSON.parse(Ie);if(Ce.qaItems&&v(Ce.qaItems),Ce.qaContent&&y(Ce.qaContent),Ce.content&&K(Ce.content),Ce.newUrl&&le(Ce.newUrl),Ce.selectedQuestions&&j(Ce.selectedQuestions),typeof Ce.isProcessing=="boolean"&&E(Ce.isProcessing),Ce.questionProvider&&U(Ce.questionProvider),Ce.questionModel&&oe(Ce.questionModel),Ce.answerProvider&&me(Ce.answerProvider),Ce.answerModel&&W(Ce.answerModel),Ce.answerLoading&&C(Ce.answerLoading),Ce.urls){const re=Ce.urls.map(ye=>({...ye,status:ye.status==="extracting"?"pending":ye.status}));R(re)}Ce.metrics&&b(Ce.metrics),Ce.extracting&&G(Ce.extracting),Ce.showAnalysisNotification&&z(Ce.showAnalysisNotification),setTimeout(()=>{const re={...Ce,lastAccessed:Date.now()};localStorage.setItem(ce,JSON.stringify(re))},100)}}catch(Ie){console.error("Error restoring enhance content state:",Ie)}}},[]),w.useEffect(()=>{h(!1),G(!1)},[]),w.useEffect(()=>{if(B.trim()||k.length>0||m.length>0){const Y=_g(B+k.map(Ie=>Ie.url).join("")),ce=ni+Y,De={qaItems:m,qaContent:S,content:B,newUrl:J,selectedQuestions:x,questionCount:L,isProcessing:F,questionProvider:$,questionModel:M,answerProvider:ne,answerModel:fe,answerLoading:I,urls:k,metrics:g,extracting:be,crawling:f,showAnalysisNotification:A,lastAccessed:Date.now(),createdAt:Date.now()};localStorage.setItem(ce,JSON.stringify(De))}},[m,S,B,J,x,L,F,$,M,ne,fe,I,k,g,be,f,A]),w.useEffect(()=>{Array.isArray(o)||a([])},[o,a]),w.useEffect(()=>{m.length>0&&S&&m.some(Y=>Y.answer&&(!Y.sentiment||Y.sentiment===""||Y.geoScore===0))&&(console.log("[Metrics] Auto-recalculating metrics for existing data..."),Fn())},[m.length,S]),w.useEffect(()=>{if(o.length===0&&l){const Y={id:"default",name:"Default Session",type:"question",timestamp:new Date().toISOString(),model:"gemini-pro",blogContent:"",qaData:[],totalInputTokens:0,totalOutputTokens:0,statistics:{totalQuestions:0,avgAccuracy:"0",avgCitationLikelihood:"0",totalCost:"0"},userId:l.id};a([Y]),d(Y)}},[o,a,d,l]),w.useEffect(()=>{const Y=k.map(ce=>ce.url);localStorage.setItem(Xd,JSON.stringify(Y))},[k]),w.useEffect(()=>{const Y=()=>{ue(Date.now()),te(!0)};return window.addEventListener("mousemove",Y),window.addEventListener("keydown",Y),window.addEventListener("scroll",Y),window.addEventListener("click",Y),()=>{window.removeEventListener("mousemove",Y),window.removeEventListener("keydown",Y),window.removeEventListener("scroll",Y),window.removeEventListener("click",Y)}},[]);const he=Y=>{R(k.filter((ce,De)=>De!==Y))},Le=Y=>{const ce=Y.length/4,De=ce*1e-4,Ie=Math.random()*.2+.8;b({totalTokens:Math.round(ce),estimatedCost:parseFloat(De.toFixed(4)),confidenceScore:parseFloat((Ie*100).toFixed(1)),contentLength:Y.length})},Fe=async()=>{if(!J.trim())return;console.log("[Single URL Extract] Function called with:",J);const Y={url:J.trim(),content:"",status:"extracting"};R([Y]);try{const De=(await Dt.extractContentFromUrl(J.trim())).content||"",Ie=De.length/4,Ce=Ie*1e-4,re=Math.random()*.3+.7,ye={...Y,content:De,status:"success",tokens:Ie,cost:Ce,confidence:re};R([ye]),K(De),Le(De),le(""),console.log("[Single URL Extract] Successfully extracted content from:",J)}catch(ce){const De={...Y,status:"error",error:ce.message||"Failed to extract content"};R([De]),console.error("[Single URL Extract] Error:",ce)}},Xe=Y=>{const ce=Y.target.value;K(ce),Le(ce)},$e=()=>{Object.keys(localStorage).filter(ce=>ce.startsWith(ni)).forEach(ce=>localStorage.removeItem(ce)),v([]),y(""),K(""),le(""),j([]),R([]),b({totalTokens:0,estimatedCost:0,confidenceScore:0,contentLength:0}),G(!1),z(!1),E(!1),C({})},Sn=async(Y,ce)=>{const{calculateAndUpdateVectorSimilarities:De}=await Ln(async()=>{const{calculateAndUpdateVectorSimilarities:Ve}=await import("./vectorSimilarity-CM4uDOKa.js");return{calculateAndUpdateVectorSimilarities:Ve}},[]),Ie=await De(Y,ce);v(Ve=>[...Ve,...Ie]),y(ce);const Ce=Y.reduce((Ve,pt)=>Ve+pt.inputTokens,0),re=Y.reduce((Ve,pt)=>Ve+pt.outputTokens,0),ye=Sd(Ce,re,"gemini-pro"),et={id:`qa-session-${Date.now()}`,name:`Q&A Generation - ${new Date().toLocaleDateString()}`,type:"question",timestamp:new Date().toISOString(),model:"gemini-pro",blogContent:ce,qaData:Ie,totalInputTokens:Ce,totalOutputTokens:re,statistics:{totalQuestions:Y.length,avgAccuracy:"85",avgCitationLikelihood:"75",totalCost:ye.toString()},userId:l?.id||"anonymous"};console.log("[App] Saving QA session to history:",et);const st={id:`qa-history-${Date.now()}`,type:"qa",name:`Q&A Analysis - ${new Date().toLocaleDateString()}`,timestamp:new Date().toISOString(),status:"completed",userId:l?.id||"anonymous",sessionData:et};try{await Je.addHistoryItem(st),window.dispatchEvent(new CustomEvent("new-analysis-created",{detail:{type:"qa",timestamp:new Date().toISOString()}}));try{localStorage.setItem("qa_last_saved",new Date().toISOString())}catch{}}catch(Ve){console.error("[App] Failed to save history item:",Ve),window.dispatchEvent(new CustomEvent("new-analysis-created",{detail:{type:"qa",timestamp:new Date().toISOString()}}))}if(c&&l){const Ve={...c,qaData:[...c.qaData,...Ie],statistics:{totalQuestions:c.qaData.length+Y.length,avgAccuracy:"85",avgCitationLikelihood:"75",totalCost:ye.toString()},userId:l.id};console.log("[App] Updating session with new QA data:",Ve),d(Ve),a(o.map(pt=>pt.id===c.id?Ve:pt))}},dt=async Y=>{C(ce=>({...ce,[Y]:!0}));try{const ce=m[Y],De=ne,Ie=fe==="gemini-pro"?"gemini-1.5-flash":fe,re=(await Dt.generateAnswers({content:S,questions:[ce.question],provider:De,model:Ie})).answers[0]||{},[ye,et]=await Promise.all([Dt.calculateCitationLikelihood({answer:re.answer,content:S,provider:De,model:Ie}),Dt.calculateAccuracy({answer:re.answer,content:S,provider:De,model:Ie})]),{analyzeSentiment:st}=await Ln(async()=>{const{analyzeSentiment:Pt}=await Promise.resolve().then(()=>Xa);return{analyzeSentiment:Pt}},void 0),Ve=st(re.answer||""),{calculateGeoScoreV2:pt}=await Ln(async()=>{const{calculateGeoScoreV2:Pt}=await Promise.resolve().then(()=>Xa);return{calculateGeoScoreV2:Pt}},void 0),Lt=await pt({accuracy:parseFloat(et.accuracy)||0,question:ce.question,answer:re.answer||"",importantQuestions:m.map(Pt=>Pt.question),allConfidences:m.map(()=>85),sourceUrl:"",content:S}),Ot=Math.round((parseFloat(et.accuracy)||0)*.8+(Lt.geoScore||0)*.2),{calculateAndUpdateVectorSimilarities:rr}=await Ln(async()=>{const{calculateAndUpdateVectorSimilarities:Pt}=await import("./vectorSimilarity-CM4uDOKa.js");return{calculateAndUpdateVectorSimilarities:Pt}},[]),kt=(await rr([{question:ce.question,answer:re.answer||"",accuracy:null,sentiment:"",inputTokens:0,outputTokens:0,totalTokens:0,cost:0,geoScore:0,citationLikelihood:null}],S))[0]?.vectorSimilarity||null;v(Pt=>{const $t=[...Pt];if($t[Y]={...$t[Y],answer:re.answer||"",inputTokens:re.inputTokens||0,outputTokens:re.outputTokens||0,totalTokens:(re.inputTokens||0)+(re.outputTokens||0),cost:Sd(re.inputTokens||0,re.outputTokens||0,Ie),citationLikelihood:ye.citationLikelihood,accuracy:et.accuracy,sentiment:Ve,geoScore:Lt.geoScore,semanticRelevance:Ot.toString(),vectorSimilarity:kt,provider:ne,model:fe},c&&l){const Ut={...c,qaData:$t,statistics:{...c.statistics,totalQuestions:$t.length,totalCost:$t.reduce((mn,D)=>mn+(D.cost||0),0).toString()},userId:l.id};console.log("[App] Updating session with answer data:",Ut),d(Ut),a(o.map(mn=>mn.id===c.id?Ut:mn))}return $t})}catch(ce){console.error("Error generating answer:",ce)}finally{C(ce=>({...ce,[Y]:!1}))}},Kt=Y=>{j(ce=>ce.includes(Y)?ce.filter(De=>De!==Y):[...ce,Y])},Jt=()=>{j(m.map((Y,ce)=>ce))},ft=()=>{j([])},Mt=async()=>{for(const Y of x)await dt(Y)},Fn=async()=>{console.log("[Metrics] Recalculating metrics for existing QA items...");const Y=await Promise.all(m.map(async(ce,De)=>{if(!ce.answer)return ce;try{const Ie=ne,Ce=fe==="gemini-pro"?"gemini-1.5-flash":fe,[re,ye]=await Promise.all([Dt.calculateCitationLikelihood({answer:ce.answer,content:S,provider:Ie,model:Ce}),Dt.calculateAccuracy({answer:ce.answer,content:S,provider:Ie,model:Ce})]),{analyzeSentiment:et}=await Ln(async()=>{const{analyzeSentiment:kt}=await Promise.resolve().then(()=>Xa);return{analyzeSentiment:kt}},void 0),st=et(ce.answer||""),{calculateGeoScoreV2:Ve}=await Ln(async()=>{const{calculateGeoScoreV2:kt}=await Promise.resolve().then(()=>Xa);return{calculateGeoScoreV2:kt}},void 0),pt=await Ve({accuracy:parseFloat(ye.accuracy)||0,question:ce.question,answer:ce.answer||"",importantQuestions:m.map(kt=>kt.question),allConfidences:m.map(()=>85),sourceUrl:"",content:S}),Lt=Math.round((parseFloat(ye.accuracy)||0)*.8+(pt.geoScore||0)*.2),{calculateAndUpdateVectorSimilarities:Ot}=await Ln(async()=>{const{calculateAndUpdateVectorSimilarities:kt}=await import("./vectorSimilarity-CM4uDOKa.js");return{calculateAndUpdateVectorSimilarities:kt}},[]),Mn=(await Ot([{question:ce.question,answer:ce.answer||"",accuracy:null,sentiment:"",inputTokens:0,outputTokens:0,totalTokens:0,cost:0,geoScore:0,citationLikelihood:null}],S))[0]?.vectorSimilarity||null;return{...ce,citationLikelihood:re.citationLikelihood,accuracy:ye.accuracy,sentiment:st,geoScore:pt.geoScore,semanticRelevance:Lt.toString(),vectorSimilarity:Mn}}catch(Ie){return console.error(`[Metrics] Error recalculating metrics for item ${De}:`,Ie),ce}}));if(v(Y),c&&l){const ce={...c,qaData:Y,statistics:{...c.statistics,totalQuestions:Y.length,totalCost:Y.reduce((De,Ie)=>De+(Ie.cost||0),0).toString()},userId:l.id};d(ce),a(o.map(De=>De.id===c.id?ce:De))}console.log("[Metrics] Metrics recalculation completed")};return n.jsxs("div",{className:"space-y-8",children:[n.jsx(og,{questionProvider:$,questionModel:M,onQuestionProviderChange:U,onQuestionModelChange:oe,answerProvider:ne,answerModel:fe,onAnswerProviderChange:me,onAnswerModelChange:W,questionCount:L,onQuestionCountChange:_}),n.jsxs("div",{className:"card bg-white border border-primary/10 shadow-xl",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[n.jsx(Hr,{className:"w-8 h-8 text-black drop-shadow"}),n.jsx("h2",{className:"text-3xl font-extrabold text-black tracking-tight",children:"Content Input"})]}),n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-base font-semibold text-black mb-3 flex items-center gap-2",children:[n.jsx(pf,{className:"w-5 h-5 text-black"}),"Add Blog URL to crawl"]}),n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"url",value:J,onChange:Y=>{console.log("[URL Input] Value changed:",Y.target.value),le(Y.target.value)},onKeyDown:Y=>{Y.key==="Enter"&&(Y.preventDefault(),console.log("[URL Input] Enter pressed - preventing default"),J.trim()&&Fe())},placeholder:"https://example.com/article",className:"flex-1 bg-white border border-black/20 rounded-lg px-4 py-3 text-black text-base placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-all"},"url-input-fixed"),n.jsxs("button",{onClick:Fe,disabled:!J.trim(),className:"bg-black text-white font-bold px-6 py-2.5 rounded-lg hover:bg-gray-800 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-base shadow",children:[n.jsx(Hr,{className:"w-5 h-5 text-white"}),"Extract"]})]})}),k.length>0&&n.jsx("div",{className:"space-y-2 mb-4",children:k.map((Y,ce)=>n.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-100 rounded-lg border border-black/10",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"text-base text-black font-medium truncate",children:Y.url}),Y.status==="error"&&n.jsx("div",{className:"text-xs text-red-600 mt-1",children:Y.error})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[Y.status==="extracting"&&n.jsx(wn,{className:"w-5 h-5 animate-spin text-black"}),Y.status==="success"&&n.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),Y.status==="error"&&n.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),n.jsx("button",{onClick:()=>he(ce),className:"text-red-600 hover:text-red-400 transition-colors",children:n.jsx(ro,{className:"w-5 h-5 text-black"})})]})]},ce))})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-base font-semibold text-black mb-3 flex items-center gap-2",children:[n.jsx(Hr,{className:"w-5 h-5 text-black"}),"Or paste your content directly"]}),n.jsx("textarea",{value:B,onChange:Xe,placeholder:"Paste your content here or extract from URLs above...",rows:8,className:"w-full bg-white border border-black/20 rounded-lg px-4 py-3 text-black text-base placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-all resize-none"})]}),g.contentLength>0&&n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold text-black",children:g.totalTokens}),n.jsx("div",{className:"text-xs text-gray-600",children:"Total Tokens"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-lg font-bold text-black",children:["$",g.estimatedCost]}),n.jsx("div",{className:"text-xs text-gray-600",children:"Estimated Cost"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-lg font-bold text-black",children:[g.confidenceScore,"%"]}),n.jsx("div",{className:"text-xs text-gray-600",children:"Confidence"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-lg font-bold text-black",children:g.contentLength}),n.jsx("div",{className:"text-xs text-gray-600",children:"Characters"})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:async()=>{if(!B.trim()){alert("Please enter some content first");return}E(!0);try{const Y=Math.max(1,Math.min(10,L)),ce=await Dt.generateQuestions({content:B,questionCount:Y,provider:$,model:M==="gemini-pro"?"gemini-1.5-flash":M}),De=ce.questions.slice(0,Y).map(Ie=>({question:Ie,answer:"",accuracy:"",sentiment:"",inputTokens:ce.inputTokens||0,outputTokens:ce.outputTokens||0,totalTokens:(ce.inputTokens||0)+(ce.outputTokens||0),cost:0,geoScore:0,citationLikelihood:0,provider:$,model:M}));await Sn(De,B)}catch(Y){alert("Failed to generate questions: "+(Y.message||Y))}finally{E(!1)}},disabled:F||!B.trim(),className:"bg-black text-white font-bold px-8 py-3 rounded-lg hover:bg-gray-800 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-lg shadow",children:F?n.jsxs(n.Fragment,{children:[n.jsx(wn,{className:"w-5 h-5 animate-spin"}),"Generating Questions..."]}):n.jsxs(n.Fragment,{children:[n.jsx(xr,{className:"w-5 h-5"}),"Generate Questions"]})}),(B.trim()||k.length>0||m.length>0)&&n.jsxs("button",{onClick:$e,className:"bg-gray-500 text-white font-bold px-6 py-3 rounded-lg hover:bg-gray-600 transition-all duration-200 flex items-center gap-2 text-lg shadow",children:[n.jsx(ro,{className:"w-5 h-5"}),"New Analysis"]}),m.length>0&&m.some(Y=>Y.answer&&(!Y.sentiment||Y.sentiment===""||Y.geoScore===0))&&n.jsxs("button",{onClick:Fn,className:"bg-green-600 text-white font-bold px-6 py-3 rounded-lg hover:bg-green-700 transition-all duration-200 flex items-center gap-2 text-lg shadow",children:[n.jsx(ri,{className:"w-5 h-5"}),"Recalculate Metrics"]}),m.length>0&&n.jsxs("button",{onClick:()=>window.location.href="/history",className:"bg-blue-600 text-white font-bold px-6 py-3 rounded-lg hover:bg-blue-700 transition-all duration-200 flex items-center gap-2 text-lg shadow",children:[n.jsx(ii,{className:"w-5 h-5"}),"View in History"]})]})]})]}),m.length>0&&n.jsxs("div",{className:"card mt-8 p-6 bg-white border border-black/10 shadow-xl",children:[n.jsx("h3",{className:"text-xl font-bold text-black mb-4",children:"Generated Questions & Answers"}),n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("button",{className:"bg-gray-800 text-white font-bold px-5 py-2 rounded-lg hover:bg-gray-900 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",onClick:Mt,disabled:x.length===0,children:"Generate Responses for Selected"}),n.jsx("button",{className:"bg-gray-800 text-white font-bold px-4 py-2 rounded-lg hover:bg-gray-900 transition-all duration-200",onClick:Jt,children:"Select All"}),n.jsx("button",{className:"bg-gray-800 text-white font-bold px-4 py-2 rounded-lg hover:bg-gray-900 transition-all duration-200",onClick:ft,children:"Deselect All"})]}),n.jsx("ul",{className:"space-y-6",children:m.map((Y,ce)=>n.jsxs("li",{className:"p-4 rounded-lg bg-white border border-black/10",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx("input",{type:"checkbox",checked:x.includes(ce),onChange:()=>Kt(ce),className:"mr-2 accent-blue-700"}),n.jsxs("div",{className:"font-semibold text-black",children:["Q",ce+1,": ",Y.question]})]}),Y.answer?n.jsxs("div",{className:"text-black mb-2",children:[n.jsx("span",{className:"font-bold text-blue-700",children:"A:"})," ",Y.answer]}):n.jsx("button",{className:"bg-gray-800 text-white font-bold px-5 py-2 rounded-lg hover:bg-gray-900 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>dt(ce),disabled:I[ce],children:I[ce]?"Generating Answer...":"Generate Response"}),n.jsxs("div",{className:"text-xs text-black mt-2 flex gap-4 flex-wrap",children:[n.jsxs("span",{children:["Input Tokens: ",Y.inputTokens||0]}),n.jsxs("span",{children:["Output Tokens: ",Y.outputTokens||0]}),n.jsxs("span",{children:["Cost: $",Y.cost||0]}),n.jsxs("span",{children:["Vector Similarity: ",Y.vectorSimilarity??"-"]}),n.jsxs("span",{children:["Citation Likelihood: ",Y.citationLikelihood??"-"]}),n.jsxs("span",{children:["Accuracy: ",Y.accuracy??"-"]})]})]},ce))})]})]})}function Ug(){const{isAuthenticated:l,isLoading:o,logout:a,user:c,refreshUser:d}=Gr();console.log("[App] Authentication state:",{isAuthenticated:l,isLoading:o,hasUser:!!c,userEmail:c?.email}),w.useEffect(()=>{l&&!c&&!o&&(console.log("[App] Authenticated but no user data, forcing refresh..."),d())},[l,c,o,d]),w.useEffect(()=>{l&&c&&(console.log("[App] Clearing stale localStorage data..."),["llm_qa_current_session","structure_last_saved","overview_market_analysis"].forEach(F=>{try{localStorage.getItem(F)&&(console.log(`[App] Clearing stale localStorage key: ${F}`),localStorage.removeItem(F))}catch(E){console.warn(`[App] Could not clear ${F}:`,E)}}))},[l,c]);const[m,v]=w.useState(!1),S=un(),[y]=_n(Yd,[]),[x]=_n(Zd,null);let j=[];try{const _=JSON.parse(localStorage.getItem(Xd)||"[]");j=Array.from(new Set(_.map(F=>{try{return new URL(F).hostname.replace(/^www\./,"")}catch{return F}}))).filter(Boolean)}catch{}if(o)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-black via-gray-900 to-black",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-primary font-medium",children:"Loading kabini.ai..."}),n.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Please wait while we verify your authentication..."})]})});if(l&&!c)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-black via-gray-900 to-black",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-primary font-medium",children:"Loading user data..."}),n.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Please wait while we load your profile..."})]})});if(!l)return console.log("[App] User not authenticated, showing login page"),n.jsxs(wd,{children:[n.jsx(St,{path:"/signup",element:n.jsx(Lg,{})}),n.jsx(St,{path:"/forgot-password",element:n.jsx(Pg,{})}),n.jsx(St,{path:"/reset-password",element:n.jsx(Ig,{})}),n.jsx(St,{path:"/test-notifications",element:n.jsx(Rg,{})}),n.jsx(St,{path:"*",element:n.jsx(tg,{})})]});console.log("[App] User is authenticated, showing main app");const L=async()=>{try{await a()}catch(_){console.error("Logout error:",_)}};return n.jsxs("div",{className:"flex min-h-screen bg-white overflow-hidden",children:[n.jsx(Mg,{isOpen:m,setIsOpen:v,onLogout:L,user:c,currentPath:S.pathname}),n.jsxs("div",{className:"flex-1 flex flex-col min-h-screen overflow-hidden",children:[n.jsx(Og,{setIsOpen:v,onLogout:L}),n.jsx("main",{className:"flex-1 p-2 sm:p-4 lg:p-6 overflow-x-hidden overflow-y-auto text-black bg-white",children:n.jsxs(wd,{children:[n.jsx(St,{path:"/overview",element:n.jsx(fg,{})}),n.jsx(St,{path:"/ai-visibility-analysis",element:n.jsx(wg,{})}),n.jsx(St,{path:"/qa-generation",element:n.jsx(Nd,{})}),n.jsx(St,{path:"/enhance-content",element:n.jsx(Nd,{})}),n.jsx(St,{path:"/content-structure-analysis",element:n.jsx(Tg,{})}),n.jsx(St,{path:"/history",element:n.jsx(ag,{qaItems:y.flatMap(_=>_.qaData),onExport:ng})}),n.jsx(St,{path:"/statistics",element:n.jsx(kf,{sessions:y,currentSession:x})}),n.jsx(St,{path:"/CloudFuzeLLMQA",element:n.jsx(vd,{to:"/overview",replace:!0})}),n.jsx(St,{path:"/",element:n.jsx(vd,{to:"/overview",replace:!0})})]})}),n.jsx($g,{})]})]})}function zg(){return n.jsx(Op,{children:n.jsx(Ug,{})})}rf.createRoot(document.getElementById("root")).render(n.jsx(w.StrictMode,{children:n.jsx(Yp,{children:n.jsx(zg,{})})}));
